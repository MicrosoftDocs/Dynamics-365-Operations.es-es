---
title: Trabajo de limpieza de entradas disponibles de gestión de almacén
description: Este tema describe el trabajo de limpieza de entradas disponibles, que ayuda a mejorar el rendimiento del sistema al identificar y eliminar registros relacionados pero innecesarios.
author: perlynne
manager: tfehr
ms.date: 04/23/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: perlynne
ms.search.validFrom: 2020-04-03
ms.dyn365.ops.version: Release 10.0.12
ms.openlocfilehash: f6d1f8a4c85c2161d1b79246d437bb3b4d223d1d
ms.sourcegitcommit: a3cd2783ae120ac6681431c010b9b126a9ca7d94
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 05/29/2020
ms.locfileid: "3410980"
---
# <a name="warehouse-management-on-hand-entries-cleanup-job"></a><span data-ttu-id="73f58-103">Trabajo de limpieza de entradas disponibles de gestión de almacén</span><span class="sxs-lookup"><span data-stu-id="73f58-103">Warehouse management on-hand entries cleanup job</span></span>

<span data-ttu-id="73f58-104">El rendimiento de las consultas que se utilizan para calcular el inventario disponible se ve afectado por el número de registros en las tablas involucradas.</span><span class="sxs-lookup"><span data-stu-id="73f58-104">The performance of queries that are used to calculate on-hand inventory is affected by the number of records in the tables that are involved.</span></span> <span data-ttu-id="73f58-105">Una forma de ayudar a mejorar el rendimiento es reducir el número de registros que la base de datos debe tener en cuenta.</span><span class="sxs-lookup"><span data-stu-id="73f58-105">One way to help improve the performance is to reduce the number of records that the database must consider.</span></span>

<span data-ttu-id="73f58-106">Este tema describe el trabajo de limpieza de entradas disponibles, que elimina registros innecesarios en las tablas InventSum y WHSInventReserve.</span><span class="sxs-lookup"><span data-stu-id="73f58-106">This topic describes the on-hand entries cleanup job, which deletes unneeded records in the InventSum and WHSInventReserve tables.</span></span> <span data-ttu-id="73f58-107">Estas tablas almacenan información disponible para artículos que están habilitados para el procesamiento de gestión de almacenes.</span><span class="sxs-lookup"><span data-stu-id="73f58-107">These tables store on-hand information for items that are enabled for warehouse management processing.</span></span> <span data-ttu-id="73f58-108">(Estos elementos se denominan elementos WHS). La eliminación de estos registros puede mejorar significativamente el rendimiento de los cálculos disponibles.</span><span class="sxs-lookup"><span data-stu-id="73f58-108">(These items are referred to as WHS items.) Deletion of these records can significantly improve the performance of on-hand calculations.</span></span>

## <a name="what-the-cleanup-job-does"></a><span data-ttu-id="73f58-109">Qué hace el trabajo de limpieza</span><span class="sxs-lookup"><span data-stu-id="73f58-109">What the cleanup job does</span></span>

<span data-ttu-id="73f58-110">El trabajo de limpieza de entradas disponibles elimina todos los registros de las tablas WHSInventReserve e InventSum donde están todos los valores de campo son *0* (cero).</span><span class="sxs-lookup"><span data-stu-id="73f58-110">The on-hand entries cleanup job deletes any records in the WHSInventReserve and InventSum tables where all the field values are *0* (zero).</span></span> <span data-ttu-id="73f58-111">Estos registros se pueden eliminar porque no contribuyen a la información disponible.</span><span class="sxs-lookup"><span data-stu-id="73f58-111">These records can be deleted because they don't contribute to the on-hand information.</span></span> <span data-ttu-id="73f58-112">El trabajo elimina solo los registros que están debajo del nivel **Ubicación**.</span><span class="sxs-lookup"><span data-stu-id="73f58-112">The job deletes only records that are below the **Location** level.</span></span>

<span data-ttu-id="73f58-113">Si se permite el inventario físico negativo, es posible que el trabajo de limpieza no pueda eliminar todas las entradas relevantes.</span><span class="sxs-lookup"><span data-stu-id="73f58-113">If negative physical inventory is allowed, the cleanup job might not be able to delete all the relevant entries.</span></span> <span data-ttu-id="73f58-114">La razón de esta limitación es que el trabajo debe contemplar un escenario especial donde una matrícula tiene varios números de serie, y uno de esos números de serie se ha vuelto negativo.</span><span class="sxs-lookup"><span data-stu-id="73f58-114">The reason for this limitation is that the job must allow for a special scenario where a license plate has multiple serial numbers, and one of those serial numbers has become negative.</span></span> <span data-ttu-id="73f58-115">Por ejemplo, el sistema tendrá cero en la matrícula cuando una matrícula tenga +1 unidades del números de serie 1 y –1 unidades del número de serie 2.</span><span class="sxs-lookup"><span data-stu-id="73f58-115">For example, the system will have zero on hand at the license plate level when a license plate has +1 pcs of serial number 1 and –1 pcs of serial number 2.</span></span> <span data-ttu-id="73f58-116">Para este escenario especial, el trabajo realiza una eliminación de primer orden, donde primero intenta eliminar de los niveles inferiores.</span><span class="sxs-lookup"><span data-stu-id="73f58-116">For this special scenario, the job does a breadth-first deletion, where it tries to delete from lower levels first.</span></span>

## <a name="schedule-and-configure-the-cleanup-job"></a><span data-ttu-id="73f58-117">Programar y configurar el trabajo de limpieza</span><span class="sxs-lookup"><span data-stu-id="73f58-117">Schedule and configure the cleanup job</span></span>

<span data-ttu-id="73f58-118">El trabajo de limpieza de entradas disponibles está disponible en **Gestión de inventario \> Tareas periódicas \> Limpiar \> Limpieza de entradas disponibles de gestión de almacén**.</span><span class="sxs-lookup"><span data-stu-id="73f58-118">The on-hand entries cleanup job is available at **Inventory management \> Periodic tasks \> Clean up \> Warehouse management on-hand entries cleanup**.</span></span> <span data-ttu-id="73f58-119">Use la configuración de trabajo estándar para controlar el alcance y la programación de la ejecución del trabajo.</span><span class="sxs-lookup"><span data-stu-id="73f58-119">Use the standard job settings to control the scope and schedule for running the job.</span></span> <span data-ttu-id="73f58-120">Además, se proporcionan las siguientes opciones:</span><span class="sxs-lookup"><span data-stu-id="73f58-120">In addition, the following settings are provided:</span></span>

- <span data-ttu-id="73f58-121">**Eliminar si no se actualiza durante un cierto número des días**: introduzca el número mínimo de días que el trabajo debe esperar antes de eliminar una entrada disponible que cuya cantidad ha bajado a cero.</span><span class="sxs-lookup"><span data-stu-id="73f58-121">**Delete if not updated for this many days** – Enter the minimum number of days that the job should wait before it deletes an on-hand entry that has dropped to zero quantity.</span></span> <span data-ttu-id="73f58-122">Use esta configuración para ayudar a reducir el riesgo de eliminar entradas disponibles que todavía se están utilizando.</span><span class="sxs-lookup"><span data-stu-id="73f58-122">Use this setting to help reduce the risk of deleting on-hand entries that are still being used.</span></span> <span data-ttu-id="73f58-123">Si desea que se realice la limpieza lo antes posible, introduzca *0* (cero) o deje el campo en blanco.</span><span class="sxs-lookup"><span data-stu-id="73f58-123">If you want cleanup to occur as soon as possible, either enter *0* (zero) or leave the field blank.</span></span>
- <span data-ttu-id="73f58-124">**Tiempo máximo de ejecución (horas)**: introduzca el tiempo máximo de ejecución del trabajo de limpieza, en horas.</span><span class="sxs-lookup"><span data-stu-id="73f58-124">**Maximum execution time (hours)** – Enter the maximum execution time of the cleanup job, in hours.</span></span> <span data-ttu-id="73f58-125">Si el trabajo no se completa antes de que pase este tiempo, guardará el trabajo completado hasta entonces y luego se cerrará.</span><span class="sxs-lookup"><span data-stu-id="73f58-125">If the job isn't completed before this time passes, it will save the work that it has completed so far and then close itself.</span></span> <span data-ttu-id="73f58-126">Esta capacidad es especialmente relevante para implementaciones que tengan elevado uso de inventario.</span><span class="sxs-lookup"><span data-stu-id="73f58-126">This capability is especially relevant for implementations that have high inventory use.</span></span> <span data-ttu-id="73f58-127">En estos casos, debe programar la ejecución del trabajo en momentos en que la carga del sistema sea lo más ligera posible.</span><span class="sxs-lookup"><span data-stu-id="73f58-127">In these cases, you should schedule the job to run at times when the system load is as light as possible.</span></span> <span data-ttu-id="73f58-128">Si desea que el trabajo por lotes continúe ejecutándose hasta que se complete, introduzca *0* (cero) o deje el campo en blanco.</span><span class="sxs-lookup"><span data-stu-id="73f58-128">If you want the batch job to continue to run until it's completed, either enter *0* (zero) or leave the field blank.</span></span> <span data-ttu-id="73f58-129">Esta opción solo está disponible si la característica relacionada se ha [activado en el sistema](#max-execution-time).</span><span class="sxs-lookup"><span data-stu-id="73f58-129">This setting is available only if the related feature has been [turned on in your system](#max-execution-time).</span></span>

<span data-ttu-id="73f58-130">Aunque puede ejecutar el trabajo durante el horario comercial habitual, le recomendamos que lo haga fuera del horario laboral.</span><span class="sxs-lookup"><span data-stu-id="73f58-130">Although you can run the job during regular business hours, we recommend that you run it outside working hours.</span></span> <span data-ttu-id="73f58-131">De esta forma, ayuda a evitar conflictos que pueden ocurrir si un usuario está trabajando con un registro que también se está limpiando.</span><span class="sxs-lookup"><span data-stu-id="73f58-131">In this way, you help prevent conflicts that can occur if a user is working with a record that is also being cleaned up.</span></span>

<span data-ttu-id="73f58-132">Si el trabajo intenta eliminar un registro de un elemento mientras otro usuario está utilizando ese registro, se produce un error de bloqueo en punto muerto tanto para el trabajo de limpieza como para el usuario.</span><span class="sxs-lookup"><span data-stu-id="73f58-132">If the job tries to delete a record for an item while that record is being used by another user, a deadlock error occurs for either the cleanup job or the user.</span></span>

<span data-ttu-id="73f58-133">Cuando se ejecuta el trabajo, tiene un tamaño de confirmación de 100.</span><span class="sxs-lookup"><span data-stu-id="73f58-133">When the job runs, it has a commit size of 100.</span></span> <span data-ttu-id="73f58-134">En otras palabras, intentará confirmar una vez por cada 100 eliminaciones.</span><span class="sxs-lookup"><span data-stu-id="73f58-134">In other words, it will try to commit one time for every 100 deletions.</span></span> <span data-ttu-id="73f58-135">Sin embargo, debido a que algunas eliminaciones se basan en conjuntos, puede haber escenarios en los que se pueden eliminar más de 100 registros en la misma transacción.</span><span class="sxs-lookup"><span data-stu-id="73f58-135">However, because some deletions are set-based, there might be scenarios where more than 100 records can be deleted in the same transaction.</span></span> <span data-ttu-id="73f58-136">Por lo tanto, los conflictos de bloqueo todavía pueden seguir ocurriendo.</span><span class="sxs-lookup"><span data-stu-id="73f58-136">Therefore, lock escalations can still sometimes occur.</span></span>

## <a name="possible-user-impact"></a><span data-ttu-id="73f58-137">Posible impacto en el usuario</span><span class="sxs-lookup"><span data-stu-id="73f58-137">Possible user impact</span></span>

<span data-ttu-id="73f58-138">Los usuarios pueden verse afectados si el trabajo de limpieza de entradas disponibles elimina todos los registros para un nivel determinado (como al nivel de matrícula).</span><span class="sxs-lookup"><span data-stu-id="73f58-138">Users might be affected if the on-hand entries cleanup job deletes all the records for a given level (such as the license plate level).</span></span> <span data-ttu-id="73f58-139">En este caso, la funcionalidad para ver que el inventario estaba disponible previamente en una matrícula podría no funcionar como se esperaba, porque las entradas disponibles relevantes ya no están disponibles.</span><span class="sxs-lookup"><span data-stu-id="73f58-139">In this case, the functionality for seeing that inventory was previously available on hand at a license plate might not work as expected, because the relevant on-hand entries are no longer available.</span></span> <span data-ttu-id="73f58-140">(Esa funcionalidad verifica la condición **Cantidad \<\> 0** en la configuración **Visualización de dimensiones** cuando los usuarios ven la información disponible). Sin embargo, la mejora del rendimiento que proporciona el trabajo de limpieza debería compensar esta pequeña pérdida de funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="73f58-140">(That functionality checks the condition **Quantity \<\> 0** in the **Dimension display** settings when users view on-hand information.) However, the performance improvement that the cleanup job provides should make up for this small loss in functionality.</span></span>

## <a name="make-the-maximum-execution-time-setting-available"></a><a name="max-execution-time"></a><span data-ttu-id="73f58-141">Hacer que la opción de Tiempo de ejecución máximo esté disponible</span><span class="sxs-lookup"><span data-stu-id="73f58-141">Make the Maximum execution time setting available</span></span>

<span data-ttu-id="73f58-142">De forma predeterminada, la opción de **Tiempo de ejecución máximo** no está disponible.</span><span class="sxs-lookup"><span data-stu-id="73f58-142">By default, the **Maximum execution time** setting isn't available.</span></span> <span data-ttu-id="73f58-143">Si quieres usarla, deberá usar [administración de características](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) para activar la característica relacionada en su sistema.</span><span class="sxs-lookup"><span data-stu-id="73f58-143">If you want to use it, you must use [feature management](../../fin-ops-core/fin-ops/get-started/feature-management/feature-management-overview.md) to turn on the related feature in your system.</span></span> <span data-ttu-id="73f58-144">En el espacio de trabajo **Administración de características**, la característica aparece de la siguiente forma:</span><span class="sxs-lookup"><span data-stu-id="73f58-144">In the **Feature management** workspace, the feature is listed in the following way:</span></span>

- <span data-ttu-id="73f58-145">**Módulo:** *Gestión de almacén*</span><span class="sxs-lookup"><span data-stu-id="73f58-145">**Module:** *Warehouse management*</span></span>
- <span data-ttu-id="73f58-146">**Nombre de la característica:** *Tiempo de ejecución máximo para el trabajo de limpieza de entradas disponibles de gestión de almacén*</span><span class="sxs-lookup"><span data-stu-id="73f58-146">**Feature name:** *Maximum execution time for the warehouse management on-hand entries cleanup job*</span></span>
