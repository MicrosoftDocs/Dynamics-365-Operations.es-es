---
title: Sincronización de pedidos de ventas entre Sales y Supply Chain Management
description: En el tema se abordan las plantillas y las tareas subyacentes que se usan para sincronizar pedidos de ventas directamente entre Dynamics 365 Sales y Dynamics 365 Supply Chain Management.
author: ChristianRytt
manager: tfehr
ms.date: 05/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: kamaybac
ms.search.scope: Core, Operations
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: crytt
ms.dyn365.ops.version: July 2017 update
ms.search.validFrom: 2017-07-8
ms.openlocfilehash: 3eaa25f0befcff448250ba2cce8e568fa4a4c707
ms.sourcegitcommit: 199848e78df5cb7c439b001bdbe1ece963593cdb
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 10/13/2020
ms.locfileid: "4437047"
---
# <a name="synchronization-of-sales-orders-directly-between-sales-and-supply-chain-management"></a><span data-ttu-id="e9bfc-103">Sincronización de pedidos de ventas entre Sales y Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="e9bfc-103">Synchronization of sales orders directly between Sales and Supply Chain Management</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="e9bfc-104">En el tema se abordan las plantillas y las tareas subyacentes que se usan para sincronizar pedidos de ventas directamente entre Dynamics 365 Sales y Dynamics 365 Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-104">The topic discusses the templates and underlying tasks that are used to run synchronization of sales orders directly between Dynamics 365 Sales and Dynamics 365 Supply Chain Management.</span></span>

## <a name="data-flow-in-prospect-to-cash"></a><span data-ttu-id="e9bfc-105">Flujo de datos en Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="e9bfc-105">Data flow in Prospect to cash</span></span>

<span data-ttu-id="e9bfc-106">La solución Prospect to cash usa la característica de integración de datos para sincronizar datos a través de las instancias de Supply Chain Management y Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-106">The Prospect to cash solution uses the Data integration feature to synchronize data across instances of Supply Chain Management and Sales.</span></span> <span data-ttu-id="e9bfc-107">Las plantillas de Prospect to cash disponibles con la característica de integración de datos permiten el flujo de datos de cuentas, contactos, productos, presupuestos de ventas, pedidos de ventas y facturas de ventas entre Supply Chain Management y Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-107">The Prospect to cash templates that are available with the Data integration feature enable the flow of data for accounts, contacts, products, sales quotations, sales orders, and sales invoices between Supply Chain Management and Sales.</span></span> <span data-ttu-id="e9bfc-108">La ilustración siguiente muestra cómo se sincronizan los datos entre Supply Chain Management y Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-108">The following illustration shows how the data is synchronized between Supply Chain Management and Sales.</span></span>

<span data-ttu-id="e9bfc-109">[![Flujo de datos en Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-109">[![Data flow in Prospect to cash](./media/prospect-to-cash-data-flow.png)](./media/prospect-to-cash-data-flow.png)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="e9bfc-110">Plantillas y tareas</span><span class="sxs-lookup"><span data-stu-id="e9bfc-110">Templates and tasks</span></span>

<span data-ttu-id="e9bfc-111">Para obtener acceso a las plantillas disponibles, abra [Centro de administración de Power Apps](https://preview.admin.powerapps.com/dataintegration).</span><span class="sxs-lookup"><span data-stu-id="e9bfc-111">To access the available templates, open [Power Apps Admin Center](https://preview.admin.powerapps.com/dataintegration).</span></span> <span data-ttu-id="e9bfc-112">Seleccione **Proyectos** y, a continuación, en la esquina superior derecha, seleccione **Nuevo proyecto** para seleccionar plantillas públicas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-112">Select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="e9bfc-113">Las plantillas y las tareas subyacentes siguientes se usan para ejecutar sincronizaciones de pedidos de ventas directamente entre Sales y Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-113">The following templates and underlying tasks are used to run synchronization of sales orders directly between Sales and Supply Chain Management.</span></span>

- <span data-ttu-id="e9bfc-114">**Nombres de las plantillas en la integración de datos:**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-114">**Names of the templates in Data integration:**</span></span> 

    - <span data-ttu-id="e9bfc-115">Pedidos de Sales (Sales a Supply Chain Management) - Directo</span><span class="sxs-lookup"><span data-stu-id="e9bfc-115">Sales Orders (Sales to Supply Chain Management) - Direct</span></span>
    - <span data-ttu-id="e9bfc-116">Pedidos de Sales (Supply Chain Management a Sales) - Directo</span><span class="sxs-lookup"><span data-stu-id="e9bfc-116">Sales Orders (Supply Chain Management to Sales) - Direct</span></span>

- <span data-ttu-id="e9bfc-117">**Nombres de las tareas en el proyecto de integración de datos:**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-117">**Names of the tasks in the Data integration project:**</span></span>

    - <span data-ttu-id="e9bfc-118">OrderHeader</span><span class="sxs-lookup"><span data-stu-id="e9bfc-118">OrderHeader</span></span>
    - <span data-ttu-id="e9bfc-119">OrderLine</span><span class="sxs-lookup"><span data-stu-id="e9bfc-119">OrderLine</span></span>

<span data-ttu-id="e9bfc-120">Las siguientes tareas de sincronización son necesarias antes de que pueda producirse la sincronización de los encabezados y líneas de factura:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-120">The following synchronization tasks are required before synchronization of sales invoice headers and lines can occur:</span></span>

- <span data-ttu-id="e9bfc-121">Productos (Supply Chain Management a Sales) - Directo</span><span class="sxs-lookup"><span data-stu-id="e9bfc-121">Products (Supply Chain Management to Sales) - Direct</span></span>
- <span data-ttu-id="e9bfc-122">Cuentas (Sales a Supply Chain Management) - Directo (si se usa)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-122">Accounts (Sales to Supply Chain Management) - Direct (if used)</span></span>
- <span data-ttu-id="e9bfc-123">Contactos a clientes (de Sales a Supply Chain Management) - Directo (si se usa)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-123">Contacts to Customers (Sales to Supply Chain Management) - Direct (if used)</span></span>

## <a name="entity-set"></a><span data-ttu-id="e9bfc-124">Conjunto de entidades</span><span class="sxs-lookup"><span data-stu-id="e9bfc-124">Entity set</span></span>

| <span data-ttu-id="e9bfc-125">Gestión de la cadena de abastecimiento</span><span class="sxs-lookup"><span data-stu-id="e9bfc-125">Supply Chain Management</span></span>  | <span data-ttu-id="e9bfc-126">Ventas</span><span class="sxs-lookup"><span data-stu-id="e9bfc-126">Sales</span></span>             |
|-------------------------|-------------------|
| <span data-ttu-id="e9bfc-127">Encabezado de pedidos de ventas de CDS</span><span class="sxs-lookup"><span data-stu-id="e9bfc-127">CDS sales order headers</span></span> | <span data-ttu-id="e9bfc-128">SalesOrders</span><span class="sxs-lookup"><span data-stu-id="e9bfc-128">SalesOrders</span></span>       |
| <span data-ttu-id="e9bfc-129">Líneas de pedido de ventas de CDS</span><span class="sxs-lookup"><span data-stu-id="e9bfc-129">CDS sales order lines</span></span>   | <span data-ttu-id="e9bfc-130">SalesOrderDetails</span><span class="sxs-lookup"><span data-stu-id="e9bfc-130">SalesOrderDetails</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="e9bfc-131">Flujo de la entidad</span><span class="sxs-lookup"><span data-stu-id="e9bfc-131">Entity flow</span></span>

<span data-ttu-id="e9bfc-132">Los pedidos de ventas se crean en Sales y se sincronizan con Supply Chain Management cuando se activa **Ejecutar proyecto** para un proyecto basado en la plantilla **Pedidos de ventas (Sales a Supply Chain Management) - Directos**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-132">Sales orders are created in Sales and synchronized to Supply Chain Management when **Run project** is triggered for a project based on the **Sales Orders (Sales to Supply Chain Management) - Direct** template.</span></span> <span data-ttu-id="e9bfc-133">Puede activar y sincronizar solo pedidos desde Sales si todos los **Productos del pedido** constan de productos que se mantienen externamente.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-133">You can only activate and synchronize orders from Sales if all **Order Products** consist of products that are externally maintained.</span></span> <span data-ttu-id="e9bfc-134">Por lo tanto, no puede haber productos de escritura.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-134">Therefore, there can be no write-in products.</span></span> <span data-ttu-id="e9bfc-135">Después de activar el pedido, el pedido de ventas pasará a ser de solo lectura en la interfaz de usuario (UI).</span><span class="sxs-lookup"><span data-stu-id="e9bfc-135">After the order is activated, the sales order becomes read-only in the user interface (UI).</span></span> <span data-ttu-id="e9bfc-136">En ese momento, las actualizaciones se realizan desde Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-136">At that point, the updates are made from Supply Chain Management.</span></span> <span data-ttu-id="e9bfc-137">Después de que el pedido de ventas tenga un estado de **Confirmado**, podrá utilizarse un proyecto basado en la plantilla **Pedidos de ventas (Supply Chain Managementa Sales) - Directos** para sincronizar las actualizaciones o el estado de cumplimiento de Supply Chain Management a Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-137">After the sales order has a status of **Confirmed**, the a project based on the **Sales Orders (Supply Chain Management to Sales) - Direct** template can be used to synchronize updates or fulfillment status from Supply Chain Management to Sales.</span></span>

<span data-ttu-id="e9bfc-138">No es necesario crear pedidos en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-138">You don't have to create orders in Sales.</span></span> <span data-ttu-id="e9bfc-139">Puede crear nuevos pedidos de ventas en Supply Chain Management en su lugar.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-139">You can create new sales orders in Supply Chain Management instead.</span></span> <span data-ttu-id="e9bfc-140">Después de que un pedido de ventas tenga un estado de **Confirmado**, se sincroniza con Sales como se describe en el párrafo anterior.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-140">After a sales order has a status of **Confirmed**, it's synchronized to Sales as described in the previous paragraph.</span></span>

<span data-ttu-id="e9bfc-141">En Supply Chain Management, los filtros de la plantilla ayudan a garantizar que solo se incluyan en la sincronización los pedidos de ventas más importantes:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-141">In Supply Chain Management, filters in the template help guarantee that only the relevant sales orders are included in the synchronization:</span></span>

- <span data-ttu-id="e9bfc-142">En el pedido de ventas, tanto el cliente de pedidos como el cliente de facturación tienen que originarse en Sales para incluirse en la sincronización.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-142">On the sales order, both the ordering customer and the invoicing customer have to originate from Sales to be included in the synchronization.</span></span> <span data-ttu-id="e9bfc-143">En Supply Chain Management, los campos **OrderingCustomerIsExternallyMaintained** y **InvoiceCustomerIsExternallyMaintained** se usan para filtrar pedidos de ventas de las entidades de datos.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-143">In Supply Chain Management, the **OrderingCustomerIsExternallyMaintained** and **InvoiceCustomerIsExternallyMaintained** fields are used to filter sales orders from the data entities.</span></span>
- <span data-ttu-id="e9bfc-144">Debe confirmar el pedido de ventas en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-144">The sales order in Supply Chain Management must be confirmed.</span></span> <span data-ttu-id="e9bfc-145">Solo se sincronizan en Sales los pedidos de ventas confirmados o los pedidos de ventas con un estado más alto de procesamiento como, por ejemplo, aquellos que tengan un estado de **Enviado** o **Facturado**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-145">Only confirmed sales orders or sales orders that have a higher processing status, such as **Shipped** or **Invoiced**, are synchronized to Sales.</span></span>
- <span data-ttu-id="e9bfc-146">Después de crear o modificar un pedido de ventas, debe ejecutar el trabajo por lotes **Calcular las ventas totales** en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-146">After a sales order is created or modified, the **Calculate sales totals** batch job in Supply Chain Management must be run.</span></span> <span data-ttu-id="e9bfc-147">Solo se sincronizarán con Sales los pedidos de ventas en los que se calculan las ventas totales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-147">Only sales orders where sales totals are calculated will be synchronized to Sales.</span></span>

## <a name="freight-tax"></a><span data-ttu-id="e9bfc-148">Impuestos de transporte</span><span class="sxs-lookup"><span data-stu-id="e9bfc-148">Freight tax</span></span>

<span data-ttu-id="e9bfc-149">Sales no admite impuestos a nivel de encabezado, ya que los impuestos se almacenan a nivel de línea.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-149">Sales doesn't support tax at the header level, because tax is stored at the line level.</span></span> <span data-ttu-id="e9bfc-150">Para admitir impuestos a nivel de encabezado de Supply Chain Management, como impuestos de transporte, el sistema sincroniza impuestos a Sales como producto de escritura que se denomina **Impuestos de transporte** y que tiene el importe de impuestos de Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-150">To support tax at the header level from Supply Chain Management, such as tax on freight, the system synchronizes tax to Sales as a write-in product that is named **Freight Tax**, and that has the tax amount from Supply Chain Management.</span></span> <span data-ttu-id="e9bfc-151">De esta manera, el cálculo de precios estándar en Sales se puede usar para totales, incluso si hay impuestos a nivel de encabezado de Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-151">In this way, the standard price calculation in Sales can be used for totals, even when there is tax at the header level from Supply Chain Management.</span></span>

## <a name="discount-calculation-and-rounding"></a><span data-ttu-id="e9bfc-152">Cálculo del descuento y redondeo</span><span class="sxs-lookup"><span data-stu-id="e9bfc-152">Discount calculation and rounding</span></span>

<span data-ttu-id="e9bfc-153">El modelo de cálculo del descuento en Sales es distinto del modelo de cálculo de descuento en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-153">The discount calculation model in Sales differs from the discount calculation model in Supply Chain Management.</span></span> <span data-ttu-id="e9bfc-154">En Supply Chain Management, el importe del descuento final en una línea de ventas puede ser el resultado de una combinación de importes de descuento y de porcentajes de descuento.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-154">In Supply Chain Management, the final discount amount on a sales line can be the result of a combination of discount amounts and discount percentages.</span></span> <span data-ttu-id="e9bfc-155">Si este importe del descuento final se divide por la cantidad en la línea, puede producirse redondeo.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-155">If this final discount amount is divided by the quantity on the line, rounding can occur.</span></span> <span data-ttu-id="e9bfc-156">Sin embargo, este redondeo no se tiene en cuenta si un importe de descuento por unidad redondeado se sincroniza con Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-156">However, this rounding isn't considered if a rounded per-unit discount amount is synchronized to Sales.</span></span> <span data-ttu-id="e9bfc-157">Para ayudar a garantizar que el importe de descuento completo de una línea de ventas en Supply Chain Management se sincronice correctamente con Sales, el importe completo debe sincronizarse sin ser dividido por la cantidad de línea.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-157">To help guarantee that the full discount amount from a sales line in Supply Chain Management is correctly synchronized to Sales, the full amount must be synchronized without being divided by the line quantity.</span></span> <span data-ttu-id="e9bfc-158">Por lo tanto, debe definir **Método de cálculo de descuentos** como **Artículo de línea** en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-158">Therefore, you must define the **Discount calculation method** as **Line item** in Sales.</span></span>

<span data-ttu-id="e9bfc-159">Cuando una línea de pedido de ventas se sincroniza de Sales a Supply Chain Management, se usará el importe de descuento de línea completo.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-159">When a sales order line is synchronized from Sales to Supply Chain Management, the full line discount amount is used.</span></span> <span data-ttu-id="e9bfc-160">Dado que Supply Chain Management no tiene ningún campo que pueda almacenar el importe de descuento completo para una línea, el importe se divide por la cantidad y se almacena en el campo **Descuento de línea**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-160">Because Supply Chain Management has no field that can store the full discount amount for a line, the amount is divided by the quantity and stored in the **Line discount** field.</span></span> <span data-ttu-id="e9bfc-161">El redondeo que se produzca en esta división se almacena en el campo **Gastos de ventas** en la línea de ventas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-161">Any rounding that occurs in this division is stored in the **Sales charges** field on the sales line.</span></span>

### <a name="example"></a><span data-ttu-id="e9bfc-162">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="e9bfc-162">Example</span></span>

<span data-ttu-id="e9bfc-163">**Sincronización de Sales a Supply Chain Management**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-163">**Synchronization from Sales to Supply Chain Management**</span></span>

- <span data-ttu-id="e9bfc-164">**Ventas:** Cantidad = 3, descuento por línea = $10.00</span><span class="sxs-lookup"><span data-stu-id="e9bfc-164">**Sales:** Quantity = 3, per-line discount = $10.00</span></span>
- <span data-ttu-id="e9bfc-165">**Supply Chain Management:** Cantidad = 3, importe de descuento de línea = 3,33 $, cargo de ventas = -0,01 $</span><span class="sxs-lookup"><span data-stu-id="e9bfc-165">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span> 

<span data-ttu-id="e9bfc-166">**Sincronización de Supply Chain Management a Sales**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-166">**Synchronization from Supply Chain Management to Sales**</span></span>

- <span data-ttu-id="e9bfc-167">**Supply Chain Management:** Cantidad = 3, importe de descuento de línea = 3,33 $, cargo de ventas = -0,01 $</span><span class="sxs-lookup"><span data-stu-id="e9bfc-167">**Supply Chain Management:** Quantity = 3, line discount amount = $3.33, sales charge = -$0.01</span></span>
- <span data-ttu-id="e9bfc-168">**Ventas:** Cantidad = 3, descuento por línea = (3 × $3.33) + $0.01 = $10.00</span><span class="sxs-lookup"><span data-stu-id="e9bfc-168">**Sales:** Quantity = 3, per-line discount = (3 × $3.33) + $0.01 = $10.00</span></span>

## <a name="prospect-to-cash-solution-for-sales"></a><span data-ttu-id="e9bfc-169">Cliente potencial para cobrar la solución por Sales</span><span class="sxs-lookup"><span data-stu-id="e9bfc-169">Prospect to cash solution for Sales</span></span>

<span data-ttu-id="e9bfc-170">Se han agregado nuevos campos a la entidad **Pedido** y se muestran en la página:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-170">New fields have been added to the **Order** entity and appear on the page:</span></span>

- <span data-ttu-id="e9bfc-171">**Se mantiene externamente** – Establezca esta opción en **Sí** cuando el pedido proviene de Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-171">**Is Maintained Externally** – Set this option to **Yes** when the order is coming from Supply Chain Management.</span></span>
- <span data-ttu-id="e9bfc-172">**Estado de procesamiento** – Este campo muestra el estado de procesamiento del pedido en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-172">**Processing status** – This field shows the processing status of the order in Supply Chain Management.</span></span> <span data-ttu-id="e9bfc-173">Los siguientes valores están disponibles:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-173">The following values are available:</span></span>

    - <span data-ttu-id="e9bfc-174">**Borrador** – El estado inicial cuando se crea un pedido en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-174">**Draft** – The initial status when an order is created in Sales.</span></span> <span data-ttu-id="e9bfc-175">En Sales, solo se pueden editar los pedidos con este estado de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-175">In Sales, only orders with this processing status can be edited.</span></span>
    - <span data-ttu-id="e9bfc-176">**Activo** – El estado después de que el pedido se active en Sales mediante el botón **Activar**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-176">**Active** – The status after the order is activated in Sales by using the **Activate** button.</span></span>
    - <span data-ttu-id="e9bfc-177">**Confirmado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-177">**Confirmed**</span></span>
    - <span data-ttu-id="e9bfc-178">**Albarán**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-178">**Packing Slip**</span></span>
    - <span data-ttu-id="e9bfc-179">**Facturado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-179">**Invoiced**</span></span>
    - <span data-ttu-id="e9bfc-180">**Seleccionado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-180">**Picked**</span></span>
    - <span data-ttu-id="e9bfc-181">**Parcialmente seleccionado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-181">**Partially Picked**</span></span>
    - <span data-ttu-id="e9bfc-182">**Parcialmente empaquetado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-182">**Partially Packed**</span></span>
    - <span data-ttu-id="e9bfc-183">**Enviados**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-183">**Shipped**</span></span>
    - <span data-ttu-id="e9bfc-184">**Parcialmente enviado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-184">**Partially Shipped**</span></span>
    - <span data-ttu-id="e9bfc-185">**Parcialmente facturado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-185">**Partially Invoiced**</span></span>
    - <span data-ttu-id="e9bfc-186">**Cancelado**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-186">**Cancelled**</span></span>

<span data-ttu-id="e9bfc-187">El campo **Solo tiene productos mantenidos externamente** se utiliza durante la activación de pedidos para realizar un seguimiento constante si el pedido de ventas se compone por completo de productos mantenidos externamente.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-187">The **Has Externally Maintained Products Only** setting is used during order activation to consistently track whether a sales order consists entirely of externally maintained products.</span></span> <span data-ttu-id="e9bfc-188">Si un pedido de ventas solo contiene productos mantenidos externamente, los productos se mantienen en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-188">If a sales order consists entirely of externally maintained products, the products are maintained in Supply Chain Management.</span></span> <span data-ttu-id="e9bfc-189">Este ajuste ayuda a garantizar que no activa ni intenta sincronizar las líneas de pedido de ventas que tienen productos desconocidos para Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-189">This setting helps guarantee that you don't activate and try to synchronize sales order lines that have products that are unknown to Supply Chain Management.</span></span>

<span data-ttu-id="e9bfc-190">Los botones **Crear factura**, **Cancelar pedido**, **Recalcular**, **Obtener productos** y **Buscar dirección** de la página del **Pedido de ventas** se ocultan para los pedidos mantenidos de forma externa, ya que las facturas se crearán en Supply Chain Management y se sincronizarán en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-190">The **Create Invoice**, **Cancel Order**, **Recalculate**, **Get Products**, and **Lookup Address** buttons on the **Sales order** page are hidden for externally maintained orders, because invoices will be created in Supply Chain Management and synchronized to Sales.</span></span> <span data-ttu-id="e9bfc-191">Estos pedidos no se pueden editar porque la información del pedido de ventas se sincronizará desde Supply Chain Management después de la activación.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-191">These orders can't be edited, because sales order information will be synchronized from Supply Chain Management after activation.</span></span>

<span data-ttu-id="e9bfc-192">El estado del pedido de ventas permanecerá **Activo** para ayudar a garantizar que los cambios de Supply Chain Management se incluyen en el pedido de ventas de Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-192">The sales order status will remain **Active** to help guarantee that changes from Supply Chain Management can flow to the sales order in Sales.</span></span> <span data-ttu-id="e9bfc-193">Para controlar este comportamiento, establezca el valor del **Código de estado \[Status\]** en **Activo** en el proyecto de integración de datos.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-193">To control this behavior, set the default **Statecode \[Status\]** value to **Active** in the Data integration project.</span></span>

## <a name="preconditions-and-mapping-setup"></a><span data-ttu-id="e9bfc-194">Condiciones previas y configuración de asignación</span><span class="sxs-lookup"><span data-stu-id="e9bfc-194">Preconditions and mapping setup</span></span>

<span data-ttu-id="e9bfc-195">Antes de sincronizar pedidos de ventas, es importante actualizar la configuración siguiente en los sistemas:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-195">Before you synchronize sales orders, it's important that you update the following settings in the systems.</span></span>

### <a name="setup-in-sales"></a><span data-ttu-id="e9bfc-196">Configuración en Sales</span><span class="sxs-lookup"><span data-stu-id="e9bfc-196">Setup in Sales</span></span>

- <span data-ttu-id="e9bfc-197">Asegúrese de que los permisos se configuran para el equipo al que está asignado el usuario desde la conexión de Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-197">Make sure that permissions are set up for the team that the user from your Sales connection set is assigned to.</span></span> <span data-ttu-id="e9bfc-198">Si utiliza datos de prueba, el usuario normalmente tiene acceso de administrador, pero no el equipo.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-198">If you're using demo data, the user usually has admin access, but the team doesn't have admin access.</span></span> <span data-ttu-id="e9bfc-199">Si el equipo no tiene derechos de administrador cuando usted ejecuta el proyecto desde la integración de datos, recibirá un mensaje de error que dice que falta el equipo principal.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-199">If the team doesn't have admin access, when you run the project from Data integration, you will receive an error message that states that the Principal team is missing.</span></span>

    <span data-ttu-id="e9bfc-200">Vaya a **Configuración** &gt; **Seguridad** &gt; **Equipos**, seleccione el equipo adecuado, seleccione **Gestionar roles** y seleccione un rol que tenga los permisos deseados, por ejemplo, **Administrador de sistema**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-200">Go to **Settings** &gt; **Security** &gt; **Teams**, select the relevant team, select **Manage Roles**, and select a role that has the desired permissions, such as **System Administrator**.</span></span>

- <span data-ttu-id="e9bfc-201">Para garantizar el cálculo correcto de descuentos en Sales y Supply Chain Management, **Método de cálculo de descuentos** deben establecerse en **Artículo de línea**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-201">To ensure correct calculation of discounts in both Sales and Supply Chain Management **Discount calculation method** must be set to **Line item**.</span></span>
- <span data-ttu-id="e9bfc-202">Vaya a **Configuración** &gt; **Administración** &gt; **Configuración del sistema** &gt; **Sales**, y asegúrese de que se utilicen los valores siguientes:</span><span class="sxs-lookup"><span data-stu-id="e9bfc-202">Go to **Settings** &gt; **Administration** &gt; **System settings** &gt; **Sales**, and make sure that the following settings are used:</span></span>

    - <span data-ttu-id="e9bfc-203">La opción **Usar el sistema de cálculo del sistema de precios** se establece en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-203">The **Use system prizing calculation system** option is set to **Yes**.</span></span>
    - <span data-ttu-id="e9bfc-204">El campo **Método de cálculo de descuentos** se establece en **Artículo de línea**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-204">The **Discount calculation method** field is set to **Line item**.</span></span>

### <a name="setup-in-supply-chain-management"></a><span data-ttu-id="e9bfc-205">Configurar Supply Chain Management</span><span class="sxs-lookup"><span data-stu-id="e9bfc-205">Setup in Supply Chain Management</span></span>

- <span data-ttu-id="e9bfc-206">Vaya a **Ventas y marketing** &gt; **Tareas periódicas** &gt; **Calcular ventas totales**, y configure el trabajo para ejecutar como un trabajo por lotes.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-206">Go to **Sales and marketing** &gt; **Periodic tasks** &gt; **Calculate sales totals**, and set the job to run as a batch job.</span></span> <span data-ttu-id="e9bfc-207">Establezca la opción **Calcular totales para pedidos de ventas** como **Sí**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-207">Set the **Calculate totals for sales orders** option to **Yes**.</span></span> <span data-ttu-id="e9bfc-208">Este paso es importante, porque solo se sincronizan con Sales los pedidos de ventas en los que se calculan las ventas totales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-208">This step is important, because only sales orders where sales totals are calculated will be synchronized to Sales.</span></span> <span data-ttu-id="e9bfc-209">La frecuencia del trabajo por lotes debe coincidir con la frecuencia de la sincronización del pedido de ventas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-209">The frequency of the batch job should be aligned with the frequency of sales order synchronization.</span></span>

<span data-ttu-id="e9bfc-210">Si también usa la integración de pedidos de trabajo, debe configurar el origen de ventas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-210">If you also use work order integration, you need to set up the sales origin.</span></span> <span data-ttu-id="e9bfc-211">El origen de la venta se utiliza para distinguir los pedidos de ventas en Supply Chain Management creados a partir de pedidos de trabajo en Field Service.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-211">The sales origin is used to distinguish sales orders in Supply Chain Management that were created from work orders in Field Service.</span></span> <span data-ttu-id="e9bfc-212">Cuando un pedido de ventas tiene un origen de ventas del tipo **Integración del pedido de trabajo** aparece en la pestaña **Estado del pedido de trabajo externo** en el encabezado del pedido de ventas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-212">When a sales order has a sales origin of the **Work order integration** type, the **External work order status** field appears on the sales order header.</span></span> <span data-ttu-id="e9bfc-213">Además, el origen de la venta garantiza que los pedidos de ventas creados a partir de pedidos de trabajo en Field Service se filtren durante la sincronización del pedido de ventas de Supply Chain Management a Field Service.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-213">Additionally, the sales origin ensures that sales orders that were created from work orders in Field Service are filtered out during sales order synchronization from Supply Chain Management to Field Service.</span></span>

1. <span data-ttu-id="e9bfc-214">Vaya a **Ventas y marketing** \> **Configuración** \> **Pedidos de ventas** \> **Origen de ventas**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-214">Go to **Sales and marketing** \> **Setup** \> **Sales orders** \> **Sales origin**.</span></span>
2. <span data-ttu-id="e9bfc-215">Seleccione **Nuevo** para crear un nuevo origen de ventas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-215">Select **New** to create a new sales origin.</span></span>
3. <span data-ttu-id="e9bfc-216">En el campo **Origen de ventas**, especifique un nombre para el origen de la venta, como **SalesOrder**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-216">In the **Sales origin** field, enter a name for the sales origin, such as **SalesOrder**.</span></span>
4. <span data-ttu-id="e9bfc-217">En el campo **Descripción**, especifique una descripción, como **Pedido de ventas desde ventas**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-217">In the **Description** field, enter a description, such as **Sales Order from Sales**.</span></span>
5. <span data-ttu-id="e9bfc-218">Seleccione la casilla de verificación **Asignación de tipo de origen**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-218">Select the **Origin type assignment** check box.</span></span>
6. <span data-ttu-id="e9bfc-219">Establezca el campo **Tipo de origen de ventas** a **Integración del pedido de ventas**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-219">Set the **Sales origin type** field to **Sales order integration**.</span></span>
7. <span data-ttu-id="e9bfc-220">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-220">Select **Save**.</span></span>

### <a name="setup-in-the-sales-orders-sales-to-supply-chain-management---direct-data-integration-project"></a><span data-ttu-id="e9bfc-221">Configuración en los pedidos de ventas (Sales a Supply Chain Management) - Proyecto de integración de datos directos</span><span class="sxs-lookup"><span data-stu-id="e9bfc-221">Setup in the Sales Orders (Sales to Supply Chain Management) - Direct Data integration project</span></span>

- <span data-ttu-id="e9bfc-222">Asegúrese de que la asignación requerida existe para **Shipto\_country** como **DeliveryAddressCountryRegionISOCode**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-222">Make sure that the required mapping exists for **Shipto\_country** to **DeliveryAddressCountryRegionISOCode**.</span></span> <span data-ttu-id="e9bfc-223">Puede crear en blanco un valor predeterminado en la asignación de valores para evitar tener que escribir el país para los pedidos nacionales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-223">You can make blank a default value in the value map to avoid having to type country for national orders.</span></span> <span data-ttu-id="e9bfc-224">Establezca el lado izquierdo como 'En blanco', y establezca el lado derecho como el país o la región deseada.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-224">Set the left side to 'Blank', and set the right side to the desired country or region.</span></span>

    <span data-ttu-id="e9bfc-225">El valor de plantilla es una asignación de valores en la que se asignan varios países o regiones, y donde 'En blanco' = US.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-225">The template value is a value map where several countries or regions are mapped, and where 'Blank' = US.</span></span>

### <a name="setup-in-the-sales-orders-supply-chain-management-to-sales---direct-data-integration-project"></a><span data-ttu-id="e9bfc-226">Configuración en los pedidos de ventas (Supply Chain Management a Sales) - Proyecto de integración de datos directos</span><span class="sxs-lookup"><span data-stu-id="e9bfc-226">Setup in the Sales Orders (Supply Chain Management to Sales) - Direct Data integration project</span></span>

#### <a name="salesheader-task"></a><span data-ttu-id="e9bfc-227">Tarea de SalesHeader</span><span class="sxs-lookup"><span data-stu-id="e9bfc-227">SalesHeader task</span></span>

- <span data-ttu-id="e9bfc-228">Una lista de precios es necesaria para poder crear pedidos en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-228">A price list is required in order to create orders in Sales.</span></span> <span data-ttu-id="e9bfc-229">Actualice la asignación de valores para **pricelevelid.name \[Nombre de la lista de precios\]** con la lista de precios que se usa en Sales según la divisa.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-229">Update the value map for **pricelevelid.name \[Price List Name\]** to the price list that is used in Sales per currency.</span></span> <span data-ttu-id="e9bfc-230">Puede usar la lista de precios predeterminada para una sola divisa.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-230">You can use the default price list for a single currency.</span></span> <span data-ttu-id="e9bfc-231">Como alternativa, si tiene listas de precios en varias divisas, puede usar una asignación de valores.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-231">Alternatively, if you have price lists in multiple currencies, you can use a value map.</span></span>

    <span data-ttu-id="e9bfc-232">El valor de la plantilla predeterminada de **pricelevelid.name \[Nombre de la lista de precios\]** es **CRM Service USA (ejemplo).**</span><span class="sxs-lookup"><span data-stu-id="e9bfc-232">The default template value for **pricelevelid.name \[Price List Name\]** is **CRM Service USA (sample)**.</span></span>

#### <a name="salesline-task"></a><span data-ttu-id="e9bfc-233">Tarea de SalesLine</span><span class="sxs-lookup"><span data-stu-id="e9bfc-233">SalesLine task</span></span>

- <span data-ttu-id="e9bfc-234">Asegúrese de que existe la asignación de valores requerida para **SalesUnitSymbol** en Supply Chain Management.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-234">Make sure that the required value map for **SalesUnitSymbol** in Supply Chain Management exists.</span></span>
- <span data-ttu-id="e9bfc-235">Asegúrese de que las unidades necesarias están definidas en Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-235">Make sure that the required units are defined in Sales.</span></span>

    <span data-ttu-id="e9bfc-236">Un valor de plantilla que tiene una asignación de valores se define para **SalesUnitSymbol** como **oumid.name**.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-236">A template value that has a value map is defined for **SalesUnitSymbol** to **oumid.name**.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="e9bfc-237">Asignación de la plantilla en la integración de datos</span><span class="sxs-lookup"><span data-stu-id="e9bfc-237">Template mapping in Data integration</span></span>

> [!NOTE]
> <span data-ttu-id="e9bfc-238">Los campos **Condiciones de pago**, **Condiciones de carga**, **Condiciones de entrega**, **Método de envío**, y **Modo de entrega** no forman parte de las asignaciones predeterminadas.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-238">The **Payment terms**, **Freight terms**, **Delivery terms**, **Shipping method**, and **Delivery mode** fields aren't part of the default mappings.</span></span> <span data-ttu-id="e9bfc-239">Para asignar estos campos, debe configurar una asignación de valores que sea específica de los datos en las organizaciones entre las que se sincroniza la entidad.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-239">To map these fields, you must set up a value mapping that is specific to the data in the organizations that the entity is synchronized between.</span></span>

<span data-ttu-id="e9bfc-240">Las siguientes ilustraciones muestran un ejemplo de una asignación de plantilla en la integración de datos.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-240">The following illustrations show an example of a template mapping in Data integration.</span></span>

> [!NOTE]
> <span data-ttu-id="e9bfc-241">La asignación muestra qué información de campos se sincronizará de Sales a Supply Chain Management, o de Supply Chain Management a Sales.</span><span class="sxs-lookup"><span data-stu-id="e9bfc-241">The mapping shows which field information will be synchronized from Sales to Supply Chain Management, or from Supply Chain Management to Sales.</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderheader"></a><span data-ttu-id="e9bfc-242">Pedidos de Sales (Supply Chain Management a Sales) - Directo: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="e9bfc-242">Sales Orders (Supply Chain Management to Sales) - Direct: OrderHeader</span></span>

<span data-ttu-id="e9bfc-243">[![Asignación de la plantilla en la integración de datos](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-243">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-1.png)](./media/sales-order-direct-template-mapping-data-integrator-1.png)</span></span>

### <a name="sales-orders-supply-chain-management-to-sales---direct-orderline"></a><span data-ttu-id="e9bfc-244">Pedidos de Sales (Supply Chain Management a Sales) - Directo: OrderLine</span><span class="sxs-lookup"><span data-stu-id="e9bfc-244">Sales Orders (Supply Chain Management to Sales) - Direct: OrderLine</span></span>

<span data-ttu-id="e9bfc-245">[![Asignación de la plantilla en la integración de datos](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-245">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-2.png)](./media/sales-order-direct-template-mapping-data-integrator-2.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderheader"></a><span data-ttu-id="e9bfc-246">Pedidos de Sales (Sales a Supply Chain Management) - Directo: OrderHeader</span><span class="sxs-lookup"><span data-stu-id="e9bfc-246">Sales Orders (Sales to Supply Chain Management) - Direct: OrderHeader</span></span>

<span data-ttu-id="e9bfc-247">[![Asignación de la plantilla en la integración de datos](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-247">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-3.png)](./media/sales-order-direct-template-mapping-data-integrator-3.png)</span></span>

### <a name="sales-orders-sales-to-supply-chain-management---direct-orderline"></a><span data-ttu-id="e9bfc-248">Pedidos de Sales (Sales Supply Chain Management) - Directo: OrderLine</span><span class="sxs-lookup"><span data-stu-id="e9bfc-248">Sales Orders (Sales to Supply Chain Management) - Direct: OrderLine</span></span>

<span data-ttu-id="e9bfc-249">[![Asignación de la plantilla en la integración de datos](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span><span class="sxs-lookup"><span data-stu-id="e9bfc-249">[![Template mapping in Data integration](./media/sales-order-direct-template-mapping-data-integrator-4.png)](./media/sales-order-direct-template-mapping-data-integrator-4.png)</span></span>

## <a name="related-topics"></a><span data-ttu-id="e9bfc-250">Temas relacionados</span><span class="sxs-lookup"><span data-stu-id="e9bfc-250">Related topics</span></span>

[<span data-ttu-id="e9bfc-251">Prospect to cash</span><span class="sxs-lookup"><span data-stu-id="e9bfc-251">Prospect to cash</span></span>](prospect-to-cash.md)
