---
title: Configurar un inquilino B2C en Commerce
description: En este tema se describe cómo configurar los inquilinos de empresa a consumidor (B2C) de Azure Active Directory (Azure AD) para la autenticación del sitio del usuario en Dynamics 365 Commerce.
author: BrianShook
ms.date: 03/17/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User
ms.reviewer: v-chgri
ms.search.region: Global
ms.search.industry: retail
ms.author: brshoo
ms.search.validFrom: 2020-02-13
ms.dyn365.ops.version: ''
ms.openlocfilehash: f062f40c9eb883d02c4a0ee06c797ed1b0b22665
ms.sourcegitcommit: 3cdc42346bb653c13ab33a7142dbb7969f1f6dda
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/31/2021
ms.locfileid: "5794004"
---
# <a name="set-up-a-b2c-tenant-in-commerce"></a><span data-ttu-id="49c33-103">Configurar un inquilino B2C en Commerce</span><span class="sxs-lookup"><span data-stu-id="49c33-103">Set up a B2C tenant in Commerce</span></span>

[!include [banner](includes/banner.md)]

<span data-ttu-id="49c33-104">En este tema se describe cómo configurar los inquilinos de empresa a consumidor (B2C) de Azure Active Directory (Azure AD) para la autenticación del sitio del usuario en Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-104">This topic describes how to set up your Azure Active Directory (Azure AD) business-to-consumer (B2C) tenants for user site authentication in Dynamics 365 Commerce.</span></span>

<span data-ttu-id="49c33-105">Dynamics 365 Commerce usa Azure AD B2C para admitir credenciales de usuario y flujos de autenticación.</span><span class="sxs-lookup"><span data-stu-id="49c33-105">Dynamics 365 Commerce uses Azure AD B2C to support user credential and authentication flows.</span></span> <span data-ttu-id="49c33-106">Un usuario puede registrarse, iniciar sesión y restablecer su contraseña a través de estos flujos.</span><span class="sxs-lookup"><span data-stu-id="49c33-106">A user can sign up, sign in, and reset their password through these flows.</span></span> <span data-ttu-id="49c33-107">Azure AD B2C almacena información confidencial de autenticación de usuarios, como el nombre de usuario y la contraseña.</span><span class="sxs-lookup"><span data-stu-id="49c33-107">Azure AD B2C stores sensitive user authentication information, such as username and password.</span></span> <span data-ttu-id="49c33-108">El registro de usuario en el inquilino B2C almacenará un registro de cuenta local de B2C o un registro de proveedor de identidad social de B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-108">The user record in the B2C tenant will store either a B2C local account record or a B2C social identity provider record.</span></span> <span data-ttu-id="49c33-109">Estos registros de B2C se vincularán de nuevo con el registro del cliente en el entorno de Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-109">These B2C records will link back to the customer record in the Commerce environment.</span></span>

> [!WARNING] 
> <span data-ttu-id="49c33-110">Azure AD B2C retirará los flujos de usuarios antiguos (heredados) antes del 1 de agosto de 2021.</span><span class="sxs-lookup"><span data-stu-id="49c33-110">Azure AD B2C will retire old (legacy) user flows by August 1, 2021.</span></span> <span data-ttu-id="49c33-111">Por lo tanto, debe planear migrar sus flujos de usuarios a la nueva versión recomendada.</span><span class="sxs-lookup"><span data-stu-id="49c33-111">Therefore, you should plan to migrate your user flows to the new recommended version.</span></span> <span data-ttu-id="49c33-112">La nueva versión proporciona paridad de funciones y nuevas funciones.</span><span class="sxs-lookup"><span data-stu-id="49c33-112">The new version provides feature parity and new features.</span></span> <span data-ttu-id="49c33-113">La biblioteca de módulos para Commerce versión 10.0.15 o superior debe usarse con los flujos de usuarios B2C recomendados.</span><span class="sxs-lookup"><span data-stu-id="49c33-113">The module library for Commerce version 10.0.15 or higher should be used with the recommended B2C user flows.</span></span> <span data-ttu-id="49c33-114">Para obtener más información, vea [Flujos de usuario en Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span><span class="sxs-lookup"><span data-stu-id="49c33-114">For more information, see [User flows in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/user-flow-overview).</span></span>
 
 > [!NOTE]
 > <span data-ttu-id="49c33-115">Los entornos de evaluación de comercio vienen con un inquilino de Azure AD B2C cargado previamente con fines de demostración.</span><span class="sxs-lookup"><span data-stu-id="49c33-115">Commerce evaluation environments come with a pre-loaded Azure AD B2C tenant for demonstration purposes.</span></span> <span data-ttu-id="49c33-116">Cargar su propio inquilino Azure AD B2C con los pasos a continuación no es necesario para entornos de evaluación.</span><span class="sxs-lookup"><span data-stu-id="49c33-116">Loading your own Azure AD B2C tenant using the steps below is not required for evaluation environments.</span></span>

## <a name="create-or-link-to-an-existing-aad-b2c-tenant-in-the-azure-portal"></a><span data-ttu-id="49c33-117">Crear o vincular un inquilino de AAD B2C existente en el portal de Azure</span><span class="sxs-lookup"><span data-stu-id="49c33-117">Create or link to an existing AAD B2C tenant in the Azure portal</span></span>

1. <span data-ttu-id="49c33-118">Inicie sesión en el [portal de Azure](https://portal.azure.com/).</span><span class="sxs-lookup"><span data-stu-id="49c33-118">Sign in to the [Azure portal](https://portal.azure.com/).</span></span>
1. <span data-ttu-id="49c33-119">En el menú del portal de Azure, seleccione **Crear un recurso**.</span><span class="sxs-lookup"><span data-stu-id="49c33-119">From the Azure portal menu, select **Create a resource**.</span></span> <span data-ttu-id="49c33-120">Asegúrese de utilizar la suscripción y el directorio que se conectarán con su entorno de Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-120">Be sure to use the subscription and directory that will be connected with your Commerce environment.</span></span>

    ![Crear un recurso en el portal de Azure](./media/B2CImage_1.png)

1. <span data-ttu-id="49c33-122">Vaya a **Identidad \> Azure Active Directory B2C**.</span><span class="sxs-lookup"><span data-stu-id="49c33-122">Go to **Identity \> Azure Active Directory B2C**.</span></span>
1. <span data-ttu-id="49c33-123">Cuando esté en la página **Crear o vincular un inquilino de AAD B2C existente en el portal de Azure**, utilice de las opciones siguientes la que mejor se adapte a las necesidades de su empresa:</span><span class="sxs-lookup"><span data-stu-id="49c33-123">Once on the **Create New B2C Tenant or Link to existing Tenant** page, use one of the options below that best suits your company's needs:</span></span>

    - <span data-ttu-id="49c33-124">**Crear un nuevo inquilino de Azure AD B2C**: use esta opción para crear un nuevo inquilino de AAD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-124">**Create a new Azure AD B2C Tenant**: Use this option to create a new AAD B2C tenant.</span></span>
        1. <span data-ttu-id="49c33-125">Seleccione **Crear un nuevo inquilino de Azure AD B2C**.</span><span class="sxs-lookup"><span data-stu-id="49c33-125">Select **Create a new Azure AD B2C Tenant**.</span></span>
        1. <span data-ttu-id="49c33-126">En **Nombre de la organización**, escriba el nombre de la organización.</span><span class="sxs-lookup"><span data-stu-id="49c33-126">Under **Organization name**, enter the organization name.</span></span>
        1. <span data-ttu-id="49c33-127">En **Nombre de dominio inicial**, escriba el nombre de dominio inicial.</span><span class="sxs-lookup"><span data-stu-id="49c33-127">Under **Initial domain name**, enter the initial domain name.</span></span>
        1. <span data-ttu-id="49c33-128">En **País o región**, seleccione el país o región.</span><span class="sxs-lookup"><span data-stu-id="49c33-128">For **Country or region**, select the country or region.</span></span>
        1. <span data-ttu-id="49c33-129">Seleccione **Crear** para crear el inquilino.</span><span class="sxs-lookup"><span data-stu-id="49c33-129">Select **Create** to create the tenant.</span></span>

     ![Crear un nuevo inquilino de Azure AD](./media/B2CImage_2.png)

     - <span data-ttu-id="49c33-131">**Vincular un inquilino de Azure AD B2C existente a mi suscripción de Azure**: use esta opción si ya tiene un inquilino de Azure AD B2C al que desee vincularse.</span><span class="sxs-lookup"><span data-stu-id="49c33-131">**Link an existing Azure AD B2C Tenant to my Azure subscription**: Use this option if you already have an Azure AD B2C tenant you want to link to.</span></span>
        1. <span data-ttu-id="49c33-132">Seleccione **Vincular un inquilino de Azure AD B2C existente a mi suscripción de Azure**.</span><span class="sxs-lookup"><span data-stu-id="49c33-132">Select **Link an existing Azure AD B2C Tenant to my Azure subscription**.</span></span>
        1. <span data-ttu-id="49c33-133">Para **Inquilino de Azure AD B2C**, seleccione el inquilino de B2C apropiado.</span><span class="sxs-lookup"><span data-stu-id="49c33-133">For **Azure AD B2C Tenant**, select the appropriate B2C tenant.</span></span> <span data-ttu-id="49c33-134">Si aparece el mensaje "No se encontraron inquilinos B2C válidos" en el cuadro de selección, significa que no tiene ningún inquilino de B2C válido, por lo que deberá crear uno nuevo.</span><span class="sxs-lookup"><span data-stu-id="49c33-134">If the message "No eligible B2C Tenants found" appears in the selection box, you do not have an existing eligible B2C tenant and will need to create a new one.</span></span>
        1. <span data-ttu-id="49c33-135">Para **Grupo de recursos**, seleccione **Crear nuevo**.</span><span class="sxs-lookup"><span data-stu-id="49c33-135">For **Resource group**, select **Create new**.</span></span> <span data-ttu-id="49c33-136">Introduzca un **Nombre** para el grupo de recursos que contendrá el inquilino, seleccione **Ubicación del grupo de recursos** y, a continuación, seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="49c33-136">Enter a **Name** for the resource group that will contain the tenant, select the **Resource group location**, and then select **Create**.</span></span>

    ![Vincular un inquilino de Azure AD B2C existente a la suscripción de Azure](./media/B2CImage_3.png)

1. <span data-ttu-id="49c33-138">Una vez creado el nuevo directorio de Azure AD B2C (puede tardar unos minutos), aparecerá un vínculo al nuevo directorio en el panel de información.</span><span class="sxs-lookup"><span data-stu-id="49c33-138">Once the new Azure AD B2C directory is created (this may take a few moments), a link to the new directory will appear on the dashboard.</span></span> <span data-ttu-id="49c33-139">Este vínculo le dirigirá a la página "Esto es Azure Active Directory B2C".</span><span class="sxs-lookup"><span data-stu-id="49c33-139">This link will direct you to the "Welcome to Azure Active Directory B2C" page.</span></span>

    ![Vínculo al nuevo directorio de AAD](./media/B2CImage_4.png)

> [!NOTE]
> <span data-ttu-id="49c33-141">Si tiene varias suscripciones en su cuenta de Azure o ha configurado el inquilino de B2C sin vincularlo a una suscripción activa, un encabezado **Solución de problemas** le dirigirá en el proceso de vincular el inquilino a una suscripción.</span><span class="sxs-lookup"><span data-stu-id="49c33-141">If you have multiple subscriptions within your Azure account or have set up the B2C tenant without linking to an active subscription, a **Troubleshoot** banner will direct you to link the tenant to a subscription.</span></span> <span data-ttu-id="49c33-142">Seleccione el mensaje de solución de problemas y siga las instrucciones para resolver el problema de suscripción.</span><span class="sxs-lookup"><span data-stu-id="49c33-142">Select the troubleshooting message and follow the instructions to resolve the subscription issue.</span></span>

<span data-ttu-id="49c33-143">La siguiente imagen muestra un ejemplo de encabezado **Solución de problemas** de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-143">The following image shows an example of an Azure AD B2C **Troubleshoot** banner.</span></span>

![Advertencia que indica que el directorio no tiene una suscripción activa](./media/B2CImage_5.png)

## <a name="create-the-b2c-application"></a><span data-ttu-id="49c33-145">Crear la aplicación B2C</span><span class="sxs-lookup"><span data-stu-id="49c33-145">Create the B2C application</span></span>

<span data-ttu-id="49c33-146">Cuando se haya creado el inquilino de B2C, usted puede crear una aplicación B2C en su nuevo inquilino de Azure AD B2C para interactuar con Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-146">Once the B2C tenant has been created, you will create a B2C application within your new Azure AD B2C tenant to interact with Commerce.</span></span>

<span data-ttu-id="49c33-147">Para crear la aplicación B2C, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-147">To create the B2C application, follow these steps.</span></span>

1. <span data-ttu-id="49c33-148">En Azure Portal, seleccione **Registros de aplicaciones** y luego seleccione **Nuevo registro**.</span><span class="sxs-lookup"><span data-stu-id="49c33-148">In the Azure portal, select **App registrations**, and then select **New registration**.</span></span>
1. <span data-ttu-id="49c33-149">En **Nombre**, introduzca el nombre para darle a esta aplicación Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-149">Under **Name**, enter the name to give this Azure AD B2C application.</span></span>
1. <span data-ttu-id="49c33-150">En **Tipos de cuenta admitidos**, seleccione **Cuentas en cualquier proveedor de identidad o directorio organizacional (para autenticar usuarios con flujos de usuarios)**.</span><span class="sxs-lookup"><span data-stu-id="49c33-150">Under **Supported account types**, select **Accounts in any identity provider or organizational directory (for authenticating users with user flows)**.</span></span>
1. <span data-ttu-id="49c33-151">Para **Redirigir URI**, introduzca sus URL de respuesta dedicadas como tipo **Web**.</span><span class="sxs-lookup"><span data-stu-id="49c33-151">For **Redirect URI**, enter your dedicated reply URLs as type **Web**.</span></span> <span data-ttu-id="49c33-152">Para obtener información sobre las URL de respuesta y qué formato aplicarles, consulte [Direcciones URL de respuesta](#reply-urls) a continuación.</span><span class="sxs-lookup"><span data-stu-id="49c33-152">For information on reply URLs and how to format them, see [Reply URLs](#reply-urls) below.</span></span>
1. <span data-ttu-id="49c33-153">Para **Permisos**, seleccione **Otorgar consentimiento del administrador a los permisos openid y offline_access**.</span><span class="sxs-lookup"><span data-stu-id="49c33-153">For **Permissions**, select **Grant admin consent to openid and offline_access permissions**.</span></span>
1. <span data-ttu-id="49c33-154">Seleccione **Registrar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-154">Select **Register**.</span></span>
1. <span data-ttu-id="49c33-155">Seleccione la aplicación recién creada y navegue hasta el menú **Autenticación**.</span><span class="sxs-lookup"><span data-stu-id="49c33-155">Select the newly-created application and navigate to the **Authentication** menu.</span></span> <span data-ttu-id="49c33-156">Aquí puede agregar más **Redirigir URI** si es necesario (ahora o más tarde).</span><span class="sxs-lookup"><span data-stu-id="49c33-156">Here you can add additional **Redirect URIs** if needed (now or later).</span></span> <span data-ttu-id="49c33-157">Continúe con el siguiente paso si no lo necesita actualmente.</span><span class="sxs-lookup"><span data-stu-id="49c33-157">Continue to the next step if not currently needed.</span></span>
1. <span data-ttu-id="49c33-158">En **Concesión implícita**, seleccione **Tokens de acceso** y **Tokens de identificación** para habilitarlos para la aplicación.</span><span class="sxs-lookup"><span data-stu-id="49c33-158">Under **Implicit grant**, select both **Access tokens** and **ID tokens** to enable them for the application.</span></span> <span data-ttu-id="49c33-159">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-159">Select **Save**.</span></span>
1. <span data-ttu-id="49c33-160">Vaya al menú **Visión general** menú de Azure Portal y copie el **ID de aplicación (cliente)**.</span><span class="sxs-lookup"><span data-stu-id="49c33-160">Go to the **Overview** menu of the Azure portal and copy the **Application (client) ID**.</span></span> <span data-ttu-id="49c33-161">Anote esta ID para los pasos de configuración posteriores (a la que se hace referencia más adelante como **GUID del cliente**).</span><span class="sxs-lookup"><span data-stu-id="49c33-161">Note this ID for later setup steps (referenced later as the **Client GUID**).</span></span>

<span data-ttu-id="49c33-162">Para obtener más información sobre los registros de aplicaciones en Azure AD B2C, consulte [La nueva experiencia de registro de aplicaciones para Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span><span class="sxs-lookup"><span data-stu-id="49c33-162">For additional reference on App Registrations in Azure AD B2C, please see [The new App registrations experience for Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/app-registrations-training-guide)</span></span>

### <a name="reply-urls"></a><span data-ttu-id="49c33-163">Direcciones URL de respuesta</span><span class="sxs-lookup"><span data-stu-id="49c33-163">Reply URLs</span></span>

<span data-ttu-id="49c33-164">Las direcciones URL de respuesta son importantes, ya que ofrecen una lista blanca de los dominios de retorno cuando su sitio llama a Azure AD B2C para autenticar a un usuario.</span><span class="sxs-lookup"><span data-stu-id="49c33-164">Reply URLs are important as they provide an allow list of the return domains when your site calls Azure AD B2C to authenticate a user.</span></span> <span data-ttu-id="49c33-165">Esto posibilita que el usuario autenticado regrese al dominio desde el que inició sesión (el dominio de su sitio).</span><span class="sxs-lookup"><span data-stu-id="49c33-165">This permits the return of the authenticated user back to the domain from which they are signing into (your site domain).</span></span> 

<span data-ttu-id="49c33-166">En el cuadro **Dirección URL de respuesta** de la pantalla **Azure AD B2C - Aplicaciones \> Nueva aplicación** debe agregar líneas independientes para el dominio de su sitio y (una vez que se haya aprovisionado el entorno) la dirección URL generada por Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-166">In the **Reply URL** box on the **Azure AD B2c - Applications \> New application** screen, you need to add separate lines for both your site domain and (once your environment is provisioned) the Commerce-generated URL.</span></span> <span data-ttu-id="49c33-167">Estas direcciones URL siempre deben usar un formato de URL válido y deben ser direcciones URL base únicamente (sin barras diagonales ni rutas).</span><span class="sxs-lookup"><span data-stu-id="49c33-167">These URLs must always use a valid URL format and must be base URLs only (no trailing forward slashes or paths).</span></span> <span data-ttu-id="49c33-168">Hay que agregar a las direcciones URL base la cadena ``/_msdyn365/authresp``, como en los siguientes ejemplos.</span><span class="sxs-lookup"><span data-stu-id="49c33-168">The string ``/_msdyn365/authresp`` then needs to be appended to the base URLs, as in the following examples.</span></span>

- <span data-ttu-id="49c33-169">``https://www.fabrikam.com/_msdyn365/authresp`` (El dominio debe coincidir completamente con el dominio de comercio electrónico.</span><span class="sxs-lookup"><span data-stu-id="49c33-169">``https://www.fabrikam.com/_msdyn365/authresp`` (The domain should match the e-commerce domain completely.</span></span> <span data-ttu-id="49c33-170">Si tiene varios dominios, debe agregar esta URL para cada dominio.)</span><span class="sxs-lookup"><span data-stu-id="49c33-170">If you have multiple domains, you need to add this URL for each domain.)</span></span>
- ``https://fabrikam-prod.commerce.dynamics.com/_msdyn365/authresp``

## <a name="create-user-flow-policies"></a><span data-ttu-id="49c33-171">Crear directivas de flujo de usuario</span><span class="sxs-lookup"><span data-stu-id="49c33-171">Create user flow policies</span></span>

<span data-ttu-id="49c33-172">Los flujos de usuario son las directivas que Azure AD B2C utiliza para proporcionar experiencias de usuario de inicio de sesión seguro, registro, edición de perfil y restablecimiento de contraseña.</span><span class="sxs-lookup"><span data-stu-id="49c33-172">User flows are the policies Azure AD B2C uses to provide secure sign in, sign up, edit profile, and forget password user experiences.</span></span> <span data-ttu-id="49c33-173">Dynamics 365 Commerce utiliza estos flujos para realizar las acciones de directiva a fin de interactuar con el inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-173">Dynamics 365 Commerce uses these flows to perform the policy actions to interact with the Azure AD B2C tenant.</span></span> <span data-ttu-id="49c33-174">Cuando un usuario interactúa con estas directivas, se redirigen al inquilino de Azure AD B2C para realizar las acciones.</span><span class="sxs-lookup"><span data-stu-id="49c33-174">When a user interacts with these policies, they are redirected to the Azure AD B2C tenant to perform the actions.</span></span>

<span data-ttu-id="49c33-175">Azure AD B2C proporciona tres tipos básicos de flujo de usuario:</span><span class="sxs-lookup"><span data-stu-id="49c33-175">Azure AD B2C provides three basic user flow types:</span></span>
- <span data-ttu-id="49c33-176">Registro e inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="49c33-176">Sign up and sign in</span></span>
- <span data-ttu-id="49c33-177">Edición de perfil</span><span class="sxs-lookup"><span data-stu-id="49c33-177">Profile editing</span></span>
- <span data-ttu-id="49c33-178">Contraseña restablecida</span><span class="sxs-lookup"><span data-stu-id="49c33-178">Password reset</span></span>

<span data-ttu-id="49c33-179">Puede optar por usar los flujos de usuario predeterminados proporcionados por Azure AD, que mostrarán una página hospedad en AAD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-179">You can choose to use the default user flows provided by Azure AD, which will display a page hosted by AAD B2C.</span></span> <span data-ttu-id="49c33-180">Como alternativa, puede crear una página HTML para controlar la apariencia de estas experiencias de flujo de usuario.</span><span class="sxs-lookup"><span data-stu-id="49c33-180">Alternately, you can create an HTML page to control the look and feel of these user flow experiences.</span></span> 

<span data-ttu-id="49c33-181">Para personalizar las páginas de directiva de usuario con páginas incluidas en Dynamics 365 Commerce, consulte [Configurar páginas personalizadas para inicios de sesión de usuario](custom-pages-user-logins.md).</span><span class="sxs-lookup"><span data-stu-id="49c33-181">To customize the user policy pages with pages built in Dynamics 365 Commerce, see [Set up custom pages for user logins](custom-pages-user-logins.md).</span></span> <span data-ttu-id="49c33-182">Para obtener información adicional, consulte [Personalizar las experiencias de interfaz de usuario en Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span><span class="sxs-lookup"><span data-stu-id="49c33-182">For additional information, see [Customize the interface of user experiences in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/tutorial-customize-ui).</span></span>

### <a name="create-a-sign-up-and-sign-in-user-flow-policy"></a><span data-ttu-id="49c33-183">Crear una directiva de flujo de usuario registro e inicio de sesión</span><span class="sxs-lookup"><span data-stu-id="49c33-183">Create a sign up and sign in user flow policy</span></span>

<span data-ttu-id="49c33-184">Para crear una directiva de flujo de usuario de registro e inicio de sesión, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-184">To create a sign up and sign in user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="49c33-185">En el portal de Azure, seleccione **Flujos de usuario (directivas)** en el panel de navegación izquierdo.</span><span class="sxs-lookup"><span data-stu-id="49c33-185">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="49c33-186">En la página **Azure AD B2C - Flujos de usuarios (directivas)**, seleccione **Nuevo flujo de usuario**.</span><span class="sxs-lookup"><span data-stu-id="49c33-186">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="49c33-187">Seleccione la directiva **Registro e iniciar sesión** y después seleccione la versión **Recomendada**.</span><span class="sxs-lookup"><span data-stu-id="49c33-187">Select the **Sign up and sign in** policy, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="49c33-188">En **Nombre**, escriba un nombre de directiva.</span><span class="sxs-lookup"><span data-stu-id="49c33-188">Under **Name**, enter a policy name.</span></span> <span data-ttu-id="49c33-189">Este nombre se mostrará posteriormente con un prefijo asignado por el portal (por ejemplo, "B2C_1_").</span><span class="sxs-lookup"><span data-stu-id="49c33-189">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="49c33-190">En **Proveedores de identidad**, active la casilla de verificación correspondiente.</span><span class="sxs-lookup"><span data-stu-id="49c33-190">Under **Identity providers**, select the appropriate check box.</span></span>
1. <span data-ttu-id="49c33-191">En **Autenticación multifactor**, seleccione la opción adecuada para su empresa.</span><span class="sxs-lookup"><span data-stu-id="49c33-191">Under **Multifactor Authentication**, select the appropriate choice for your company.</span></span> 
1. <span data-ttu-id="49c33-192">En **Atributos y devoluciones de usuario**, seleccione opciones para recopilar atributos o notificaciones de devolución, según corresponda.</span><span class="sxs-lookup"><span data-stu-id="49c33-192">Under **User attributes and claims**, select options to collect attributes or return claims as appropriate.</span></span> <span data-ttu-id="49c33-193">Commerce requiere las siguientes opciones predeterminadas:</span><span class="sxs-lookup"><span data-stu-id="49c33-193">Commerce requires the following default options:</span></span>

    | <span data-ttu-id="49c33-194">**Recopilar atributo**</span><span class="sxs-lookup"><span data-stu-id="49c33-194">**Collect  attribute**</span></span> | <span data-ttu-id="49c33-195">**Notificación de devolución**</span><span class="sxs-lookup"><span data-stu-id="49c33-195">**Return  claim**</span></span> |
    | ---------------------- | ----------------- |
    | <span data-ttu-id="49c33-196">Dirección de correo electrónico</span><span class="sxs-lookup"><span data-stu-id="49c33-196">Email Address</span></span>          | <span data-ttu-id="49c33-197">Direcciones de correo electrónico</span><span class="sxs-lookup"><span data-stu-id="49c33-197">Email Addresses</span></span>   |
    | <span data-ttu-id="49c33-198">Nombre propio</span><span class="sxs-lookup"><span data-stu-id="49c33-198">Given Name</span></span>             | <span data-ttu-id="49c33-199">Nombre propio</span><span class="sxs-lookup"><span data-stu-id="49c33-199">Given Name</span></span>        |
    |                        | <span data-ttu-id="49c33-200">Proveedor de identidades</span><span class="sxs-lookup"><span data-stu-id="49c33-200">Identity Provider</span></span> |
    | <span data-ttu-id="49c33-201">Apellido</span><span class="sxs-lookup"><span data-stu-id="49c33-201">Surname</span></span>                | <span data-ttu-id="49c33-202">Apellido</span><span class="sxs-lookup"><span data-stu-id="49c33-202">Surname</span></span>           |
    |                        | <span data-ttu-id="49c33-203">ID de objeto del usuario</span><span class="sxs-lookup"><span data-stu-id="49c33-203">User’s Object ID</span></span>  |

1. <span data-ttu-id="49c33-204">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="49c33-204">Select **Create**.</span></span>

<span data-ttu-id="49c33-205">La siguiente imagen es un ejemplo de flujo de usuario de registro e inicio de sesión de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-205">The following image is an example of the Azure AD B2C sign up and sign in user flow.</span></span>

![Configuración de la directiva de registro e inicio de sesión](./media/B2CImage_11.png)

<span data-ttu-id="49c33-207">La siguiente imagen muestra la opción **Ejecutar flujo de usuario** en el flujo de usuario de registro e inicio de sesión de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-207">The following image shows the **Run user flow** option in the Azure AD B2C sign up and sign in user flow.</span></span>

![Opción Ejecutar flujo de usuario en flujo de directiva](./media/B2CImage_23.png)
   
### <a name="create-a-profile-editing-user-flow-policy"></a><span data-ttu-id="49c33-209">Crear una directiva de flujo de usuario de edición de perfil</span><span class="sxs-lookup"><span data-stu-id="49c33-209">Create a profile editing user flow policy</span></span>

<span data-ttu-id="49c33-210">Para crear una directiva de flujo de usuario de edición de perfil, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-210">To create a profile editing user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="49c33-211">En el portal de Azure, seleccione **Flujos de usuario (directivas)** en el panel de navegación izquierdo.</span><span class="sxs-lookup"><span data-stu-id="49c33-211">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="49c33-212">En la página **Azure AD B2C - Flujos de usuarios (directivas)**, seleccione **Nuevo flujo de usuario**.</span><span class="sxs-lookup"><span data-stu-id="49c33-212">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="49c33-213">Seleccione **Edición de perfil** y luego seleccione la versión **Recomendado**.</span><span class="sxs-lookup"><span data-stu-id="49c33-213">Select **Profile editing**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="49c33-214">En **Nombre**, introduzca el flujo de usuario de edición de perfil.</span><span class="sxs-lookup"><span data-stu-id="49c33-214">Under **Name**, enter the profile editing user flow.</span></span> <span data-ttu-id="49c33-215">Este nombre se mostrará posteriormente con un prefijo asignado por el portal (por ejemplo, "B2C_1_").</span><span class="sxs-lookup"><span data-stu-id="49c33-215">This name will display afterwards with a prefix the portal assigns (for example, "B2C_1_").</span></span>
1. <span data-ttu-id="49c33-216">En **Proveedores de identidad**, seleccione **Inicio de sesión de correo**.</span><span class="sxs-lookup"><span data-stu-id="49c33-216">Under **Identity providers**, select **Email SignIn**.</span></span>
1. <span data-ttu-id="49c33-217">En **Atributos de usuario**, active las siguientes casillas:</span><span class="sxs-lookup"><span data-stu-id="49c33-217">Under **User attributes**, select the following check boxes:</span></span>
    - <span data-ttu-id="49c33-218">**Direcciones de correo electrónico** (**Notificación de devolución** únicamente)</span><span class="sxs-lookup"><span data-stu-id="49c33-218">**Email Addresses** (**Return claim** only)</span></span>
    - <span data-ttu-id="49c33-219">**Nombre propio** (**Recopilar atributo** y **Notificación de devolución**)</span><span class="sxs-lookup"><span data-stu-id="49c33-219">**Given Name** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="49c33-220">**Proveedor de identidad** (**Notificación de devolución** únicamente)</span><span class="sxs-lookup"><span data-stu-id="49c33-220">**Identity Provider** (**Return claim** only)</span></span>
    - <span data-ttu-id="49c33-221">**Apellido** (**Recopilar atributo** y **Notificación de devolución**)</span><span class="sxs-lookup"><span data-stu-id="49c33-221">**Surname** (**Collect attribute** and **Return claim**)</span></span>
    - <span data-ttu-id="49c33-222">**ID de objeto del usuario** (**Notificación de devolución** únicamente)</span><span class="sxs-lookup"><span data-stu-id="49c33-222">**User's Object ID** (**Return claim** only)</span></span>
1. <span data-ttu-id="49c33-223">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="49c33-223">Select **Create**.</span></span>

<span data-ttu-id="49c33-224">La siguiente imagen muestra un ejemplo de flujo de usuario de edición de perfil de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-224">The following image shows an example of the Azure AD B2C profile editing user flow.</span></span>

![Crear el flujo de usuario de edición de perfil](./media/B2CImage_12.png)

### <a name="create-a-password-reset-user-flow-policy"></a><span data-ttu-id="49c33-226">Crear una directiva de flujo de usuario de restablecimiento de contraseña</span><span class="sxs-lookup"><span data-stu-id="49c33-226">Create a password reset user flow policy</span></span>

<span data-ttu-id="49c33-227">Para crear una directiva de flujo de usuario de restablecimiento de contraseña, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-227">To create a password reset user flow policy, follow these steps.</span></span>

1. <span data-ttu-id="49c33-228">En el portal de Azure, seleccione **Flujos de usuario (directivas)** en el panel de navegación izquierdo.</span><span class="sxs-lookup"><span data-stu-id="49c33-228">In the Azure portal, select **User flows (policies)** in the left navigation pane.</span></span>
1. <span data-ttu-id="49c33-229">En la página **Azure AD B2C - Flujos de usuarios (directivas)**, seleccione **Nuevo flujo de usuario**.</span><span class="sxs-lookup"><span data-stu-id="49c33-229">On the **Azure AD B2C – User flows (policies)** page, select **New User Flow**.</span></span>
1. <span data-ttu-id="49c33-230">Seleccione **Restablecer contraseña** y luego seleccione la versión **Recomendado**.</span><span class="sxs-lookup"><span data-stu-id="49c33-230">Select **Password Reset**, and then select the **Recommended** version.</span></span>
1. <span data-ttu-id="49c33-231">En **Nombre**, introduzca un nombre para el flujo de usuario de restablecimiento de contraseña.</span><span class="sxs-lookup"><span data-stu-id="49c33-231">Under **Name**, enter a name for the password reset user flow.</span></span>
1. <span data-ttu-id="49c33-232">En **Proveedores de identidad**, seleccione **Restablecer contraseña con dirección de correo electrónico**.</span><span class="sxs-lookup"><span data-stu-id="49c33-232">Under **Identity providers**, select **Reset password using email address**.</span></span>
1. <span data-ttu-id="49c33-233">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="49c33-233">Select **Create**.</span></span>
1. <span data-ttu-id="49c33-234">En **Notificaciones de aplicación**, active las siguientes casillas:</span><span class="sxs-lookup"><span data-stu-id="49c33-234">Under **Application claims**, select the following check boxes:</span></span>
    - <span data-ttu-id="49c33-235">**Direcciones de correo electrónico**</span><span class="sxs-lookup"><span data-stu-id="49c33-235">**Email addresses**</span></span>
    - <span data-ttu-id="49c33-236">**Nombre propio**</span><span class="sxs-lookup"><span data-stu-id="49c33-236">**Given Name**</span></span>
    - <span data-ttu-id="49c33-237">**Apellido**</span><span class="sxs-lookup"><span data-stu-id="49c33-237">**Surname**</span></span>
    - <span data-ttu-id="49c33-238">**ID de objeto del usuario**</span><span class="sxs-lookup"><span data-stu-id="49c33-238">**User's Object ID**</span></span>
1. <span data-ttu-id="49c33-239">Seleccione **Crear**.</span><span class="sxs-lookup"><span data-stu-id="49c33-239">Select **Create**.</span></span>

<span data-ttu-id="49c33-240">La siguiente imagen muestra dónde se establece **Restablecer contraseña con dirección de correo electrónico** en el flujo de usuario de restablecimiento de contraseña de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-240">The following image shows where to set **Reset Password using mail address** in the Azure AD B2C password reset user flow.</span></span>

![Establezca "Restablecer contraseña con dirección de correo electrónico" en la directiva de restablecimiento de contraseña](./media/B2CImage_13.png)

## <a name="add-social-identity-providers-optional"></a><span data-ttu-id="49c33-242">Agregar proveedores de identidad social (opcional)</span><span class="sxs-lookup"><span data-stu-id="49c33-242">Add social identity providers (Optional)</span></span>

<span data-ttu-id="49c33-243">Los proveedores de identidad social permiten a los usuarios usar sus cuentas sociales para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="49c33-243">Social identity providers allow users to use their social accounts for authentication.</span></span> <span data-ttu-id="49c33-244">La adición de autenticación de proveedor de identidad social es opcional en Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-244">Adding social identity provider authentication is optional in Dynamics 365 Commerce.</span></span> 

<span data-ttu-id="49c33-245">Si no se agrega la autenticación de proveedor de identidad social, los perfiles predeterminados de Azure AD B2C serán los perfiles principales para su base de usuarios.</span><span class="sxs-lookup"><span data-stu-id="49c33-245">If social identity provider authentication is not added, the default Azure AD B2C profiles will be the main profiles for your user base.</span></span> <span data-ttu-id="49c33-246">Los usuarios seleccionarán su propio nombre de usuario (su dirección de correo electrónico preferida) y establecerán una contraseña.</span><span class="sxs-lookup"><span data-stu-id="49c33-246">Users will select their own username (their preferred email address) and set a password.</span></span> <span data-ttu-id="49c33-247">Azure AD B2C autenticará a los usuarios directamente.</span><span class="sxs-lookup"><span data-stu-id="49c33-247">Azure AD B2C will authenticate users directly.</span></span> 

<span data-ttu-id="49c33-248">Si se agrega la autenticación de proveedor de identidad social y un usuario elige uno de los proveedores de identidad social ofrecidos, se sigue creando una entidad en el inquilino de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-248">If social identity provider authentication is added and a user chooses one of the social identity providers offered, an entity is still created in the Azure AD B2C tenant.</span></span> <span data-ttu-id="49c33-249">Azure AD B2C autenticará las credenciales del usuario con el proveedor de identidad social.</span><span class="sxs-lookup"><span data-stu-id="49c33-249">Azure AD B2C will then authenticate the user's credentials with the social identity provider.</span></span>

> [!NOTE]
> <span data-ttu-id="49c33-250">El inicio de sesión del proveedor de identidad crea un registro en el inquilino de B2C, pero con un formato diferente al de las cuentas locales, ya que llamará a la referencia del proveedor de identidad social externo para la autenticación.</span><span class="sxs-lookup"><span data-stu-id="49c33-250">The identity provider sign in creates a record in the B2C tenant, but in a different format than local accounts since it will call the external social identity provider reference for authentication.</span></span> <span data-ttu-id="49c33-251">El usuario puede usar la misma dirección de correo electrónico en todos los proveedores de identidad social, lo que significa que el nombre de usuario del correo electrónico utilizado para la autenticación puede no ser exclusivo del inquilino.</span><span class="sxs-lookup"><span data-stu-id="49c33-251">The user can use the same email address across social identity providers, meaning that the email username used for authentication may not be unique to the tenant.</span></span> <span data-ttu-id="49c33-252">Azure AD B2C solo exigirá que los usuarios tengan una dirección de correo electrónico única en las cuentas locales de B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-252">Azure AD B2C will only enforce that users have a unique email address on local B2C accounts.</span></span>

<span data-ttu-id="49c33-253">Antes de poder agregar un proveedor de identidad social para la autenticación, debe ir al portal del proveedor de identidad y configurar una aplicación de proveedor de identidad como se indica en la documentación de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-253">Before you can add a social identity provider for authentication, you must go to the identity provider's portal and set up an identity provider application as instructed in the Azure AD B2C documentation.</span></span> <span data-ttu-id="49c33-254">A continuación se proporciona una lista de vínculos a la documentación.</span><span class="sxs-lookup"><span data-stu-id="49c33-254">A list of links to the documentation is provided below.</span></span>

- [<span data-ttu-id="49c33-255">Amazon</span><span class="sxs-lookup"><span data-stu-id="49c33-255">Amazon</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-amzn-app)
- [<span data-ttu-id="49c33-256">Azure AD (Inquilino único)</span><span class="sxs-lookup"><span data-stu-id="49c33-256">Azure AD (Single Tenant)</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-azure-active-directory)
- [<span data-ttu-id="49c33-257">Cuenta Microsoft</span><span class="sxs-lookup"><span data-stu-id="49c33-257">Microsoft Account</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-msa-app)
- [<span data-ttu-id="49c33-258">Facebook</span><span class="sxs-lookup"><span data-stu-id="49c33-258">Facebook</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-fb-app)
- [<span data-ttu-id="49c33-259">GitHub</span><span class="sxs-lookup"><span data-stu-id="49c33-259">GitHub</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-github-app)
- [<span data-ttu-id="49c33-260">Google</span><span class="sxs-lookup"><span data-stu-id="49c33-260">Google</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-goog-app)
- [<span data-ttu-id="49c33-261">LinkedIn</span><span class="sxs-lookup"><span data-stu-id="49c33-261">LinkedIn</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-li-app)
- [<span data-ttu-id="49c33-262">OpenID Connect</span><span class="sxs-lookup"><span data-stu-id="49c33-262">OpenID Connect</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-oidc-idp)
- [<span data-ttu-id="49c33-263">Twitter</span><span class="sxs-lookup"><span data-stu-id="49c33-263">Twitter</span></span>](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-setup-twitter-app)

### <a name="add-and-set-up-a-social-identity-provider"></a><span data-ttu-id="49c33-264">Agregar y configurar un proveedor de identidad social</span><span class="sxs-lookup"><span data-stu-id="49c33-264">Add and set up a social identity provider</span></span>

<span data-ttu-id="49c33-265">Para agregar y configurar un proveedor de identidad social, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-265">To add and set up a social identity provider, follow these steps.</span></span>  

1. <span data-ttu-id="49c33-266">En el portal de Azure, vaya a **Proveedores de identidad**.</span><span class="sxs-lookup"><span data-stu-id="49c33-266">In the Azure portal, navigate to **Identity Providers**.</span></span>
1. <span data-ttu-id="49c33-267">Seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-267">Select **Add**.</span></span> <span data-ttu-id="49c33-268">Aparece la pantalla **Agregar proveedor de identidad**.</span><span class="sxs-lookup"><span data-stu-id="49c33-268">The **Add identity provider** screen appears.</span></span>
1. <span data-ttu-id="49c33-269">En **Nombre**, introduzca el nombre que se mostrará a los usuarios en la pantalla de inicio de sesión.</span><span class="sxs-lookup"><span data-stu-id="49c33-269">Under **Name**, enter the name to be displayed to users on your sign in screen.</span></span>
1. <span data-ttu-id="49c33-270">En **Tipo de proveedor de identidad**, seleccione un proveedor de identidad de la lista.</span><span class="sxs-lookup"><span data-stu-id="49c33-270">Under **Identity provider type**, select an identity provider from the list.</span></span>
1. <span data-ttu-id="49c33-271">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-271">Select **OK**.</span></span>
1. <span data-ttu-id="49c33-272">Seleccione **Configurar este proveedor de identidad** para acceder a la pantalla **Configurar el proveedor de identidad social**.</span><span class="sxs-lookup"><span data-stu-id="49c33-272">Select **Set up this identity provider** to access the **Set up the social identity provider** screen.</span></span>
1. <span data-ttu-id="49c33-273">En **Id. de cliente**, introduzca el identificador de cliente que se obtuvo de la configuración de la aplicación de proveedor de identidad.</span><span class="sxs-lookup"><span data-stu-id="49c33-273">Under **Client ID**, enter the client ID as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="49c33-274">En **Secreto de cliente**, introduzca el secreto que se obtuvo de la configuración de la aplicación de proveedor de identidad.</span><span class="sxs-lookup"><span data-stu-id="49c33-274">Under **Client secret**, enter the client secret as obtained from the identity provider application setup.</span></span>
1. <span data-ttu-id="49c33-275">Adjunte el flujo de usuario para las directivas de inicio de sesión:</span><span class="sxs-lookup"><span data-stu-id="49c33-275">Attach user flow for sign in sign up policies:</span></span>
1. <span data-ttu-id="49c33-276">Vaya a **Azure AD B2C - Flujos de usuarios (directivas) \> {su directiva de inicio de sesión} \> Proveedores de identidad**.</span><span class="sxs-lookup"><span data-stu-id="49c33-276">Go to **Azure AD B2C – User flows (policies) \> {your sign-in sign-up policy} \> Identity providers**.</span></span>
1. <span data-ttu-id="49c33-277">Para adjuntar la directiva de flujo de usuario de registro e inicio de sesión, seleccione cada proveedor de identidad que haya configurado para su cuenta.</span><span class="sxs-lookup"><span data-stu-id="49c33-277">To attach the sign in/sign up user flow policy, select each identity provider you have set up for your account.</span></span> <span data-ttu-id="49c33-278">Para probarlos, seleccione **Ejecutar flujo de usuario** para cada proveedor de identidad.</span><span class="sxs-lookup"><span data-stu-id="49c33-278">To test these, select **Run user flow** for each identity provider.</span></span> <span data-ttu-id="49c33-279">Una nueva pestaña mostrará la página de inicio de sesión con el nuevo cuadro de selección del proveedor de identidad.</span><span class="sxs-lookup"><span data-stu-id="49c33-279">A new tab will display the sign-in page displaying the new identity provider selection box.</span></span>

<span data-ttu-id="49c33-280">La siguiente imagen muestra ejemplos de pantallas **Agregar proveedor de identidad** y **Configurar el proveedor de identidad social** en Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-280">The following image shows examples of the **Add identity provider** and **Set up the social identity provider** screens in Azure AD B2C.</span></span>

![Agregar un proveedor de identidad social a su aplicación](./media/B2CImage_14.png)

<span data-ttu-id="49c33-282">La siguiente imagen muestra un ejemplo de cómo seleccionar proveedores de identidad en la página **Proveedores de identidad** de Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-282">The following image shows an example of how to select identity providers on the Azure AD B2C **Identity Providers** page.</span></span>

![Seleccionar cada proveedor de identidad social que hay que habilitar para su directiva](./media/B2CImage_16.png)

<span data-ttu-id="49c33-284">La siguiente imagen muestra un ejemplo de pantalla de inicio de sesión predeterminada con un botón de inicio de sesión del proveedor de identidad social.</span><span class="sxs-lookup"><span data-stu-id="49c33-284">The following image shows an example of a default sign-in screen with a social identity provider sign-in button displayed.</span></span>

> [!NOTE]
> <span data-ttu-id="49c33-285">Si utiliza las páginas personalizadas creadas en Commerce para sus flujos de usuario, los botones para proveedores de identidad social deberán agregarse utilizando las funciones de extensibilidad de la biblioteca del módulo de Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-285">If using the custom pages built in Commerce for your user flows, the buttons for social identity providers will need to be added using the extensibility features of the Commerce module library.</span></span> <span data-ttu-id="49c33-286">Además, al configurar sus aplicaciones con un proveedor de identidad social específico, en algunos casos la URL o las cadenas de configuración pueden distinguir entre mayúsculas y minúsculas.</span><span class="sxs-lookup"><span data-stu-id="49c33-286">Additionally, when setting up your applications with a specific social identity provider, in some cases URL or configuration strings may be case sensitive.</span></span> <span data-ttu-id="49c33-287">Consulte las instrucciones de conexión de su proveedor de identidad social para obtener más información.</span><span class="sxs-lookup"><span data-stu-id="49c33-287">Refer to your social identity provider's connection instructions for more information.</span></span>
 
![Ejemplo de pantalla de inicio de sesión predeterminada que muestra el botón de inicio de sesión del proveedor de identidad social](./media/B2CImage_17.png)

## <a name="update-commerce-headquarters-with-the-new-azure-ad-b2c-information"></a><span data-ttu-id="49c33-289">Actualizar la sede de Commerce con la nueva información de Azure AD B2C</span><span class="sxs-lookup"><span data-stu-id="49c33-289">Update Commerce headquarters with the new Azure AD B2C information</span></span>

<span data-ttu-id="49c33-290">Una vez completados los pasos de aprovisionamiento de Azure AD B2C antes mencionados, la aplicación Azure AD B2C debe registrarse en su entorno de Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-290">Once the Azure AD B2C provisioning steps above are completed, the Azure AD B2C application must be registered in your Dynamics 365 Commerce environment.</span></span>

<span data-ttu-id="49c33-291">Para actualizar la sede con la nueva información de Azure AD B2C, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-291">To update headquarters with the new Azure AD B2C information, follow these steps.</span></span>

1. <span data-ttu-id="49c33-292">En Commerce, vaya a **Parámetros compartidos de Commerce** y seleccione **Proveedores de identidad** en el menú de la izquierda.</span><span class="sxs-lookup"><span data-stu-id="49c33-292">In Commerce, go to **Commerce Shared Parameters** and select **Identity Providers** in the left menu.</span></span>
1. <span data-ttu-id="49c33-293">En **Proveedores de identidad**, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="49c33-293">Under **Identity Providers**, do the following:</span></span>
    1. <span data-ttu-id="49c33-294">En el cuadro **Emisor**, introduzca la dirección URL del emisor del proveedor de identidad.</span><span class="sxs-lookup"><span data-stu-id="49c33-294">In the **Issuer** box, enter the identity provider issuer URL.</span></span> <span data-ttu-id="49c33-295">Para encontrar la dirección URL del emisor, consulte [Obtener dirección URL de emisor](#obtain-issuer-url) a continuación.</span><span class="sxs-lookup"><span data-stu-id="49c33-295">To find your issuer URL, see [Obtain issuer URL](#obtain-issuer-url) below.</span></span>
    1. <span data-ttu-id="49c33-296">En el cuadro **Nombre**, escriba un nombre para el registro de emisor.</span><span class="sxs-lookup"><span data-stu-id="49c33-296">In the **Name** box, enter a name for your issuer record.</span></span>
    1. <span data-ttu-id="49c33-297">En el cuadro **Tipo**, introduzca **Azure AD B2C (id_token)**.</span><span class="sxs-lookup"><span data-stu-id="49c33-297">In the **Type** box, enter **Azure AD B2C (id_token)**.</span></span>
1. <span data-ttu-id="49c33-298">En **Partes dependientes**, con el elemento de proveedor de identidad B2C anterior seleccionado, haga lo siguiente:</span><span class="sxs-lookup"><span data-stu-id="49c33-298">Under **Relying Parties**, with the above B2C identity provider item selected, do the following:</span></span>
    1. <span data-ttu-id="49c33-299">En el cuadro **Id. de cliente**, introduzca su id. de aplicación B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-299">In the **ClientID** box, enter your B2C application ID.</span></span> <span data-ttu-id="49c33-300">Este identificador se encuentra en el cuadro **Id. de aplicación** de la página de propiedades de la aplicación B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-300">You can find this in the **Application ID** box of your B2C application's properties page.</span></span>
    1. <span data-ttu-id="49c33-301">En el cuadro **Tipo**, introduzca **Público**.</span><span class="sxs-lookup"><span data-stu-id="49c33-301">In the **Type** box, enter **Public**.</span></span>
    1. <span data-ttu-id="49c33-302">En el cuadro **Tipo de usuario**, introduzca **Cliente**.</span><span class="sxs-lookup"><span data-stu-id="49c33-302">In the **User Type** box, enter **Customer**.</span></span>
1. <span data-ttu-id="49c33-303">En el panel de acciones, seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-303">On the action pane, select **Save**.</span></span>
1. <span data-ttu-id="49c33-304">En el cuadro de búsqueda de Commerce, busque **Programación de distribución**</span><span class="sxs-lookup"><span data-stu-id="49c33-304">In the Commerce search box, search for **Distribution schedule**</span></span>
1. <span data-ttu-id="49c33-305">En el menú de navegación izquierdo de la página **Programaciones de distribución**, seleccione el trabajo **1110 Configuración global**.</span><span class="sxs-lookup"><span data-stu-id="49c33-305">In the left navigation menu of the **Distribution schedules** page, select job **1110 Global configuration**.</span></span>
1. <span data-ttu-id="49c33-306">En el panel de acciones, seleccione **Ejecutar ahora**.</span><span class="sxs-lookup"><span data-stu-id="49c33-306">On the action pane, select **Run Now**.</span></span>

### <a name="obtain-issuer-url"></a><span data-ttu-id="49c33-307">Obtener dirección URL de emisor</span><span class="sxs-lookup"><span data-stu-id="49c33-307">Obtain issuer URL</span></span>

<span data-ttu-id="49c33-308">Para obtener la dirección URL del emisor de proveedor de identidad, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-308">To obtain your identity provider issuer URL, follow these steps.</span></span>
1. <span data-ttu-id="49c33-309">En la página Azure AD B2C del portal de Azure, vaya a su flujo de usuario **Registro e inicio de sesión**.</span><span class="sxs-lookup"><span data-stu-id="49c33-309">On the Azure AD B2C page of the Azure portal, navigate to your **Sign up and sign in** user flow.</span></span>
1. <span data-ttu-id="49c33-310">Seleccione **Diseños de página** en el menú de navegación de la izquierda, en **Nombre del diseño** seleccione **Página unificada de registro o inicio de sesión** y luego seleccione **Ejecutar el flujo de usuarios**.</span><span class="sxs-lookup"><span data-stu-id="49c33-310">Select **Page layouts** in the left navigation menu, under **Layout name** select **Unified sign up or sign in page**, and then select **Run user flow**.</span></span>
1. <span data-ttu-id="49c33-311">Asegúrese de que su aplicación esté configurada para su aplicación Azure AD B2C creada anteriormente y luego seleccione el enlace debajo del encabezado **Ejecutar el flujo de usuarios** que incluye ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span><span class="sxs-lookup"><span data-stu-id="49c33-311">Make sure your application is set to your intended Azure AD B2C application created above, and then select the link under the **Run user flow** header that includes ``.../.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``.</span></span>
1. <span data-ttu-id="49c33-312">Se muestra una página de metadatos en la pestaña de su navegador. Copie la URL del emisor del proveedor de identidad (el valor de **"editor"**).</span><span class="sxs-lookup"><span data-stu-id="49c33-312">A metadata page is displayed in your browser tab. Copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
   - <span data-ttu-id="49c33-313">Ejemplo: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="49c33-313">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>
 
<span data-ttu-id="49c33-314">**O**: para construir la misma URL de metadatos manualmente, siga los siguientes pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-314">**OR**: To construct the same metadata URL manually, do the following steps.</span></span>

1. <span data-ttu-id="49c33-315">Utilice su directiva y su inquilino de B2C para crear una dirección URL de metadatos con el siguiente formato: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span><span class="sxs-lookup"><span data-stu-id="49c33-315">Create a metadata address URL in the following format using your B2C tenant and policy: ``https://<B2CTENANTNAME>.b2clogin.com/<B2CTENANTNAME>.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=<B2CSIGN-INPOLICY>``</span></span>
    - <span data-ttu-id="49c33-316">Ejemplo: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span><span class="sxs-lookup"><span data-stu-id="49c33-316">Example: ``https://d365plc.b2clogin.com/d365plc.onmicrosoft.com/v2.0/.well-known/openid-configuration?p=B2C_1_signinup``.</span></span>
1. <span data-ttu-id="49c33-317">Introduzca la dirección URL de metadatos en la barra de direcciones del explorador.</span><span class="sxs-lookup"><span data-stu-id="49c33-317">Enter the metadata address URL into a browser address bar.</span></span>
1. <span data-ttu-id="49c33-318">En los metadatos, copie la dirección URL del emisor del proveedor de identidad (el valor de **"emisor"**).</span><span class="sxs-lookup"><span data-stu-id="49c33-318">In the metadata, copy the identity provider issuer URL (the value for **"issuer"**).</span></span>
    - <span data-ttu-id="49c33-319">Ejemplo: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span><span class="sxs-lookup"><span data-stu-id="49c33-319">Example: ``https://login.fabrikam.com/011115c3-0113-4f43-b5e2-df01266e24ae/v2.0/``.</span></span>

## <a name="configure-your-b2c-tenant-in-commerce-site-builder"></a><span data-ttu-id="49c33-320">Configurar su inquilino de B2C en el generador de sitios de Commerce</span><span class="sxs-lookup"><span data-stu-id="49c33-320">Configure your B2C tenant in Commerce site builder</span></span>

<span data-ttu-id="49c33-321">Una vez configurado el inquilino de Azure AD B2C, debe configurar el inquilino de B2C en el generador de sitios de Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-321">Once setup of your Azure AD B2C tenant is completed, you must configure the B2C tenant in Commerce site builder.</span></span> <span data-ttu-id="49c33-322">Los pasos de configuración incluyen recopilar información de la aplicación B2C desde el portal de Azure, introducir esa información de la aplicación B2C en el generador de sitios y, a continuación, asociar la aplicación B2C a su sitio y canal.</span><span class="sxs-lookup"><span data-stu-id="49c33-322">Configuration steps include collecting B2C application information from the Azure portal, entering that B2C application information into site builder, and then associating the B2C application with your site and channel.</span></span>

### <a name="collect-the-required-application-information"></a><span data-ttu-id="49c33-323">Recopilar la información de aplicación necesaria</span><span class="sxs-lookup"><span data-stu-id="49c33-323">Collect the required application information</span></span>

<span data-ttu-id="49c33-324">Para recopilar la información de la aplicación necesaria, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-324">To collect the required application information, follow these steps.</span></span>

1. <span data-ttu-id="49c33-325">En el portal de Azure, vaya a **Inicio \> Azure AD B2C - Aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="49c33-325">In the Azure portal, go to **Home \> Azure AD B2C - Applications**.</span></span>
1. <span data-ttu-id="49c33-326">Seleccione la aplicación y, a continuación, en el panel de navegación izquierdo, seleccione **Propiedades** para obtener los detalles de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="49c33-326">Select your application, and then in the left navigation pane select **Properties** to obtain the application details.</span></span>
1. <span data-ttu-id="49c33-327">En el cuadro **Id. de aplicación**, recopile el Id. de la aplicación B2C creada en el inquilino de B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-327">From the **Application ID** box, collect the application ID of the B2C application created in your B2C tenant.</span></span> <span data-ttu-id="49c33-328">Posteriormente, este identificador se introducirá como **GUID de cliente** en el generador de sitios.</span><span class="sxs-lookup"><span data-stu-id="49c33-328">This will later be entered as the **Client GUID** in site builder.</span></span>
1. <span data-ttu-id="49c33-329">En **URL de respuesta**, recopile la dirección URL de respuesta.</span><span class="sxs-lookup"><span data-stu-id="49c33-329">Under **Reply URL**, collect the reply URL.</span></span>
1. <span data-ttu-id="49c33-330">Vaya a **Inicio \> Azure AD B2C - Flujos de usuario (directivas)** y, a continuación, recopile los nombres de cada directiva de flujo de usuario.</span><span class="sxs-lookup"><span data-stu-id="49c33-330">Go to **Home \> Azure AD B2C – User flows (policies)**, and then collect the names of each user flow policy.</span></span>

<span data-ttu-id="49c33-331">La siguiente imagen muestra un ejemplo de la página **Azure AD B2C - Aplicaciones**.</span><span class="sxs-lookup"><span data-stu-id="49c33-331">The following image shows an example of the **Azure AD B2C - Applications** page.</span></span>

![Ir a la aplicación B2C en el inquilino](./media/B2CImage_19.png)

<span data-ttu-id="49c33-333">La siguiente imagen muestra un ejemplo de la página **Propiedades** de una aplicación en Azure AD B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-333">The following image shows an example of an application **Properties** page in Azure AD B2C.</span></span> 

![Copiar el id. de aplicación desde la página Propiedades de la aplicación B2C](./media/B2CImage_21.png)

<span data-ttu-id="49c33-335">La siguiente imagen muestra un ejemplo de directivas de flujo de usuario en la página **Azure AD B2C - Flujos de usuarios (directivas)**.</span><span class="sxs-lookup"><span data-stu-id="49c33-335">The following image shows an example of user flow policies on the **Azure AD B2C – User flows (policies)** page.</span></span>

![Recopilar los nombres de cada flujo de directiva de B2C](./media/B2CImage_22.png)

### <a name="enter-your-aad-b2c-tenant-application-information-into-commerce"></a><span data-ttu-id="49c33-337">Introducir en Commerce la información de su aplicación de inquilino de AAD B2C</span><span class="sxs-lookup"><span data-stu-id="49c33-337">Enter your AAD B2C tenant application information into Commerce</span></span>

<span data-ttu-id="49c33-338">Debe introducir los detalles del inquilino de Azure AD B2C en el generador de sitios de Commerce antes de asociar el inquilino de B2C a sus sitios.</span><span class="sxs-lookup"><span data-stu-id="49c33-338">You must enter details of the Azure AD B2C tenant into Commerce site builder before associating the B2C tenant with your site(s).</span></span>

<span data-ttu-id="49c33-339">Para agregar a Commerce la información de su aplicación de inquilino de AAD B2C, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-339">To add your AAD B2C tenant application information to Commerce, follow these steps.</span></span>

1. <span data-ttu-id="49c33-340">Inicie sesión como administrador en el generador de sitios de Commerce para su entorno.</span><span class="sxs-lookup"><span data-stu-id="49c33-340">Sign in as an administrator to Commerce site builder for your environment.</span></span>
1. <span data-ttu-id="49c33-341">En el panel de navegación izquierdo, seleccione el nodo **Configuración de inquilino** para expandirlo.</span><span class="sxs-lookup"><span data-stu-id="49c33-341">In the left navigation pane, select **Tenant Settings**  to expand it.</span></span>
1. <span data-ttu-id="49c33-342">En **Configuración de inquilino**, seleccione **Configuración de B2C**.</span><span class="sxs-lookup"><span data-stu-id="49c33-342">Under **Tenant Settings**, select **B2C Settings**.</span></span> 
1. <span data-ttu-id="49c33-343">En la ventana principal, junto a **Aplicaciones B2C**, seleccione **Administrar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-343">In the main window next **B2C Applications**, select **Manage**.</span></span> <span data-ttu-id="49c33-344">(Si su inquilino aparece en la lista de aplicaciones B2C, significa que ya lo agregó un administrador.</span><span class="sxs-lookup"><span data-stu-id="49c33-344">(If your tenant appears in the B2C Applications list, then it was already added by an administrator.</span></span> <span data-ttu-id="49c33-345">Compruebe que los elementos del paso 6 a continuación correspondan a su aplicación B2C).</span><span class="sxs-lookup"><span data-stu-id="49c33-345">Verify that the items in step 6 below match your B2C Application.)</span></span>
1. <span data-ttu-id="49c33-346">Seleccione **Agregar aplicación B2C**.</span><span class="sxs-lookup"><span data-stu-id="49c33-346">Select **Add B2C Application**.</span></span>
1. <span data-ttu-id="49c33-347">Introduzca los siguientes elementos obligatorios en el formulario que se muestra, utilizando los valores del inquilino de B2C y la aplicación B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-347">Enter the following required items in the form displayed, using values from your B2C tenant and application.</span></span> <span data-ttu-id="49c33-348">Los campos que no son obligatorios (los que no muestran un asterisco) pueden dejarse en blanco.</span><span class="sxs-lookup"><span data-stu-id="49c33-348">Fields that are not required (those without an asterisk) may be left blank.</span></span>

    - <span data-ttu-id="49c33-349">**Nombre de la aplicación**: el nombre de la aplicación B2C (por ejemplo, "Fabrikam B2C").</span><span class="sxs-lookup"><span data-stu-id="49c33-349">**Application Name**: The name for your B2C Application, for example "Fabrikam B2C".</span></span>
    - <span data-ttu-id="49c33-350">**Nombre del inquilino**: el nombre de su inquilino B2C (por ejemplo, use "fabrikam" si el dominio aparece como "fabrikam.onmicrosoft.com" para el inquilino B2C).</span><span class="sxs-lookup"><span data-stu-id="49c33-350">**Tenant Name**: The name of your B2C tenant (for example, use "fabrikam" if the domain appears as "fabrikam.onmicrosoft.com" for the B2C tenant).</span></span> 
    - <span data-ttu-id="49c33-351">**Id. de directiva de restablecimiento de contraseña**: el id. de la directiva del flujo de usuario de restablecimiento de contraseña (por ejemplo, "B2C_1_PasswordReset").</span><span class="sxs-lookup"><span data-stu-id="49c33-351">**Forget Password Policy ID**: The forget password user flow policy ID, for example "B2C_1_PasswordReset".</span></span>
    - <span data-ttu-id="49c33-352">**Id. de directiva de registro e inicio de sesión**: el id. de la directiva de registro e inicio de sesión (por ejemplo, "B2C_1_signup_signin").</span><span class="sxs-lookup"><span data-stu-id="49c33-352">**Signup Signin Policy ID**: The sign up and sign in user flow policy ID, for example "B2C_1_signup_signin".</span></span>
    - <span data-ttu-id="49c33-353">**GUID del cliente**: el id. de la aplicación B2C (por ejemplo, "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6").</span><span class="sxs-lookup"><span data-stu-id="49c33-353">**Client GUID**: The B2C application ID, for example "22290eb2-c52e-42e9-8b35-a2b0a3bcb9e6".</span></span>
    - <span data-ttu-id="49c33-354">**Id. de directiva de edición de perfil**: el id. de la directiva del flujo de usuario de edición de perfil (por ejemplo, "B2C_1A_ProfileEdit").</span><span class="sxs-lookup"><span data-stu-id="49c33-354">**Edit Profile Policy ID**: The profile editing user flow policy ID, for example "B2C_1A_ProfileEdit".</span></span>

1. <span data-ttu-id="49c33-355">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-355">Select **OK**.</span></span> <span data-ttu-id="49c33-356">Ahora debería ver el nombre de su aplicación B2C en la lista.</span><span class="sxs-lookup"><span data-stu-id="49c33-356">You should now see the name of your B2C application appear in the list.</span></span>
1. <span data-ttu-id="49c33-357">Seleccione **Guardar** para guardar los cambios.</span><span class="sxs-lookup"><span data-stu-id="49c33-357">Select **Save** to save your changes.</span></span>

### <a name="associate-the-b2c-application-to-your-site-and-channel"></a><span data-ttu-id="49c33-358">Asociar la aplicación B2C a su sitio y canal</span><span class="sxs-lookup"><span data-stu-id="49c33-358">Associate the B2C application to your site and channel</span></span>

> [!WARNING]
> <span data-ttu-id="49c33-359">Si su sitio ya está asociado a una aplicación B2C, al cambiar a una aplicación B2C distinta se eliminarán las referencias actuales establecidas para los usuarios que ya se han registrado en este entorno.</span><span class="sxs-lookup"><span data-stu-id="49c33-359">If your site is already associated with a B2C application, changing to a different B2C application will remove the current references established for users already signed up in this environment.</span></span> <span data-ttu-id="49c33-360">Si se hace el cambio, las credenciales asociadas con la aplicación B2C asignada actualmente no estarán disponibles para los usuarios.</span><span class="sxs-lookup"><span data-stu-id="49c33-360">If changed, any credentials associated with the currently-assigned B2C application will not be available to users.</span></span> 
> 
> <span data-ttu-id="49c33-361">Solo debe actualizar la aplicación B2C si va a configurar la aplicación B2C del canal por primera vez o si tiene la intención de hacer que los usuarios vuelvan a registrarse con nuevas credenciales para este canal con la nueva aplicación B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-361">Only update the B2C application if you are setting up the channel's B2C application for the first time or if you intend to have users re-sign up with new credentials to this channel with the new B2C application.</span></span> <span data-ttu-id="49c33-362">Tenga cuidado al asociar canales a aplicaciones B2C, y asigne nombres claros a las aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="49c33-362">Take caution when associating channels to B2C applications, and name applications clearly.</span></span> <span data-ttu-id="49c33-363">Si un canal no se asocia a una aplicación B2C en los pasos siguientes, los usuarios que inicien sesión en ese canal del sitio se introducirán en la aplicación B2C que se muestra como **predeterminada** en la lista **Configuración del inquilino \> Configuración de B2C** de aplicaciones B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-363">If a channel is not associated to a B2C application in the steps below, users signing into that channel for your site will be entered into the B2C application showing as **default** in the **Tenant Settings \> B2C Settings** list of B2C applications.</span></span>

<span data-ttu-id="49c33-364">Para asociar la aplicación B2C a su sitio y canal, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="49c33-364">To associate the B2C application to your site and channel, follow these steps.</span></span>

1. <span data-ttu-id="49c33-365">Vaya a su sitio en el generador de sitios de Commerce.</span><span class="sxs-lookup"><span data-stu-id="49c33-365">Navigate to your site in Commerce site builder.</span></span>
1. <span data-ttu-id="49c33-366">En el panel de navegación izquierdo, seleccione **Valores de configuración del sitio** para expandirlo</span><span class="sxs-lookup"><span data-stu-id="49c33-366">In the left navigation pane, select **Site Settings** to expand it.</span></span>
1. <span data-ttu-id="49c33-367">Bajo **Configuración del sitio**, seleccione **Canales**.</span><span class="sxs-lookup"><span data-stu-id="49c33-367">Below **Site Settings**, select **Channels**.</span></span>
1. <span data-ttu-id="49c33-368">En la ventana principal bajo **Canales**, seleccione su canal.</span><span class="sxs-lookup"><span data-stu-id="49c33-368">In the main window under **Channels**, select your channel.</span></span>
1. <span data-ttu-id="49c33-369">En el panel de propiedades del canal a la derecha, seleccione el nombre de su aplicación B2C en el menú desplegable **Seleccionar aplicación B2C**.</span><span class="sxs-lookup"><span data-stu-id="49c33-369">In the channel properties pane on the right, select your B2C application name from the **Select B2C Application** drop down menu.</span></span>
1. <span data-ttu-id="49c33-370">Seleccione **Cerrar** y, a continuación, seleccione **Guardar y publicar**.</span><span class="sxs-lookup"><span data-stu-id="49c33-370">Select **Close**, and then select **Save and Publish**.</span></span>

## <a name="additional-b2c-information"></a><span data-ttu-id="49c33-371">Información de B2C adicional</span><span class="sxs-lookup"><span data-stu-id="49c33-371">Additional B2C information</span></span>

### <a name="customer-migration"></a><span data-ttu-id="49c33-372">Migración de clientes</span><span class="sxs-lookup"><span data-stu-id="49c33-372">Customer migration</span></span>

<span data-ttu-id="49c33-373">Si se está planteando la posibilidad de migrar registros de clientes desde una plataforma de proveedor de identidad anterior, trabaje con el equipo de Dynamics 365 Commerce para revisar sus necesidades de migración de clientes.</span><span class="sxs-lookup"><span data-stu-id="49c33-373">If you are considering migrating customer records from a previous identity provider platform, please work with the Dynamics 365 Commerce team to review your customer migration needs.</span></span>

<span data-ttu-id="49c33-374">Para adicional obtener documentación adicional de Azure AD B2C sobre migración de clientes, consulte [Migrar usuarios a Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span><span class="sxs-lookup"><span data-stu-id="49c33-374">For additional Azure AD B2C documentation on customer migration, see [Migrate users to Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-user-migration).</span></span>

### <a name="custom-policies"></a><span data-ttu-id="49c33-375">Directivas personalizadas</span><span class="sxs-lookup"><span data-stu-id="49c33-375">Custom policies</span></span>

<span data-ttu-id="49c33-376">Para obtener información adicional sobre la personalización de las interacciones y los flujo de directiva de Azure AD más allá de lo que ofrecen las directivas estándar de B2C, consulte [Directivas personalizadas en Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span><span class="sxs-lookup"><span data-stu-id="49c33-376">For additional information regarding customizing Azure AD B2C interactions and policy flows beyond what is offered by B2C standard policies, see [Custom policies in Azure Active Directory B2C](https://docs.microsoft.com/azure/active-directory-b2c/active-directory-b2c-overview-custom).</span></span> 

### <a name="secondary-admin"></a><span data-ttu-id="49c33-377">Administrador secundario</span><span class="sxs-lookup"><span data-stu-id="49c33-377">Secondary admin</span></span>

<span data-ttu-id="49c33-378">Se puede agregar una cuenta de administrador secundario opcional en la sección **Usuarios** del inquilino de B2C.</span><span class="sxs-lookup"><span data-stu-id="49c33-378">An optional, secondary administrator account can be added in the **Users** section of your B2C tenant.</span></span> <span data-ttu-id="49c33-379">Puede ser una cuenta directa o una cuenta general.</span><span class="sxs-lookup"><span data-stu-id="49c33-379">This can be a direct account or a general account.</span></span> <span data-ttu-id="49c33-380">Si necesita compartir una cuenta entre los recursos del equipo, también puede crear una cuenta común.</span><span class="sxs-lookup"><span data-stu-id="49c33-380">If you need to share an account across team resources, a common account can also be created.</span></span> <span data-ttu-id="49c33-381">Por la confidencialidad de los datos almacenados en Azure AD B2C, una cuenta común debe supervisarse estrechamente siguiendo los procedimientos de seguridad de la empresa.</span><span class="sxs-lookup"><span data-stu-id="49c33-381">Due to the sensitivity of the data stored in Azure AD B2C, a common account should be monitored closely per your company's security practices.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="49c33-382">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="49c33-382">Additional resources</span></span>

[<span data-ttu-id="49c33-383">Configurar su nombre de dominio</span><span class="sxs-lookup"><span data-stu-id="49c33-383">Configure your domain name</span></span>](configure-your-domain-name.md)

[<span data-ttu-id="49c33-384">Implementar un inquilino nuevo de comercio electrónico</span><span class="sxs-lookup"><span data-stu-id="49c33-384">Deploy a new e-commerce tenant</span></span>](deploy-ecommerce-site.md)

[<span data-ttu-id="49c33-385">Crear un sitio de comercio electrónico</span><span class="sxs-lookup"><span data-stu-id="49c33-385">Create an e-commerce site</span></span>](create-ecommerce-site.md)

[<span data-ttu-id="49c33-386">Asociar un sitio de Dynamics 365 Commerce con un canal en línea</span><span class="sxs-lookup"><span data-stu-id="49c33-386">Associate a Dynamics 365 Commerce site with an online channel</span></span>](associate-site-online-store.md)

[<span data-ttu-id="49c33-387">Administrar archivos robots.txt</span><span class="sxs-lookup"><span data-stu-id="49c33-387">Manage robots.txt files</span></span>](manage-robots-txt-files.md)

[<span data-ttu-id="49c33-388">Subir redireccionamientos de URL en grandes cantidades</span><span class="sxs-lookup"><span data-stu-id="49c33-388">Upload URL redirects in bulk</span></span>](upload-bulk-redirects.md)

[<span data-ttu-id="49c33-389">Configurar páginas personalizadas para inicios de sesión de usuario</span><span class="sxs-lookup"><span data-stu-id="49c33-389">Set up custom pages for user logins</span></span>](custom-pages-user-logins.md)

[<span data-ttu-id="49c33-390">Configurar múltiples inquilinos B2C en un entorno de Commerce</span><span class="sxs-lookup"><span data-stu-id="49c33-390">Configure multiple B2C tenants in a Commerce environment</span></span>](configure-multi-B2C-tenants.md)

[<span data-ttu-id="49c33-391">Agregar soporte para una red de entrega de contenido (CDN)</span><span class="sxs-lookup"><span data-stu-id="49c33-391">Add support for a content delivery network (CDN)</span></span>](add-cdn-support.md)

[<span data-ttu-id="49c33-392">Habilitar la detección de tienda según la ubicación</span><span class="sxs-lookup"><span data-stu-id="49c33-392">Enable location-based store detection</span></span>](enable-store-detection.md)


[!INCLUDE[footer-include](../includes/footer-banner.md)]
