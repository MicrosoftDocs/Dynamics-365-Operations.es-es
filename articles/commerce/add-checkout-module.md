---
title: Módulo de finalización de compra
description: En este tema se describe cómo agregar un módulo de finalización de compra a una página y establecer las propiedades necesarias.
author: anupamar-ms
manager: annbe
ms.date: 05/28/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-commerce
ms.technology: ''
audience: Application user
ms.reviewer: v-chgri
ms.search.scope: Operations, Retail, Core
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: anupamar
ms.search.validFrom: 2019-10-31
ms.dyn365.ops.version: Release 10.0.5
ms.openlocfilehash: bd1d66fc39872019fc38dbbfb56dc3015d57d0dd
ms.sourcegitcommit: b52477b7d0d52102a7ca2fb95f4ebfa30ecd9f54
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 05/29/2020
ms.locfileid: "3411227"
---
# <a name="checkout-module"></a><span data-ttu-id="d34e4-103">Módulo de finalización de compra</span><span class="sxs-lookup"><span data-stu-id="d34e4-103">Checkout module</span></span>


[!include [banner](includes/banner.md)]

<span data-ttu-id="d34e4-104">En este tema se describe cómo agregar un módulo de finalización de compra a una página y establecer las propiedades necesarias.</span><span class="sxs-lookup"><span data-stu-id="d34e4-104">This topic describes how to add a checkout module to a page and set the required properties.</span></span>

## <a name="overview"></a><span data-ttu-id="d34e4-105">Visión general</span><span class="sxs-lookup"><span data-stu-id="d34e4-105">Overview</span></span>

<span data-ttu-id="d34e4-106">Un módulo de finalización de compra es un contenedor especial que hospeda todos los módulos necesarios para crear un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-106">A checkout module is a special container that hosts all modules that are required to create an order.</span></span> <span data-ttu-id="d34e4-107">Presenta un flujo detallado que un cliente usa para introducir toda la información pertinente para realizar una compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-107">It presents a step-by-step flow that a customer uses to enter all the relevant information to make a purchase.</span></span> <span data-ttu-id="d34e4-108">Captura la dirección de envío, el método de envío y la información de facturación.</span><span class="sxs-lookup"><span data-stu-id="d34e4-108">It captures the shipping address, shipping method, and billing information.</span></span> <span data-ttu-id="d34e4-109">También proporciona un resumen del pedido y otra información relacionada con un pedido del cliente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-109">It also provides an order summary and other information that is related to a customer order.</span></span>

<span data-ttu-id="d34e4-110">Un módulo de finalización de compra representa datos a partir del id. del carro.</span><span class="sxs-lookup"><span data-stu-id="d34e4-110">A checkout module renders data based on the cart ID.</span></span> <span data-ttu-id="d34e4-111">Este id. del carro se guarda como cookie del explorador.</span><span class="sxs-lookup"><span data-stu-id="d34e4-111">This cart ID is saved as a browser cookie.</span></span> <span data-ttu-id="d34e4-112">Se requiere un id. de carro para representar información en el módulo de finalización de compra, como los artículos del pedido, el importe total y los descuentos.</span><span class="sxs-lookup"><span data-stu-id="d34e4-112">A cart ID is required to render information in the checkout module, such as the items in the order, the total amount, and discounts.</span></span> 

<span data-ttu-id="d34e4-113">La siguiente imagen muestra un ejemplo de un módulo de finalización de compra en una página de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-113">The following image shows an example of a Fabrikam checkout module on a checkout page.</span></span>

![Ejemplo de módulo de finalización de compra](./media/Checkout.PNG)

## <a name="checkout-module-properties"></a><span data-ttu-id="d34e4-115">Propiedades del módulo de finalización de compra</span><span class="sxs-lookup"><span data-stu-id="d34e4-115">Checkout module properties</span></span>

<span data-ttu-id="d34e4-116">Un módulo de finalización de compra muestra un resumen del pedido y proporciona la funcionalidad necesaria para realizar un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-116">A checkout module shows an order summary and provides the functionality for placing an order.</span></span> <span data-ttu-id="d34e4-117">Para reunir toda la información del cliente necesaria para poder realizar un pedido, hay que agregar módulos adicionales al módulo de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-117">To gather all the customer information that is required before an order can be placed, additional modules must be added to the checkout module.</span></span> <span data-ttu-id="d34e4-118">Por lo tanto, los minoristas tienen la flexibilidad de agregar módulos personalizados al flujo de finalización de compra, o de excluir módulos, según sus requisitos.</span><span class="sxs-lookup"><span data-stu-id="d34e4-118">Therefore, retailers have the flexibility to add custom modules to the checkout flow, or to exclude modules, based on their requirements.</span></span>

### <a name="modules-that-can-be-used-in-the-checkout-module"></a><span data-ttu-id="d34e4-119">Módulos que se pueden usar en el módulo de finalización de compra</span><span class="sxs-lookup"><span data-stu-id="d34e4-119">Modules that can be used in the checkout module</span></span>

- <span data-ttu-id="d34e4-120">**Dirección de envío**: este módulo permite que un cliente agregue o seleccione la dirección de envío para un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-120">**Shipping address** – This module lets a customer add or select the shipping address for an order.</span></span> <span data-ttu-id="d34e4-121">Si el cliente ha iniciado sesión, se muestran las direcciones que se guardaron anteriormente para ese cliente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-121">If the customer is signed in, any addresses that were previously saved for that customer are shown.</span></span> <span data-ttu-id="d34e4-122">El cliente puede seleccionar a continuación entre esas direcciones.</span><span class="sxs-lookup"><span data-stu-id="d34e4-122">The customer can then select among those addresses.</span></span> <span data-ttu-id="d34e4-123">El cliente también puede agregar una dirección nueva.</span><span class="sxs-lookup"><span data-stu-id="d34e4-123">The customer can also add a new address.</span></span> <span data-ttu-id="d34e4-124">La dirección de envío se usa para todos los artículos del pedido que requieren envío.</span><span class="sxs-lookup"><span data-stu-id="d34e4-124">The shipping address is used for all the items in the order that require shipping.</span></span> <span data-ttu-id="d34e4-125">No se puede personalizar para artículos de línea individuales.</span><span class="sxs-lookup"><span data-stu-id="d34e4-125">It can't be customized for individual line items.</span></span> <span data-ttu-id="d34e4-126">Los formatos de dirección de envío se definen para cada país o región, y las reglas específicas de país o región se aplican por este módulo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-126">Shipping address formats are defined for each country or region, and the country/region-specific rules are enforced by this module.</span></span> <span data-ttu-id="d34e4-127">Aunque este módulo no proporcione la validación de la dirección, la validación de la dirección se puede implementar a través de la personalización.</span><span class="sxs-lookup"><span data-stu-id="d34e4-127">Although this module doesn't provide address validation, address validation can be implemented through customization.</span></span> <span data-ttu-id="d34e4-128">Si el pedido solo incluye artículos que se recogerán en la tienda, este módulo se oculta automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-128">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>

    <span data-ttu-id="d34e4-129">La siguiente imagen muestra un ejemplo de un módulo de dirección de envío en una página de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-129">The following image shows an example of a shipping address module on a checkout page.</span></span>

    ![Ejemplo de un módulo de dirección de envío](./media/ecommerce-shippingaddress.PNG)

- <span data-ttu-id="d34e4-131">**Opciones de entrega**: este módulo permite a un cliente seleccionar una opción de entrega para un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-131">**Delivery options** – This module lets a customer select a delivery option for an order.</span></span> <span data-ttu-id="d34e4-132">Las opciones de entrega se basan en la dirección de envío.</span><span class="sxs-lookup"><span data-stu-id="d34e4-132">Delivery options are based on the shipping address.</span></span> <span data-ttu-id="d34e4-133">Si cambia la dirección de envío, las opciones de entrega se deben recuperar de nuevo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-133">If the shipping address is changed, the delivery options must be retrieved again.</span></span> <span data-ttu-id="d34e4-134">Si el pedido solo incluye artículos que se recogerán en la tienda, este módulo se oculta automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-134">If the order includes only items that will be picked up in the store, this module is automatically hidden.</span></span>

    <span data-ttu-id="d34e4-135">La siguiente imagen muestra un ejemplo de un módulo de opciones de entrega en una página de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-135">The following image shows an example of a delivery options module on a checkout page.</span></span>

    ![Ejemplo de un módulo de opciones de entrega](./media/ecommerce-deliveryoptions.PNG)

- <span data-ttu-id="d34e4-137">**Contenedor de secciones de finalización de compra:** este módulo es un contenedor que puede colocar varios módulos dentro para crear una sección dentro del flujo de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-137">**Checkout section container** – This module is a container that you can put multiple modules inside to create a section within the checkout flow.</span></span> <span data-ttu-id="d34e4-138">Por ejemplo, puede colocar todos los módulos relacionados con pagos dentro de este contenedor para que aparezcan como una sección.</span><span class="sxs-lookup"><span data-stu-id="d34e4-138">For example, you can put all payment-related modules inside this container to make them appear as one section.</span></span> <span data-ttu-id="d34e4-139">Este módulo solo afecta al diseño del flujo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-139">This module affects only the layout of the flow.</span></span>
- <span data-ttu-id="d34e4-140">**Tarjeta regalo**: este módulo permite a un cliente pagar por un pedido con una tarjeta regalo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-140">**Gift card** – This module lets a customer pay for an order by using a gift card.</span></span> <span data-ttu-id="d34e4-141">Solo admite tarjetas regalos de Microsoft Dynamics 365 Commerce.</span><span class="sxs-lookup"><span data-stu-id="d34e4-141">It supports only Microsoft Dynamics 365 Commerce gift cards.</span></span> <span data-ttu-id="d34e4-142">Se pueden aplicar una o más tarjetas regalo a un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-142">One or more gift cards can be applied to an order.</span></span> <span data-ttu-id="d34e4-143">Si el saldo de la tarjeta regalo no cubre el importe del carro, la tarjeta regalo se puede combinar con otro método de pago.</span><span class="sxs-lookup"><span data-stu-id="d34e4-143">If the balance of the gift card doesn't cover the amount in the cart, the gift card can be combined with another payment method.</span></span> <span data-ttu-id="d34e4-144">Las tarjetas regalo solo se pueden canjear si el cliente ha iniciado sesión.</span><span class="sxs-lookup"><span data-stu-id="d34e4-144">Gift cards can be redeemed only if the customer is signed in.</span></span>
- <span data-ttu-id="d34e4-145">**Puntos de fidelización:** este módulo permite a un cliente pagar por un pedido mediante puntos de fidelización.</span><span class="sxs-lookup"><span data-stu-id="d34e4-145">**Loyalty points** – This module lets a customer pay for an order by using loyalty points.</span></span> <span data-ttu-id="d34e4-146">Ofrece un resumen de puntos disponibles y puntos de caducidad, y permite al cliente seleccionar el número de puntos que se canjearán.</span><span class="sxs-lookup"><span data-stu-id="d34e4-146">It provides a summary of available points and expiring points, and lets the customer select the number of points to redeem.</span></span> <span data-ttu-id="d34e4-147">Si el cliente no ha iniciado sesión o no es un cliente de fidelización, o si el importe total del carro es 0 (cero), este módulo se oculta automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-147">If the customer isn't signed in or isn't a loyalty member, or if the total amount in the cart is 0 (zero), this module is automatically hidden.</span></span>
- <span data-ttu-id="d34e4-148">**Pago**: este módulo permite a un cliente pagar un pedido con una tarjeta de crédito.</span><span class="sxs-lookup"><span data-stu-id="d34e4-148">**Payment** – This module lets a customer pay for an order by using a credit card.</span></span> <span data-ttu-id="d34e4-149">Si el importe total del carro se cubre con puntos de fidelización o una tarjeta regalo, o es 0 (cero), este módulo se oculta automáticamente.</span><span class="sxs-lookup"><span data-stu-id="d34e4-149">If the total amount in the cart is covered by loyalty points or a gift card, or if it's 0 (zero), this module is automatically hidden.</span></span> <span data-ttu-id="d34e4-150">La integración de la tarjeta de crédito la proporciona el connector de pagos de Adyen para este módulo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-150">Credit card integration is provided by the Adyen payment connector for this module.</span></span> <span data-ttu-id="d34e4-151">Para obtener más información acerca de cómo usar este conector, consulte [Conector de pago de Dynamics 365 para Adyen](dev-itpro/adyen-connector.md).</span><span class="sxs-lookup"><span data-stu-id="d34e4-151">For more information about how to use this connector, see [Dynamics 365 Payment Connector for Adyen](dev-itpro/adyen-connector.md).</span></span>
- <span data-ttu-id="d34e4-152">**Dirección de facturación**: este módulo permite a un cliente proporcionar información de facturación.</span><span class="sxs-lookup"><span data-stu-id="d34e4-152">**Billing address** – This module lets a customer provide billing information.</span></span> <span data-ttu-id="d34e4-153">Adyen procesa esta información, junto con la información de la tarjeta de crédito.</span><span class="sxs-lookup"><span data-stu-id="d34e4-153">This information is processed, together with the credit card information, by Adyen.</span></span> <span data-ttu-id="d34e4-154">Este módulo incluye una opción que permite a los clientes usar su dirección de facturación como la dirección de envío.</span><span class="sxs-lookup"><span data-stu-id="d34e4-154">This module includes an option that lets customers use their billing address as the shipping address.</span></span>

    <span data-ttu-id="d34e4-155">La siguiente imagen muestra un ejemplo de tarjeta de regalo, puntos de fidelidad, pago y módulos de dirección de facturación en una página de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-155">The following image shows an example of gift card, loyalty points, payment, and billing address modules on a checkout page.</span></span>

    ![Ejemplo de módulos de tarjeta de regalo, puntos de fidelidad, pago y dirección de facturación](./media/ecommerce-payments.PNG)

- <span data-ttu-id="d34e4-157">**Información de contacto:** este módulo permite a un cliente agregar o cambiar la información de contacto (dirección de correo electrónico) para un pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-157">**Contact information** – This module lets a customer add or change the contact information (email address) for an order.</span></span>

- <span data-ttu-id="d34e4-158">**Bloque de texto**: este módulo contiene cualquier mensajería controlada por el sistema de gestión de contenidos (CMS).</span><span class="sxs-lookup"><span data-stu-id="d34e4-158">**Text block** – This module contains any messaging that is driven by the content management system (CMS).</span></span> <span data-ttu-id="d34e4-159">Por ejemplo, es posible que contenga un mensaje que indique "Para problemas con el pedido, póngase en contacto con 1-800-Fabrikam".</span><span class="sxs-lookup"><span data-stu-id="d34e4-159">For example, it might contain a message that states, "For issues with your order, contact 1-800-Fabrikam."</span></span> 

## <a name="commerce-scale-unit-interaction"></a><span data-ttu-id="d34e4-160">Interacción con Commerce Scale Unit</span><span class="sxs-lookup"><span data-stu-id="d34e4-160">Commerce Scale Unit interaction</span></span>

<span data-ttu-id="d34e4-161">La mayor parte de la información de finalización del pago, como la dirección de envío y el método de envío, se almacena en el carro y se procesa como parte del pedido.</span><span class="sxs-lookup"><span data-stu-id="d34e4-161">Most of the checkout information, such as the shipping address and shipping method, is stored in the cart and processed as part of the order.</span></span> <span data-ttu-id="d34e4-162">La única excepción es la información de la tarjeta de crédito.</span><span class="sxs-lookup"><span data-stu-id="d34e4-162">The only exception is the credit card information.</span></span> <span data-ttu-id="d34e4-163">Esta información se procesa directamente mediante el conector de pagos de Adyen.</span><span class="sxs-lookup"><span data-stu-id="d34e4-163">This information is processed directly by using the Adyen payment connector.</span></span> <span data-ttu-id="d34e4-164">El pago se autoriza pero no se carga.</span><span class="sxs-lookup"><span data-stu-id="d34e4-164">The payment is authorized but isn't charged.</span></span>

## <a name="add-a-checkout-module-to-a-page-and-set-the-required-properties"></a><span data-ttu-id="d34e4-165">Agregue un módulo de finalización de compra a una página y establezca las propiedades necesarias</span><span class="sxs-lookup"><span data-stu-id="d34e4-165">Add a checkout module to a page and set the required properties</span></span>

<span data-ttu-id="d34e4-166">Para agregar un módulo de finalización del pago a una página nueva y establecer las propiedades necesarias, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="d34e4-166">To add a checkout module to a new page and set the required properties, follow these steps.</span></span>

1. <span data-ttu-id="d34e4-167">Vaya a **Fragmentos de página** y seleccione **Nuevo** para crear un nuevo fragmento.</span><span class="sxs-lookup"><span data-stu-id="d34e4-167">Go to **Page Fragments**, and select **New** to create a new fragment.</span></span>
1. <span data-ttu-id="d34e4-168">En el cuadro de diálogo, **Nuevo fragmento de página**, seleccione el módulo **Finalización de compra**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-168">In the **New Page Fragment** dialog box, select the **Checkout** module.</span></span>
1. <span data-ttu-id="d34e4-169">En **Nombre del fragmento de página**, introduzca el nombre **Fragmento de finalización de compra** y luego seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-169">Under **Page Fragment Name**, enter the name **Checkout fragment**, and then select **OK**.</span></span>
1. <span data-ttu-id="d34e4-170">Seleccione el espacio **Módulo de finalización de compra**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-170">Select the **Checkout module** slot.</span></span>
1. <span data-ttu-id="d34e4-171">En el panel de propiedades de la derecha, seleccione el símbolo del lápiz, introduzca el texto del encabezado en el campo y luego seleccione el símbolo de marca de verificación.</span><span class="sxs-lookup"><span data-stu-id="d34e4-171">In the properties pane on the right, select the pencil symbol, enter heading text in the field, and then select the check mark symbol.</span></span>
1. <span data-ttu-id="d34e4-172">En el espacio **Información de finalización de compra**, seleccione los puntos suspensivos (**...**) y después seleccione **Agregar módulo**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-172">In the **Checkout Information** slot, select the ellipsis (**...**), and then select **Add Module**.</span></span>
1. <span data-ttu-id="d34e4-173">En el cuadro de diálogo **Agregar módulo**, seleccione los módulos **Dirección de Envío**, **Opciones de entrega**, **Contenedor de sección de finalización de compra** e **Información del contacto** y luego seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-173">In the **Add Module** dialog box, select the **Shipping address**, **Delivery options**, **Checkout section container**, and **Contact information** modules, and then select **OK**.</span></span>
1. <span data-ttu-id="d34e4-174">En el módulo **Contenedor de sección de finalización de compra**, seleccione los puntos suspensivos (**...**) y después seleccione **Agregar módulo**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-174">In the **Checkout section container** module, select the ellipsis (**...**), and then select **Add Module**.</span></span>
1. <span data-ttu-id="d34e4-175">En el cuadro de diálogo **Agregar módulo**, seleccione los módulos **Tarjeta regalo**, **Fidelidad** y **Pago** y, a continuación, **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="d34e4-175">In the **Add Module** dialog box, select the **Gift card**, **Loyalty**, and **Payment** modules, and then select **OK**.</span></span> <span data-ttu-id="d34e4-176">De esta manera, asegúrese de que todos los métodos de pago aparecen juntos en una sección.</span><span class="sxs-lookup"><span data-stu-id="d34e4-176">In this way, you make sure that all the payment methods appear together in a section.</span></span>
1. <span data-ttu-id="d34e4-177">Seleccione **Guardar** y luego seleccione **Vista previa** para previsualizar el fragmento.</span><span class="sxs-lookup"><span data-stu-id="d34e4-177">Select **Save**, and then select **Preview** to preview the fragment.</span></span> <span data-ttu-id="d34e4-178">Es posible que los módulos que no tienen un contexto de carro no se representen en la vista previa.</span><span class="sxs-lookup"><span data-stu-id="d34e4-178">Some modules that don't have a cart context might not be rendered in the preview.</span></span>
1. <span data-ttu-id="d34e4-179">Seleccione **Finalizar edición** para comprobar en el fragmento y luego seleccione **Publicar** para publicarlo.</span><span class="sxs-lookup"><span data-stu-id="d34e4-179">Select **Finish editing** to check in the fragment, and then select **Publish** to publish it.</span></span>
1. <span data-ttu-id="d34e4-180">Cree una plantilla que use el nuevo fragmento de finalización de compra.</span><span class="sxs-lookup"><span data-stu-id="d34e4-180">Create a template that uses the new checkout fragment.</span></span>
1. <span data-ttu-id="d34e4-181">Cree una página de finalización de compra que use la nueva plantilla.</span><span class="sxs-lookup"><span data-stu-id="d34e4-181">Create a checkout page that uses the new template.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="d34e4-182">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="d34e4-182">Additional resources</span></span>

[<span data-ttu-id="d34e4-183">Visión general de kit de inicio</span><span class="sxs-lookup"><span data-stu-id="d34e4-183">Starter kit overview</span></span>](starter-kit-overview.md)

[<span data-ttu-id="d34e4-184">Módulo Contenedor</span><span class="sxs-lookup"><span data-stu-id="d34e4-184">Container module</span></span>](add-container-module.md)

[<span data-ttu-id="d34e4-185">Módulo de cuadro de compra</span><span class="sxs-lookup"><span data-stu-id="d34e4-185">Buy box module</span></span>](add-buy-box.md)

[<span data-ttu-id="d34e4-186">Módulo de carro</span><span class="sxs-lookup"><span data-stu-id="d34e4-186">Cart module</span></span>](add-cart-module.md)

[<span data-ttu-id="d34e4-187">Módulo de confirmación de pedido</span><span class="sxs-lookup"><span data-stu-id="d34e4-187">Order confirmation module</span></span>](order-confirmation-module.md)

[<span data-ttu-id="d34e4-188">Módulo de encabezado</span><span class="sxs-lookup"><span data-stu-id="d34e4-188">Header module</span></span>](author-header-module.md)

[<span data-ttu-id="d34e4-189">Módulo de pie de página</span><span class="sxs-lookup"><span data-stu-id="d34e4-189">Footer module</span></span>](author-footer-module.md)
