---
title: Calcular la disponibilidad de inventario para canales comerciales
description: Este tema describe cómo una empresa puede usar Microsoft Dynamics 365 Commerce para ver la disponibilidad inmediata estimada de productos en los canales en línea y de la tienda.
author: hhainesms
ms.date: 04/23/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application User
ms.reviewer: v-chgri
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: hhaines
ms.search.validFrom: 2020-02-11
ms.dyn365.ops.version: Release 10.0.10
ms.openlocfilehash: fdf6df7e393bcc401e770bd1b8afcaedcadc2660
ms.sourcegitcommit: 593438a145672c55ff6a910eabce2939300b40ad
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/23/2021
ms.locfileid: "5937443"
---
# <a name="calculate-inventory-availability-for-retail-channels"></a><span data-ttu-id="9ea39-103">Calcular la disponibilidad de inventario para canales comerciales</span><span class="sxs-lookup"><span data-stu-id="9ea39-103">Calculate inventory availability for retail channels</span></span>

[!include [banner](../includes/banner.md)]
[!include [banner](includes/preview-banner.md)]

<span data-ttu-id="9ea39-104">Este tema describe cómo una empresa puede usar Microsoft Dynamics 365 Commerce para ver la disponibilidad inmediata estimada de productos en los canales en línea y de la tienda.</span><span class="sxs-lookup"><span data-stu-id="9ea39-104">This topic describes how a company can use Microsoft Dynamics 365 Commerce to view estimated on-hand availability for products in the online and store channels.</span></span>

## <a name="accuracy-of-inventory-availability"></a><span data-ttu-id="9ea39-105">Precisión de la disponibilidad de inventario</span><span class="sxs-lookup"><span data-stu-id="9ea39-105">Accuracy of inventory availability</span></span>

<span data-ttu-id="9ea39-106">Commerce utiliza múltiples servidores y bases de datos para garantizar la escalabilidad y el rendimiento.</span><span class="sxs-lookup"><span data-stu-id="9ea39-106">Commerce uses multiple servers and databases to ensure scalability and performance.</span></span> <span data-ttu-id="9ea39-107">Por lo tanto, es importante que comprenda que los valores de inventario disponibles que se proporcionan a través de la aplicación de punto de venta (PDV), las interfaces de programación de aplicaciones (API) de disponibilidad de inventario de comercio electrónico y las páginas de inventario disponibles en la sede de Commerce podrían no ser 100 % precisas en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="9ea39-107">Therefore, it's important that you understand that the available inventory values that are provided through the point of sale (POS) application, the e-commerce inventory availability application programming interfaces (APIs), and the on-hand inventory pages in Commerce headquarters might not be 100 percent accurate in real time.</span></span> <span data-ttu-id="9ea39-108">Si las transacciones que se crean para productos en el canal en línea o en la tienda aún no se han sincronizado con la sede central, las páginas de inventario disponibles en la sede central podrían no mostrar un valor de inventario preciso en tiempo real para esos productos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-108">If transactions that are created for products in the online or store channel haven't yet been synced to headquarters, the on-hand inventory pages in headquarters might not show an accurate real-time inventory value for those products.</span></span> <span data-ttu-id="9ea39-109">Por el contrario, si configuró su empresa para que los usuarios de la sede central u otras aplicaciones integradas puedan vender, recibir, devolver o ajustar el inventario de una tienda o almacén en línea, es posible que el PDV o el canal en línea no tengan toda la información necesaria para mostrar valores disponibles en tiempo real precisos para los artículos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-109">Conversely, if you configured your company so that users in headquarters or other integrated applications can sell, receive, return, or otherwise adjust inventory out of a store or online warehouse, the POS or online channel might not have all the information that is required to show accurate real-time values for items.</span></span>

<span data-ttu-id="9ea39-110">Es fundamental que comprenda que todos los datos de disponibilidad disponibles que se proporcionan durante el día operativo se consideran un valor estimado.</span><span class="sxs-lookup"><span data-stu-id="9ea39-110">It's critical to understand that all on-hand availability data that is provided during the operational day is considered an estimated value.</span></span> <span data-ttu-id="9ea39-111">Por lo tanto, si intenta comparar la información de inventario disponible que la aplicación proporciona con el inventario físico real en los estantes, o si intenta comparar los valores disponibles que se muestran en el PDV con los datos disponibles que encuentra para el mismo almacén en la sede central, los valores pueden diferir.</span><span class="sxs-lookup"><span data-stu-id="9ea39-111">Therefore, if you try to compare the on-hand inventory information that the application provides with actual physical inventory on the shelves, or if you try to compare the on-hand values that are shown in POS with the on-hand data that you find for the same warehouse in headquarters, the values might differ.</span></span> <span data-ttu-id="9ea39-112">Se espera esta diferencia durante el día operativo y no debe considerarse un problema.</span><span class="sxs-lookup"><span data-stu-id="9ea39-112">This difference during the operational day is expected and should not be considered an issue.</span></span> <span data-ttu-id="9ea39-113">Si desea auditar los datos y asegurarse de que los valores que se proporcionan en el PDV, las API y la sede central coinciden con las unidades físicas reales que encuentra en su tienda o estanterías de almacén, el mejor momento para hacerlo es después de que las operaciones del canal se hayan detenido para ese día y todas las transacciones se hayan sincronizado correctamente entre la sede central y los canales.</span><span class="sxs-lookup"><span data-stu-id="9ea39-113">If you want to audit data and make sure that the values provided in POS, APIs, and headquarters match the actual physical units that you find on your store or warehouse shelves, the best time to do it is after channel operations have stopped for the day and all transactions have been correctly synced between headquarters and the channels.</span></span>

## <a name="channel-side-inventory-calculation"></a><span data-ttu-id="9ea39-114">Cálculo de inventario del lado del canal</span><span class="sxs-lookup"><span data-stu-id="9ea39-114">Channel-side inventory calculation</span></span>

<span data-ttu-id="9ea39-115">El cálculo del inventario del lado del canal es un mecanismo que toma los datos de inventario del último canal conocidos en la sede de Commerce como línea de base y luego toma en cuenta los cambios de inventario adicionales que ocurrieron en el lado del canal que no están incluidos en esa línea de base para calcular un inventario disponible con estimación casi en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="9ea39-115">The channel-side inventory calculation is a mechanism that takes the last-known channel inventory data in Commerce headquarters as a baseline, and then factors in additional inventory changes that occurred on the channel side that aren't included in that baseline to calculate a near-real-time estimated on-hand inventory.</span></span> 

<span data-ttu-id="9ea39-116">Los siguientes cambios de inventario se consideran actualmente en la lógica de cálculo de inventario del lado del canal:</span><span class="sxs-lookup"><span data-stu-id="9ea39-116">The following inventory changes are currently considered in the channel-side inventory calculation logic:</span></span>

- <span data-ttu-id="9ea39-117">Inventario vendido a través de pedidos de pago y recogida en la tienda</span><span class="sxs-lookup"><span data-stu-id="9ea39-117">Inventory sold through cash-and-carry orders in store</span></span>
- <span data-ttu-id="9ea39-118">Inventario vendido a través de pedidos de clientes en la tienda o canal en línea</span><span class="sxs-lookup"><span data-stu-id="9ea39-118">Inventory sold through customer orders in store or online channel</span></span>
- <span data-ttu-id="9ea39-119">Inventario devuelto a la tienda</span><span class="sxs-lookup"><span data-stu-id="9ea39-119">Inventory returned to store</span></span>
- <span data-ttu-id="9ea39-120">Inventario cumplimentado (recoger, embalar, enviar) desde el almacén</span><span class="sxs-lookup"><span data-stu-id="9ea39-120">Inventory fulfilled (pick, pack, ship) from store warehouse</span></span>

<span data-ttu-id="9ea39-121">Para utilizar el cálculo de inventario del lado del canal, como requisito previo, una instantánea periódica de los datos de inventario de la sede creada por el trabajo **Disponibilidad de producto** debe enviarse a las bases de datos del canal.</span><span class="sxs-lookup"><span data-stu-id="9ea39-121">To use the channel-side inventory calculation, as a prerequisite a periodic snapshot of inventory data from headquarters created by the **Product availability** job must be sent to the channel databases.</span></span> <span data-ttu-id="9ea39-122">La instantánea representa la información que la sede central tiene sobre la disponibilidad de inventario para una combinación específica de un producto o variante de producto y un almacén.</span><span class="sxs-lookup"><span data-stu-id="9ea39-122">The snapshot represents the information that headquarters has about inventory availability for a specific combination of a product or product variant and a warehouse.</span></span> <span data-ttu-id="9ea39-123">Incluye solo las transacciones de inventario que se procesaron y registraron en la sede central en el momento en que se tomó la instantánea, y es posible que no sea 100 % precisa en tiempo real, debido al constante procesamiento de ventas que se produce en los servidores distribuidos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-123">It includes only the inventory transactions that were processed and posted in headquarters at the time when the snapshot was taken, and it might not be 100 percent accurate in real time because of the constant sales processing that occurs across distributed servers.</span></span>

- <span data-ttu-id="9ea39-124">Si el inventario se vendió para un producto en una tienda a través de una venta de pago y recogida o pedido asíncrono de cliente en la aplicación PDV, la sede central no tendrá inmediatamente información sobre la transacción de incidencia de inventario relacionada para la venta.</span><span class="sxs-lookup"><span data-stu-id="9ea39-124">If inventory was sold for a product in a store through a cash-and-carry or asynchronous customer order sale in the POS application, headquarters won't immediately have information about the related inventory issue transaction for the sale.</span></span> <span data-ttu-id="9ea39-125">La sede central tendrá información sobre el inventario que se vende para este tipo de ventas en la tienda solo después de que el trabajo P cargue la transacción relacionada de la base de datos de canales de la tienda en la sede central y los pedidos de ventas relacionados se creen a través de la contabilización de estados de cuenta o los procesos de registro de suministro contabilización de alimentación por pequeñas cantidades.</span><span class="sxs-lookup"><span data-stu-id="9ea39-125">Headquarters will have information about the inventory that is sold for these types of store sales only after the P-job uploads the related transaction from the store's channel database into headquarters and the related sales orders are created through statement posting or the trickle feed posting processes.</span></span> <span data-ttu-id="9ea39-126">El proceso de creación de los pedidos en la sede central crea las transacciones de inventario relacionadas.</span><span class="sxs-lookup"><span data-stu-id="9ea39-126">The process of creating the orders in headquarters creates the related inventory transactions.</span></span> 
- <span data-ttu-id="9ea39-127">Para los pedidos del canal de comercio electrónico, la sede central tiene información sobre las transacciones de inventario solo después de que las transacciones se envían a la sede central a través del trabajo P y se completa el proceso de sincronización de pedidos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-127">For e-commerce channel orders, headquarters has information about the inventory transactions only after the transactions are sent to headquarters through the P-job and the order synchronization process is completed.</span></span>

<span data-ttu-id="9ea39-128">Para tomar una instantánea del inventario en la sede central, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-128">To take a snapshot of inventory in Commerce headquarters, follow these steps.</span></span>

1. <span data-ttu-id="9ea39-129">Vaya a **Retail y Commerce \> Retail y Commerce TI \> Productos e inventario \> Disponibilidad de producto**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-129">Go to **Retail and Commerce \> Retail and Commerce IT \> Products and inventory \> Product availability**.</span></span>
1. <span data-ttu-id="9ea39-130">Seleccione **Aceptar** para ejecutar el trabajo **Disponibilidad de producto**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-130">Select **OK** to run the **Product availability** job.</span></span> <span data-ttu-id="9ea39-131">También puede programar este trabajo para que se ejecute en lote.</span><span class="sxs-lookup"><span data-stu-id="9ea39-131">You can also schedule this job to run in batch.</span></span>

<span data-ttu-id="9ea39-132">Después de que el trabajo **Disponibilidad de producto** ha terminado de ejecutarse, los datos que se capturaron deben enviarse a las bases de datos del canal, de modo que se pueda considerar la última instantánea del inventario de la sede central en el cálculo del inventario disponible estimado.</span><span class="sxs-lookup"><span data-stu-id="9ea39-132">After the **Product availability** job has finished running, the data that was captured must be pushed to the channel databases, so that the latest headquarters inventory snapshot can be considered in the channel-side calculation of estimated on-hand inventory.</span></span>

<span data-ttu-id="9ea39-133">Para sincronizar los datos de la instantánea de la sede a las bases de datos de su canal, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-133">To sync snapshot data from headquarters to your channel databases, follow these steps.</span></span>

1. <span data-ttu-id="9ea39-134">Vaya a **Retail y Commerce \> TI de Retail y Commerce \> Programación de distribución**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-134">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="9ea39-135">Ejecute el trabajo **1130** (**Disponibilidad de producto**) para sincronizar los datos de la instantánea que el trabajo **Disponibilidad de producto** ha creado desde la sede central con las bases de datos de su canal.</span><span class="sxs-lookup"><span data-stu-id="9ea39-135">Run the **1130** (**Product availability**) job to sync the snapshot data that the **Product availability** job has created from headquarters to your channel databases.</span></span>

## <a name="inventory-availability-apis-for-e-commerce"></a><span data-ttu-id="9ea39-136">API de disponibilidad de inventario para comercio electrónico</span><span class="sxs-lookup"><span data-stu-id="9ea39-136">Inventory availability APIs for e-commerce</span></span>

<span data-ttu-id="9ea39-137">Commerce proporciona las siguientes API para escenarios de comercio electrónico, para consultar la disponibilidad de inventario de un producto:</span><span class="sxs-lookup"><span data-stu-id="9ea39-137">Commerce provides the following APIs for e-commerce scenarios to query inventory availability of a product:</span></span>

- <span data-ttu-id="9ea39-138">**GetEstimatedAvailability**: utilice esta API para consultar el inventario de un producto o variante de producto en el almacén del canal en línea o en los almacenes que están vinculados al grupo de cumplimiento del canal en línea.</span><span class="sxs-lookup"><span data-stu-id="9ea39-138">**GetEstimatedAvailability** – Use this API to query inventory for a product or product variant in the online channel warehouse or warehouses that are linked to the online channel's fulfillment group.</span></span>
- <span data-ttu-id="9ea39-139">**GetEstimatedProductWarehouseAvailability**: use esta API para consultar el inventario para un producto o variante de producto de un almacén específico.</span><span class="sxs-lookup"><span data-stu-id="9ea39-139">**GetEstimatedProductWarehouseAvailability** – Use this API to query inventory for a product or product variant from a specific warehouse.</span></span>

> [!NOTE]
> <span data-ttu-id="9ea39-140">Estas API reemplazan las API **GetProductAvailabilities** y **GetAvailableInventoryNearby** en la versión de Commerce 10.0.7 y anteriores.</span><span class="sxs-lookup"><span data-stu-id="9ea39-140">These APIs replace the **GetProductAvailabilities** and **GetAvailableInventoryNearby** APIs in Commerce release 10.0.7 and earlier.</span></span>

<span data-ttu-id="9ea39-141">Ambas API utilizan internamente la lógica de cálculo del lado del canal y devuelven estimaciones de cantidades **físicamente disponibles**, la cantidad **total disponible**, la **unidad de medida (UoM)** y el **nivel del inventario** para el producto solicitado y el almacén.</span><span class="sxs-lookup"><span data-stu-id="9ea39-141">Both APIs internally use the channel-side calculation logic and return estimated **physical available** quantity, **total available** quantity, **unit of measure (UoM)**, and **inventory level** for the requested product and warehouse.</span></span> <span data-ttu-id="9ea39-142">Los valores devuelltos se pueden mostrar en su sitio de comercio electrónico si lo desea, o se pueden utilizar para desencadenar otra lógica de negocios en su sitio de comercio electrónico.</span><span class="sxs-lookup"><span data-stu-id="9ea39-142">The returned values can be shown on your e-commerce site if you want, or they can be used to trigger other business logic on your e-commerce site.</span></span> <span data-ttu-id="9ea39-143">Por ejemplo, puede evitar la compra de productos con un nivel de inventario "agotado".</span><span class="sxs-lookup"><span data-stu-id="9ea39-143">For example, you can prevent the purchase of products with an "out of stock" inventory level.</span></span>

<span data-ttu-id="9ea39-144">Aunque otras API que están disponibles en Commerce pueden ir directamente a la sede central para obtener cantidades disponibles de productos, no recomendamos que se usen en un entorno de comercio electrónico debido a posibles problemas de rendimiento y el impacto relacionado que estas solicitudes frecuentes pueden tener en sus servidores de la sede central.</span><span class="sxs-lookup"><span data-stu-id="9ea39-144">Although other APIs that are available in Commerce can go directly to headquarters to fetch on-hand quantities for products, we don't recommend that they be used in an e-commerce environment because of potential performance issues and the impact that these frequent requests can have on your headquarters servers.</span></span> <span data-ttu-id="9ea39-145">Además, con el cálculo del lado del canal, las dos API mencionadas anteriormente pueden proporcionar una estimación más precisa de la disponibilidad de un producto al tener en cuenta las transacciones creadas en los canales que aún no conoce la sede central.</span><span class="sxs-lookup"><span data-stu-id="9ea39-145">Additionally, with channel-side calculation, the two APIs mentioned above can provide a more accurate estimate of a product's availability by taking into account the transactions created in the channels that aren’t yet known to headquarters.</span></span>

<span data-ttu-id="9ea39-146">Para utilizar las dos API, debe habilitar la característica **Cálculo optimizado de disponibilidad de producto** a través del espacio de trabajo **Administración de características** en la sede central.</span><span class="sxs-lookup"><span data-stu-id="9ea39-146">To use the two APIs, you must enable the **Optimized product availability calculation** feature through the **Feature management** workspace in headquarters.</span></span> <span data-ttu-id="9ea39-147">Si sus canales en línea y de tienda utilizan los mismos almacenes de cumplimiento, también debe habilitar la característica **Lógica mejorada de cálculo de inventario del lado del canal de comercio electrónico** para tener la lógica de cálculo del lado del canal dentro de las dos API para tener en cuenta las transacciones no contabilizadas (pago y recogida, pedidos de clientes, devoluciones) creadas en el canal de la tienda.</span><span class="sxs-lookup"><span data-stu-id="9ea39-147">If your online and store channels use the same fulfillment warehouses, you must also enable the **Enhanced e-Commerce channel-side inventory calculation logic** feature to have the channel-side calculation logic within the two APIs to factor in the unposted transactions (cash-and-carry, customer orders, returns) created in the store channel.</span></span> <span data-ttu-id="9ea39-148">Necesitará ejecutar el trabajo **1070** (**Configuración de canal**) después de habilitar estas funciones.</span><span class="sxs-lookup"><span data-stu-id="9ea39-148">You will need to run the **1070** (**Channel configuration**) job after enabling these features.</span></span>

<span data-ttu-id="9ea39-149">Para definir cómo se debe devolver la cantidad de producto en la salida de la API, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-149">To define how product quantity should be returned in the API output, follow these steps.</span></span>

1. <span data-ttu-id="9ea39-150">Vaya a **Retail y Commerce \> Configuración de sede central \> Parámetros \> Parámetros de Commerce**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-150">Go to **Retail and Commerce \> Headquarters setup \> Parameters \> Commerce parameters**.</span></span>
1. <span data-ttu-id="9ea39-151">Seleccione la pestaña **Inventario** y luego, en la ficha desplegable **API de disponibilidad de inventario para comercio electrónico**, configure el valor de la opción **Cantidad en salida de API**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-151">Select the **Inventory** tab, and then on the **Inventory availability APIs for e-Commerce** FastTab configure the value of the **Quantity in API output** setting.</span></span>
1. <span data-ttu-id="9ea39-152">Ejecute el trabajo **1070** (**Configuración de canal**) para sincronizar la última opción en los canales.</span><span class="sxs-lookup"><span data-stu-id="9ea39-152">Run the **1070** (**Channel configuration**) job to sync the latest setting to channels.</span></span>

<span data-ttu-id="9ea39-153">La opción **Cantidad en salida de API** ofrece tres opciones:</span><span class="sxs-lookup"><span data-stu-id="9ea39-153">The **Quantity in API output** setting provides three options:</span></span>

- <span data-ttu-id="9ea39-154">**Devolver la cantidad de inventario**: la cantidad física disponible y la cantidad total disponible de un producto solicitado se devuelven en la salida de la API.</span><span class="sxs-lookup"><span data-stu-id="9ea39-154">**Return inventory quantity** - Physical available and total available quantity of a requested product are returned in API output.</span></span>
- <span data-ttu-id="9ea39-155">**Devolver la cantidad de inventario restando el búfer de inventario**: la cantidad devuelta en la salida de la API se ajusta restando el valor del búfer de inventario.</span><span class="sxs-lookup"><span data-stu-id="9ea39-155">**Return inventory quantity subtracting inventory buffer** - The quantity returned in the API output is adjusted by subtracting the inventory buffer value.</span></span> <span data-ttu-id="9ea39-156">Para obtener más información sobre el búfer de inventario, consulte [Configurar búferes de inventario y niveles de inventario](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="9ea39-156">For more information about the inventory buffer, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>
- <span data-ttu-id="9ea39-157">**No devolver la cantidad de inventario**: solo se devuelve el nivel de inventario en la salida de la API.</span><span class="sxs-lookup"><span data-stu-id="9ea39-157">**Not return inventory quantity** - Only the inventory level is returned in the API output.</span></span> <span data-ttu-id="9ea39-158">Para obtener más información sobre los niveles de inventario, consulte [Configurar búferes de inventario y niveles de inventario](inventory-buffers-levels.md).</span><span class="sxs-lookup"><span data-stu-id="9ea39-158">For more information about inventory levels, see [Configure inventory buffers and inventory levels](inventory-buffers-levels.md).</span></span>

<span data-ttu-id="9ea39-159">Puede usar el parámetro de API `QuantityUnitTypeValue` para especificar el tipo de unidad en el que le gustaría que las API devuelvan la cantidad.</span><span class="sxs-lookup"><span data-stu-id="9ea39-159">You can use the `QuantityUnitTypeValue` API parameter to specify the unit type in which you would like the APIs to return quantity.</span></span> <span data-ttu-id="9ea39-160">Este parámetro es compatible con las opciones **unidad de inventario** (predeterminada)**, unidad de compra** y **unidad de venta**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-160">This parameter supports the **inventory unit** (default), **purchase unit**, and **sell unit** options.</span></span> <span data-ttu-id="9ea39-161">La cantidad devuelta se redondea a la precisión definida de la unidad de medida (UOM) correspondiente en la sede.</span><span class="sxs-lookup"><span data-stu-id="9ea39-161">The returned quantity is rounded to the defined precision of the corresponding unit of measure (UOM) in headquarters.</span></span>

<span data-ttu-id="9ea39-162">La API **GetEstimatedAvailability** ofrece los siguientes parámetros de entrada para admitir diferentes escenarios de consulta:</span><span class="sxs-lookup"><span data-stu-id="9ea39-162">The **GetEstimatedAvailability** API offers the following input parameters to support different query scenarios:</span></span>

- <span data-ttu-id="9ea39-163">`DefaultWarehouseOnly`: utilice este parámetro para consultar el inventario de un producto en el almacén predeterminado del canal en línea.</span><span class="sxs-lookup"><span data-stu-id="9ea39-163">`DefaultWarehouseOnly` - Use this parameter to query inventory for a product in the online channel's default warehouse.</span></span> 
- <span data-ttu-id="9ea39-164">`FilterByChannelFulfillmentGroup` y `SearchArea`: utilice estos dos parámetros para consultar el inventario de un producto desde todas las ubicaciones de recogida dentro de un área de búsqueda específica, según `longitude`, `latitude` y `radius`.</span><span class="sxs-lookup"><span data-stu-id="9ea39-164">`FilterByChannelFulfillmentGroup` and `SearchArea` - Use these two parameters to query inventory for a product from all pickup locations within a specific search area, based on `longitude`, `latitude`, and `radius`.</span></span> 
- <span data-ttu-id="9ea39-165">`FilterByChannelFulfillmentGroup` y `DeliveryModeTypeFilterValue`: utilice estos dos parámetros para consultar el inventario de un producto de almacenes específicos que están vinculados al grupo de cumplimiento de un canal en línea y están configurados para admitir ciertos modos de entrega.</span><span class="sxs-lookup"><span data-stu-id="9ea39-165">`FilterByChannelFulfillmentGroup` and `DeliveryModeTypeFilterValue` - Use these two parameters to query inventory for a product from specific warehouses that are linked to an online channel's fulfillment group and are configured to support certain modes of delivery.</span></span> <span data-ttu-id="9ea39-166">El parámetro `DeliveryModeTypeFilterValue` admite las opciones **todo** (predeterminado), **envío** y **recogida**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-166">The `DeliveryModeTypeFilterValue` parameter supports the **all** (default), **shipping**, and **pickup** options.</span></span> <span data-ttu-id="9ea39-167">Por ejemplo, en un escenario en el que un pedido en línea se puede cumplimentar desde varios almacenes de envío, puede usar estos dos parámetros para consultar la disponibilidad de inventario de un producto en todos esos almacenes de envío.</span><span class="sxs-lookup"><span data-stu-id="9ea39-167">For example, in a scenario where an online order can be fulfilled from multiple shipping warehouses, you can use these two parameters to query a product's inventory availability in all of those shipping warehouses.</span></span> <span data-ttu-id="9ea39-168">En este caso, la API devuelve la cantidad disponible del producto y el nivel de inventario en cada uno de los almacenes de envío, más una cantidad agregada y un nivel de inventario agregado de todos los almacenes de envío en el ámbito de la consulta.</span><span class="sxs-lookup"><span data-stu-id="9ea39-168">The API in this case returns the product's on-hand quantity and inventory level in each of the shipping warehouses, plus an aggregated quantity and an aggregated inventory level from all shipping warehouses in the query scope.</span></span>
 
<span data-ttu-id="9ea39-169">Los módulos de cuadro de compra, selector de tienda, lista de deseos, carrito e icono de carrito de Commerce utilizan las API y los parámetros mencionados anteriormente para mostrar mensajes de nivel de inventario en el sitio de comercio electrónico.</span><span class="sxs-lookup"><span data-stu-id="9ea39-169">The Commerce buy box, store selector, wishlist, cart, and cart icon modules consume the APIs and parameters mentioned above to display inventory level messages across the e-commerce site.</span></span> <span data-ttu-id="9ea39-170">El creador de sitios de Commerce proporciona varias configuraciones de inventario para controlar la comercialización y el comportamiento de compra.</span><span class="sxs-lookup"><span data-stu-id="9ea39-170">Commerce site builder provides various inventory settings to control merchandising and purchase behavior.</span></span> <span data-ttu-id="9ea39-171">Para obtener más información, consulte [Aplicar configuración de inventario](inventory-settings.md).</span><span class="sxs-lookup"><span data-stu-id="9ea39-171">For more information, see [Apply inventory settings](inventory-settings.md).</span></span>

## <a name="pos-inventory-lookup-with-channel-side-calculation"></a><span data-ttu-id="9ea39-172">Búsqueda de inventario de PDV con cálculo del lado del canal</span><span class="sxs-lookup"><span data-stu-id="9ea39-172">POS inventory lookup with channel-side calculation</span></span>

<span data-ttu-id="9ea39-173">En la versión 10.0.9 y anteriores de Commerce, la operación **Búsqueda de inventario** en PDV utiliza una llamada de servicio en tiempo real a la sede central para obtener información de inventario para el producto seleccionado, tanto para la tienda actual del usuario como para cualquier otra tienda que esté configurada para el grupo de cumplimiento como parte de la configuración del canal para la tienda.</span><span class="sxs-lookup"><span data-stu-id="9ea39-173">In the Commerce release 10.0.9 and earlier, the **Inventory lookup** operation in POS used a real-time service call to headquarters to get inventory information for the selected product for both the user's current store and any other stores that are configured for the fulfillment group as part of the channel configuration for the store.</span></span> <span data-ttu-id="9ea39-174">En la versión 10.0.10 de Commerce y posteriores, puede desactivar las llamadas de servicio en tiempo real a la sede central y, en su lugar, utilizar el cálculo del lado del canal en el servidor de Commerce para determinar el inventario disponible que está disponible físicamente para la tienda y cualquier otra ubicación definida en el grupo de cumplimentación.</span><span class="sxs-lookup"><span data-stu-id="9ea39-174">In Commerce release 10.0.10 and later, you can turn off real-time service calls to headquarters and instead use channel-side calculation on the Commerce server to determine the on-hand inventory that is physically available for the store and any other locations that are defined in the fulfillment group.</span></span> <span data-ttu-id="9ea39-175">Esta configuración de inventario calculada por canal también es útil para ubicaciones donde la conectividad a Internet no es fiable, ya que no tiene que estar en línea para obtener búsquedas de inventario desde la sede central.</span><span class="sxs-lookup"><span data-stu-id="9ea39-175">This channel-calculated inventory configuration is also useful for locations where internet connectivity is unreliable, because you don't have to be online to get inventory lookups headquarters.</span></span>

<span data-ttu-id="9ea39-176">Cuando el cálculo del lado del canal está configurado y administrado correctamente, puede proporcionar una estimación más fiable del inventario de la tienda actual, ya que utiliza los datos transaccionales que se encuentran en la base de datos del canal de Commerce, pero de los cuales la sede central pudiera no tener información aún.</span><span class="sxs-lookup"><span data-stu-id="9ea39-176">When channel-side calculation is correctly configured and managed, it can provide a more reliable estimate of the current store inventory because it uses the transactional data that is in the Commerce channel database but that headquarters might not yet have information about.</span></span> <span data-ttu-id="9ea39-177">Por ejemplo, si utiliza la llamada de servicio en tiempo real existente para búsquedas de inventario en PDV, la sede central probablemente todavía no tendrá información sobre una venta de pago y recogida que acaba de ocurrir para un producto.</span><span class="sxs-lookup"><span data-stu-id="9ea39-177">For example, if you use the existing real-time service call for inventory lookups in POS, headquarters probably won't yet have information about a cash-and-carry sale that just occurred for a product.</span></span> <span data-ttu-id="9ea39-178">Por lo tanto, el valor de inventario disponible que devuelve la sede central para ese producto probablemente excederá el inventario disponible real de la tienda en una unidad.</span><span class="sxs-lookup"><span data-stu-id="9ea39-178">Therefore, the on-hand inventory value that headquarters returns for that product will probably exceed the store's actual on-hand inventory by one unit.</span></span> <span data-ttu-id="9ea39-179">Sin embargo, si usa el cálculo del lado del canal, la venta de efectivo y transporte puede incluirse en el cálculo y deducirse del valor disponible que se muestra.</span><span class="sxs-lookup"><span data-stu-id="9ea39-179">However, if you use channel-side calculation, the cash-and-carry sale can be factored into the calculation and deducted from the on-hand value that is shown.</span></span> <span data-ttu-id="9ea39-180">Aunque los valores que proporcionan tanto el cálculo del lado del canal como la llamada de servicio en tiempo real son solo estimaciones del inventario disponible, el valor que proporciona el cálculo del lado del canal es mucho más probable que sea preciso para la tienda actual.</span><span class="sxs-lookup"><span data-stu-id="9ea39-180">Although the values that both the channel-side calculation and the real-time service call provide are only estimates of on-hand inventory, the value that the channel-side calculation provides is much more likely to be accurate for the current store.</span></span>

<span data-ttu-id="9ea39-181">Para configurar la operación de PDV **Búsqueda de inventario** en la sede para utilizar la lógica de cálculo del lado del canal y desactivar la llamada de servicio en tiempo real, siga estos pasos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-181">To configure the POS **Inventory lookup** operation in headquarters to use the channel-side calculation logic and turn off real-time service call, follow these steps.</span></span>

1. <span data-ttu-id="9ea39-182">Vaya a **Retail y Commerce \> Configuración de canal \> Configuración de PDV \> Perfiles de PDV \> Perfiles de funcionalidad**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-182">Go to **Retail and Commerce \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**.</span></span>
1. <span data-ttu-id="9ea39-183">Seleccione un perfil de funcionalidad.</span><span class="sxs-lookup"><span data-stu-id="9ea39-183">Select a functionality profile.</span></span>
1. <span data-ttu-id="9ea39-184">En la ficha desplegable **Funciones**, en la sección **Cálculo de disponibilidad de inventario**, cambie el valor de **Modo de cálculo de disponibilidad de inventario** de **Servicio en tiempo real** a **Canal**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-184">On the **Functions** FastTab, in the **Inventory availability calculation** section, change the value of **Inventory availability calculation mode** from **Real time service** to **Channel**.</span></span> <span data-ttu-id="9ea39-185">Por defecto, todos los perfiles de funcionalidad utilizan llamadas de servicio en tiempo real.</span><span class="sxs-lookup"><span data-stu-id="9ea39-185">By default, all functionality profiles use real-time service calls.</span></span> <span data-ttu-id="9ea39-186">Debe cambiar el valor de este campo si desea utilizar la lógica de cálculo del lado del canal.</span><span class="sxs-lookup"><span data-stu-id="9ea39-186">You must change the value of this field if you want to use channel-side calculation logic.</span></span> <span data-ttu-id="9ea39-187">Todas las tiendas minoristas que estén vinculadas al perfil de funcionalidad seleccionado se verán afectadas por este cambio.</span><span class="sxs-lookup"><span data-stu-id="9ea39-187">Every retail store that is linked to the selected functionality profile will be affected by this change.</span></span>

<span data-ttu-id="9ea39-188">Luego debe sincronizar los cambios en los canales a través del proceso de programación de distribución en la sede central siguiendo estos pasos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-188">You must then sync the changes to the channels through the distribution schedule process in headquarters by following these steps.</span></span>

1. <span data-ttu-id="9ea39-189">Vaya a **Retail y Commerce \> TI de Retail y Commerce \> Programación de distribución**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-189">Go to **Retail and Commerce \> Retail and Commerce IT \> Distribution schedule**.</span></span>
1. <span data-ttu-id="9ea39-190">Ejecute el trabajo **1070** (**Configuración del canal**) .</span><span class="sxs-lookup"><span data-stu-id="9ea39-190">Run the **1070** (**Channel configuration**) job.</span></span>

<span data-ttu-id="9ea39-191">Una vez completada la configuración, la información que se proporciona sobre el inventario físicamente disponible ya no utiliza una llamada de servicio en tiempo real cuando un usuario en la aplicación PDV utiliza la operación **Búsqueda de inventario** (vistas estándar y matriciales).</span><span class="sxs-lookup"><span data-stu-id="9ea39-191">After the configuration is completed, the information that is provided about physically available inventory no longer uses a real-time service call when a user in the POS application uses the **Inventory lookup** operation (standard and matrix views).</span></span> <span data-ttu-id="9ea39-192">En cambio, los datos sobre el inventario físicamente disponible para la tienda actual y todas las tiendas en el grupo de cumplimiento se calculan en función de la última instantánea conocida que se entregó a la base de datos de canales desde Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="9ea39-192">Instead, data about physically available inventory for the current store and all the stores in the fulfillment group is calculated based on the last-known snapshot that was delivered to the channel database from Commerce Headquarters.</span></span> <span data-ttu-id="9ea39-193">El valor de la instantánea se refina aún más mediante el cálculo del lado del canal para ajustar el valor físicamente disponible, en función de las ventas adicionales o las transacciones de devolución que existen para el producto seleccionado en la base de datos del canal que no se incluyeron en la última instantánea sincronizada del trabajo 1130.</span><span class="sxs-lookup"><span data-stu-id="9ea39-193">The snapshot value is further refined by the channel-side calculation to adjust the physically available value, based on additional sales or return transactions that exist for the selected product in the channel database that were not included in the last synchronized snapshot from the 1130 job.</span></span> <span data-ttu-id="9ea39-194">Si la base de datos del canal no contiene datos transaccionales para ninguno de los almacenes o tiendas en el grupo de cumplimiento, no contiene transacciones adicionales que se puedan factorizar en un recalculo del valor.</span><span class="sxs-lookup"><span data-stu-id="9ea39-194">If the channel database doesn't contain transactional data for any of the warehouses or stores in the fulfillment group, it contains no additional transactions that can be factored into a recalculation of the value.</span></span> <span data-ttu-id="9ea39-195">Por lo tanto, la mejor estimación del inventario disponible que se puede mostrar para esos almacenes o tiendas son los datos de la última instantánea conocida de la sede de Commerce.</span><span class="sxs-lookup"><span data-stu-id="9ea39-195">Therefore, the best estimate of on-hand inventory that can be shown for those warehouses or stores is the data from the last-known Commerce Headquarters snapshot.</span></span>

<span data-ttu-id="9ea39-196">Las pantallas **Cumplimiento de la orden** de PDV también aprovechan el cálculo del lado del canal para mostrar el inventario disponible de artículos cuando se selecciona una línea de cumplimiento de pedido y un usuario ve el panel **Detalles** para el inventario disponible para el artículo seleccionado.</span><span class="sxs-lookup"><span data-stu-id="9ea39-196">The **Order fulfillment** screens of POS also leverage the channel side calculation to show on-hand inventory for items when an order fulfillment line is selected and a user views the **Details** panel for on-hand inventory for the selected item.</span></span>

## <a name="optimize-your-inventory-data"></a><span data-ttu-id="9ea39-197">Optimice sus datos de inventario</span><span class="sxs-lookup"><span data-stu-id="9ea39-197">Optimize your inventory data</span></span>

<span data-ttu-id="9ea39-198">Para garantizar la mejor estimación posible del inventario, es fundamental que utilice los siguientes trabajos por lotes de Commerce y los ejecute con frecuencia:</span><span class="sxs-lookup"><span data-stu-id="9ea39-198">To ensure the best possible estimate of inventory, it's critical that you use the following Commerce batch jobs and run them frequently:</span></span>

- <span data-ttu-id="9ea39-199">**Trabajo P** - El trabajo P se encuentra en la página **Horarios de distribución** y debe ejecutarse con frecuencia.</span><span class="sxs-lookup"><span data-stu-id="9ea39-199">**P-job** – The P-job is found on the **Distribution schedules** page and should be run frequently.</span></span> <span data-ttu-id="9ea39-200">Este trabajo lleva los pedidos de comercio electrónico, los pedidos de clientes asíncronos que PDV creó y los pedidos de efectivo y transporte que los PDV crearon desde las bases de datos del canal a la sede de Commerce, para que puedan procesarse aún más.</span><span class="sxs-lookup"><span data-stu-id="9ea39-200">This job brings e-Commerce orders, asynchronous customer orders that POS created, and cash-and-carry orders that POS created from the channel databases into Commerce Headquarters, so that they can be processed further.</span></span> <span data-ttu-id="9ea39-201">Hasta que estos datos se sincronicen desde el canal a la sede de Commerce, la sede de Commerce no tiene información sobre los ajustes de inventario de los productos en los almacenes que resultan de esas transacciones.</span><span class="sxs-lookup"><span data-stu-id="9ea39-201">Until this data is synced from the channel to Commerce Headquarters, Commerce Headquarters has no information about inventory adjustments to products in the warehouses that result from those transactions.</span></span>
- <span data-ttu-id="9ea39-202">**Sincronizar pedidos** - Este trabajo procesa los datos transaccionales sin procesar en Commerce Headquarters que proporciona el trabajo P y convierte el comercio electrónico y las transacciones asíncronas de pedidos de clientes en pedidos de ventas en Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="9ea39-202">**Synchronize orders** – This job processes the raw transactional data in Commerce Headquarters that the P-job provides and converts e-Commerce and asynchronous customer order transactions into sales orders in Commerce Headquarters.</span></span> <span data-ttu-id="9ea39-203">Hasta que se procese este trabajo y se creen los pedidos de ventas, no se crearán transacciones de inventario.</span><span class="sxs-lookup"><span data-stu-id="9ea39-203">Until this job is processed and the sales orders are created, no inventory transactions are created.</span></span> <span data-ttu-id="9ea39-204">Por lo tanto, el inventario disponible en la sede de Commerce no considerará las transacciones.</span><span class="sxs-lookup"><span data-stu-id="9ea39-204">Therefore, on-hand inventory in Commerce Headquarters won't consider the transactions.</span></span>
- <span data-ttu-id="9ea39-205">**Calcular declaraciones transaccionales en lote** - Para las transacciones de efectivo y transporte que se crean en la tienda, el proceso de contabilización de alimentación por goteo garantiza que el inventario relacionado con las ventas se actualice de manera eficiente.</span><span class="sxs-lookup"><span data-stu-id="9ea39-205">**Calculate transactional statements in batch** – For cash-and-carry transactions that are created in the store, the trickle feed posting process ensures that inventory that is related to the sales is updated efficiently.</span></span> <span data-ttu-id="9ea39-206">Para obtener el procesamiento más eficiente de las transacciones de inventario para los pedidos de efectivo y transporte, asegúrese de configurar su sistema para usar [publicación de alimentación por goteo](./trickle-feed.md).</span><span class="sxs-lookup"><span data-stu-id="9ea39-206">To get the most efficient processing of inventory transactions for cash-and-carry orders, make sure that you configure your system to use [trickle feed posting](./trickle-feed.md).</span></span>
- <span data-ttu-id="9ea39-207">**Publicar extractos transaccionales en lote** - Este trabajo también es necesario para la publicación de alimentación por goteo.</span><span class="sxs-lookup"><span data-stu-id="9ea39-207">**Post transactional statements in batch** – This job is also required for trickle feed posting.</span></span> <span data-ttu-id="9ea39-208">Sigue el trabajo **Calcular declaraciones transaccionales en lote**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-208">It follows the **Calculate transactional statements in batch** job.</span></span> <span data-ttu-id="9ea39-209">Este trabajo publica sistemáticamente los extractos calculados, de modo que los pedidos de ventas para ventas en efectivo se llevan a cabo en la sede de Commerce y la sede de Commerce refleja con mayor precisión el inventario de su tienda.</span><span class="sxs-lookup"><span data-stu-id="9ea39-209">This job systematically posts the calculated statements, so that sales orders for cash-and-carry sales are created in Commerce Headquarters and Commerce Headquarters more accurately reflects your store's inventory.</span></span>
- <span data-ttu-id="9ea39-210">**Disponibilidad de producto** - Este trabajo crea la instantánea del inventario de Commerce Headquarters.</span><span class="sxs-lookup"><span data-stu-id="9ea39-210">**Product availability** – This job creates the snapshot of inventory from Commerce Headquarters.</span></span>
- <span data-ttu-id="9ea39-211">**1130 (disponibilidad del producto)** - Este trabajo se encuentra en la página **Programación de distribución** y debe ejecutarse inmediatamente después del trabajo **Disponibilidad de producto**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-211">**1130 (Product availability)** – This job is found on the **Distribution schedules** page and should be run immediately after the **Product availability** job.</span></span> <span data-ttu-id="9ea39-212">Este trabajo transporta los datos de la instantánea del inventario desde la sede de Commerce a las bases de datos del canal.</span><span class="sxs-lookup"><span data-stu-id="9ea39-212">This job transports the inventory snapshot data from Commerce Headquarters to the channel databases.</span></span>

> [!NOTE]
> - <span data-ttu-id="9ea39-213">Es práctica recomendada ejecutar los trabajos **Disponibilidad de productos** y **1130** cada hora, programar trabajos P, sincronizar pedidos y trabajos relacionados con el registro de suministro en pequeñas cantidades con la misma o mayor frecuencia.</span><span class="sxs-lookup"><span data-stu-id="9ea39-213">It is a best practice to run the **Product availability** and **1130** jobs on an hourly basis, and to schedule P-job, synchronize orders, and trickle feed posting-related jobs with the same or higher frequency.</span></span>
> - <span data-ttu-id="9ea39-214">Por razones de rendimiento, cuando los cálculos de disponibilidad de inventario del lado del canal se utilizan para realizar una solicitud de disponibilidad de inventario utilizando las API de comercio electrónico o la lógica de inventario del lado del canal PDV, el cálculo utiliza una memoria caché para determinar si ha pasado suficiente tiempo para justificar la ejecución de la lógica de cálculo de nuevo.</span><span class="sxs-lookup"><span data-stu-id="9ea39-214">For performance reasons, when channel-side inventory availability calculations are used to make an inventory availability request using the e-Commerce API's or the POS channel-side inventory logic, the calculation uses a cache to determine whether enough time has passed to justify running the calculation logic again.</span></span> <span data-ttu-id="9ea39-215">La caché predeterminada está fijada en 60 segundos.</span><span class="sxs-lookup"><span data-stu-id="9ea39-215">The default cache is set to 60 seconds.</span></span> <span data-ttu-id="9ea39-216">Por ejemplo, activó el cálculo del lado del canal para su tienda y vio el inventario disponible de un producto en la página **Búsqueda de inventario**.</span><span class="sxs-lookup"><span data-stu-id="9ea39-216">For example, you turned on channel-side calculation for your store and viewed the on-hand inventory for a product on the **Inventory lookup** page.</span></span> <span data-ttu-id="9ea39-217">Si luego se vende una unidad del producto, la página **Búsqueda de inventario** no mostrará el inventario reducido hasta que se haya borrado el caché.</span><span class="sxs-lookup"><span data-stu-id="9ea39-217">If one unit of the product is then sold, the **Inventory lookup** page won't show the reduced inventory until the cache has been cleared.</span></span> <span data-ttu-id="9ea39-218">Después de que los usuarios publiquen transacciones en PDV, deben esperar 60 segundos antes de verificar que se haya reducido el inventario disponible.</span><span class="sxs-lookup"><span data-stu-id="9ea39-218">After users post transactions in POS, they should wait 60 seconds before they verify that the on-hand inventory has been reduced.</span></span>

<span data-ttu-id="9ea39-219">Si su situación empresarial requiere un menor tiempo de caché, póngase en contacto con su representante de soporte de productos para obtener asistencia.</span><span class="sxs-lookup"><span data-stu-id="9ea39-219">If your business scenario requires a smaller cache time, contact your product support representative for assistance.</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]
