---
title: Sincronizar los contratos de proyectos y los proyectos directamente desde Project Service Automation a Finance and Operations
description: En este tema se describen las plantillas y las tareas subyacentes que se usan para sincronizar proyectos y contratos de proyectos directamente de Microsoft Dynamics 365 Project Service Automation a Dynamics 365 Finance.
author: KimANelson
manager: AnnBe
ms.date: 09/09/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-applications
ms.technology: ''
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations
ms.custom: 87983
ms.assetid: b454ad57-2fd6-46c9-a77e-646de4153067
ms.search.region: Global
ms.author: knelson
ms.search.validFrom: 2017-12-13
ms.dyn365.ops.version: AX 7.3.0
ms.openlocfilehash: 76c62f3a503ff2a8c93143390fc91ef81fbf7d0f
ms.sourcegitcommit: 2460d0da812c45fce67a061386db52e0ae46b0f3
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 09/30/2019
ms.locfileid: "2250470"
---
# <a name="synchronize-project-contracts-and-projects-directly-from-project-service-automation-to-finance-and-operations"></a><span data-ttu-id="4a9ab-103">Sincronizar los contratos de proyectos y los proyectos directamente desde Project Service Automation a Finance and Operations</span><span class="sxs-lookup"><span data-stu-id="4a9ab-103">Synchronize project contracts and projects directly from Project Service Automation to Finance and Operations</span></span>

[!include[banner](../includes/banner.md)]

<span data-ttu-id="4a9ab-104">En este tema se describen las plantillas y las tareas subyacentes que se usan para sincronizar proyectos y contratos de proyectos directamente de Dynamics 365 Project Service Automation a Dynamics 365 Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-104">This topic describes the template and underlying tasks that are used to synchronize project contracts and projects directly from Dynamics 365 Project Service Automation to Dynamics 365 Finance.</span></span>

> [!NOTE] 
> <span data-ttu-id="4a9ab-105">Si utiliza , Enterprise Edition 7.3.0, debe instalar KB 4074835.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-105">If you're using Enterprise edition 7.3.0, you must install KB 4074835.</span></span>

## <a name="data-flow-for-project-service-automation-to-finance"></a><span data-ttu-id="4a9ab-106">Flujo de datos de Project Service Automation a Finance</span><span class="sxs-lookup"><span data-stu-id="4a9ab-106">Data flow for Project Service Automation to Finance</span></span>

> [!NOTE]
> <span data-ttu-id="4a9ab-107">Para poder usar la solución de integración de Project Service Automation a Finance, debe estar familiarizado con la función de integración de datos de Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-107">Before you can use the Project Service Automation to Finance integration solution, you should be familiar with the Dynamics 365 Data integration feature.</span></span>

<span data-ttu-id="4a9ab-108">La solución de integración de Project Service Automation a Finance usa la característica de integración de datos para sincronizar datos a través de las instancias de Project Service Automation y de Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-108">The Project Service Automation to Finance integration solution uses the Data integration feature to synchronize data across instances of Project Service Automation and Finance.</span></span> <span data-ttu-id="4a9ab-109">La plantilla de integración que está disponible con la característica de integración de datos habilita el flujo de datos sobre los contratos de proyectos, los proyectos, las líneas de contratos de proyectos y los hitos de la línea del contrato de proyecto de Project Service Automation a Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-109">The integration template that is available with the Data integration feature enables the flow of data about project contracts, projects, project contract lines, and project contract line milestones from Project Service Automation to Finance.</span></span>

<span data-ttu-id="4a9ab-110">La ilustración siguiente muestra cómo se sincronizan los datos entre Project Service Automation y Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-110">The following illustration shows how the data is synchronized between Project Service Automation and Finance.</span></span>

<span data-ttu-id="4a9ab-111">[![Flujo de datos para la integración de Project Service Automation con Finance](./media/ProjectsAndContractsFlow.JPG)](./media/ProjectsAndContractsFlow.JPG)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-111">[![Data flow for Project Service Automation integration with Finance](./media/ProjectsAndContractsFlow.JPG)](./media/ProjectsAndContractsFlow.JPG)</span></span>

## <a name="templates-and-tasks"></a><span data-ttu-id="4a9ab-112">Plantillas y tareas</span><span class="sxs-lookup"><span data-stu-id="4a9ab-112">Templates and tasks</span></span>

<span data-ttu-id="4a9ab-113">Para obtener acceso a las plantillas disponibles, en el centro de administración de Microsoft PowerApps, seleccione **Proyectos** y, a continuación, en la esquina superior derecha, seleccione **Nuevo proyecto** para seleccionar plantillas públicas.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-113">To access the available templates, in the Microsoft PowerApps admin center, select **Projects**, and then, in the upper-right corner, select **New project** to select public templates.</span></span>

<span data-ttu-id="4a9ab-114">Las plantillas y las tareas subyacentes siguientes se usan para sincronizar los contratos de proyectos y los proyectos desde Project Service Automation a Finance:</span><span class="sxs-lookup"><span data-stu-id="4a9ab-114">The following templates and underlying tasks are used to synchronize project contracts and projects from Project Service Automation to Finance:</span></span>

### <a name="integrating-with-dynamics-365-project-service-automation-v2x"></a><span data-ttu-id="4a9ab-115">Integración con la versión 2.x de Dynamics 365 Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="4a9ab-115">Integrating with Dynamics 365 Project Service Automation v2.x</span></span>
- <span data-ttu-id="4a9ab-116">**Nombre de la plantilla en la integración de datos:** proyectos y contratos (PSA a Fin and Ops)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-116">**Name of the template in Data integration:** Projects and contracts (PSA to Fin and Ops)</span></span>
- <span data-ttu-id="4a9ab-117">**Nombre de las tareas en el proyecto:**</span><span class="sxs-lookup"><span data-stu-id="4a9ab-117">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="4a9ab-118">Contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-118">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-119">Proyectos PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-119">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-120">Líneas de contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-120">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-121">Hitos de líneas de contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-121">Project contract line milestones PSA to Fin and Ops</span></span>
  
### <a name="integrating-with-dynamics-365-project-service-automation-v3x"></a><span data-ttu-id="4a9ab-122">Integración con la versión 3.x de Dynamics 365 Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="4a9ab-122">Integrating with Dynamics 365 Project Service Automation v3.x</span></span>
<span data-ttu-id="4a9ab-123">Hay un cambio de esquema en Project Service Automation que afecta a la plantilla del hito de la línea del contrato de proyecto y se requiere usar la versión 2 de la plantilla para integrar la versión 3.x de Project Service Automation con Dynamics 365.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-123">There is a schema change in Project Service Automation that impacts the Project contract line milestone template and use of the v2 version of the template is required to integrate Project Service Automation v3.x with Dynamics 365.</span></span>

- <span data-ttu-id="4a9ab-124">**Nombre de la plantilla en la integración de datos:** proyectos y contratos (versión 3.x de PSA a Fin and Ops), versión 2</span><span class="sxs-lookup"><span data-stu-id="4a9ab-124">**Name of the template in Data integration:** Projects and Contracts (PSA 3.x to Fin and Ops) - v2</span></span>
- <span data-ttu-id="4a9ab-125">**Nombre de las tareas en el proyecto:**</span><span class="sxs-lookup"><span data-stu-id="4a9ab-125">**Name of the tasks in the project:**</span></span>

    - <span data-ttu-id="4a9ab-126">Contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-126">Project contracts PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-127">Proyectos PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-127">Projects PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-128">Líneas de contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-128">Project contract lines PSA to Fin and Ops</span></span>
    - <span data-ttu-id="4a9ab-129">Hitos de líneas de contratos de proyecto PSA a Fin and Ops</span><span class="sxs-lookup"><span data-stu-id="4a9ab-129">Project contract line milestones PSA to Fin and Ops</span></span>

<span data-ttu-id="4a9ab-130">Antes de que se produzca la sincronización de contratos de proyecto y de proyectos, debe sincronizar las cuentas.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-130">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>

## <a name="entity-set"></a><span data-ttu-id="4a9ab-131">Conjunto de entidades</span><span class="sxs-lookup"><span data-stu-id="4a9ab-131">Entity set</span></span>

| <span data-ttu-id="4a9ab-132">Project Service Automation</span><span class="sxs-lookup"><span data-stu-id="4a9ab-132">Project Service Automation</span></span>       | <span data-ttu-id="4a9ab-133">Finanzas</span><span class="sxs-lookup"><span data-stu-id="4a9ab-133">Finance</span></span>                                                |
|----------------------------------|--------------------------------------------------------|
| <span data-ttu-id="4a9ab-134">Pedidos</span><span class="sxs-lookup"><span data-stu-id="4a9ab-134">Orders</span></span>                           | <span data-ttu-id="4a9ab-135">Entidad de integración de contrato de proyecto</span><span class="sxs-lookup"><span data-stu-id="4a9ab-135">Integration entity for project contract</span></span>                |
| <span data-ttu-id="4a9ab-136">Proyectos</span><span class="sxs-lookup"><span data-stu-id="4a9ab-136">Projects</span></span>                         | <span data-ttu-id="4a9ab-137">Entidad de integración para proyecto</span><span class="sxs-lookup"><span data-stu-id="4a9ab-137">Integration entity for project</span></span>                         |
| <span data-ttu-id="4a9ab-138">Líneas de pedido</span><span class="sxs-lookup"><span data-stu-id="4a9ab-138">Order lines</span></span>                      | <span data-ttu-id="4a9ab-139">Entidad de integración para línea de contrato de proyecto</span><span class="sxs-lookup"><span data-stu-id="4a9ab-139">Integration entity for project contract line</span></span>           |
| <span data-ttu-id="4a9ab-140">Hitos de línea de contrato de proyecto</span><span class="sxs-lookup"><span data-stu-id="4a9ab-140">Project contract line milestones</span></span> | <span data-ttu-id="4a9ab-141">Entidad de integración para hito de línea de contrato de proyecto</span><span class="sxs-lookup"><span data-stu-id="4a9ab-141">Integration entity for project contract line milestone</span></span> |

## <a name="entity-flow"></a><span data-ttu-id="4a9ab-142">Flujo de la entidad</span><span class="sxs-lookup"><span data-stu-id="4a9ab-142">Entity flow</span></span>

<span data-ttu-id="4a9ab-143">Los contratos de proyectos se administran en Project Service Automation y se sincronizan con Finance como contratos de proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-143">Project contracts are managed in Project Service Automation, and they are synchronized to Finance as project contracts.</span></span> <span data-ttu-id="4a9ab-144">Como parte de la plantilla de integración, puede configurar el origen de la integración en Finance para el contrato de proyecto.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-144">As part of the integration template, you can set the integration source in Finance for the project contract.</span></span>

<span data-ttu-id="4a9ab-145">Los proyectos de tiempo y material y proyectos de precio fijo se administran en Project Service Automation y se sincronizan con Finance como proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-145">Time and material project and Fixed price projects are managed in Project Service Automation, and they are synchronized to Finance as projects.</span></span> <span data-ttu-id="4a9ab-146">Como parte de la plantilla de integración, puede configurar el origen de la integración en Finance para el proyecto.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-146">As part of the template integration, you can set the integration source in Finance for the project.</span></span>

<span data-ttu-id="4a9ab-147">Las líneas de contratos de proyectos se administran en Project Service Automation y se sincronizan con Finance como reglas de facturación de contratos de proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-147">Project contract lines are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rules.</span></span> <span data-ttu-id="4a9ab-148">Si el método de facturación difiere del tipo de proyecto predeterminado, la sincronización actualiza el tipo de proyecto para el proyecto de línea de contrato y el grupo de proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-148">If the billing method differs from the default project type, the synchronization updates the project type for the contract line project and project group.</span></span>

<span data-ttu-id="4a9ab-149">Los hitos de las líneas de contratos de proyectos se administran en Project Service Automation y se sincronizan con Finance como hitos de reglas de facturación de contratos de proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-149">Project contract line milestones are managed in Project Service Automation, and they are synchronized to Finance as project contract billing rule milestones.</span></span>

## <a name="project-service-automation-to-finance-integration-solution"></a><span data-ttu-id="4a9ab-150">Solución de integración de Project Service Automation con Finance</span><span class="sxs-lookup"><span data-stu-id="4a9ab-150">Project Service Automation to Finance integration solution</span></span>

<span data-ttu-id="4a9ab-151">El campo **Identificador de contrato de proyecto** está disponible en la página **Contratos de proyecto**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-151">The **Project contract ID** field is available on the **Project contracts** page.</span></span> <span data-ttu-id="4a9ab-152">Este campo se ha convertido en una clave natural y única para admitir la integración.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-152">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="4a9ab-153">Cuando se crea un nuevo contrato de proyecto, si todavía no existe un valor **ID de contrato de proyecto**, se genera automáticamente mediante una secuencia numérica.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-153">When a new project contract is created, if a **Project contract ID** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="4a9ab-154">El valor consiste en **ORD**, seguido por una secuencia numérica que aumenta y después un sufijo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-154">The value consists of **ORD** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="4a9ab-155">Este es un ejemplo: **ORD-01022-Z4M9Q0**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-155">Here is an example: **ORD-01022-Z4M9Q0**.</span></span>

<span data-ttu-id="4a9ab-156">El campo **Número de proyecto** está disponible en la página **Proyectos**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-156">The **Project Number** field is available on the **Projects** page.</span></span> <span data-ttu-id="4a9ab-157">Este campo se ha convertido en una clave natural y única para admitir la integración.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-157">This field has been made a natural and unique key to support the integration.</span></span>

<span data-ttu-id="4a9ab-158">Cuando se crea un nuevo proyecto, si todavía no existe un valor **Número de proyecto** , se genera automáticamente mediante una secuencia numérica.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-158">When a new project is created, if a **Project Number** value doesn't already exist, it's automatically generated by using a number sequence.</span></span> <span data-ttu-id="4a9ab-159">El valor consiste en **PRJ**, seguido por una secuencia numérica que aumenta y después un sufijo de seis caracteres.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-159">The value consists of **PRJ** followed by an incrementing number sequence and then a suffix of six characters.</span></span> <span data-ttu-id="4a9ab-160">Este es un ejemplo: **PRJ-01049-CCNID0**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-160">Here is an example: **PRJ-01049-CCNID0**.</span></span>

<span data-ttu-id="4a9ab-161">Cuando la solución de integración de Project Service Automation a Finance se aplica, un script de actualización establece el campo **Id. de contrato de proyecto** de los contratos de proyectos existentes y el campo **Número de proyecto** de los proyectos existentes en Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-161">When the Project Service Automation to Finance integration solution is applied, an upgrade script sets the **Project contract ID** field for existing project contracts and the **Project Number** field for existing projects in Project Service Automation.</span></span>

## <a name="prerequisites-and-mapping-setup"></a><span data-ttu-id="4a9ab-162">Condiciones previas y configuración de asignación</span><span class="sxs-lookup"><span data-stu-id="4a9ab-162">Prerequisites and mapping setup</span></span>

- <span data-ttu-id="4a9ab-163">Antes de que se produzca la sincronización de contratos de proyecto y de proyectos, debe sincronizar las cuentas.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-163">Before synchronization of project contracts and projects can occur, you must synchronize accounts.</span></span>
- <span data-ttu-id="4a9ab-164">En su conjunto de conexiones, agregue una asignación del campo clave de la integración de **msdyn\_organizationalunits** en **msdyn\_name \[Nombre\]**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-164">In your connection set, add an integration key field mapping for **msdyn\_organizationalunits** to **msdyn\_name \[Name\]**.</span></span> <span data-ttu-id="4a9ab-165">Es posible que necesite primero agregar un proyecto al conjunto de conexión.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-165">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="4a9ab-166">Para obtener más información, consulte [Integrar datos en Common Data Service para aplicaciones](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="4a9ab-166">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="4a9ab-167">En su conjunto de conexiones, agregue una asignación del campo clave de la integración de **msdyn\_projects** en **msdynce\_projectnumber \[Número de proyecto\]**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-167">In your connection set, add an integration key field mapping for **msdyn\_projects** to **msdynce\_projectnumber \[Project Number\]**.</span></span> <span data-ttu-id="4a9ab-168">Es posible que necesite primero agregar un proyecto al conjunto de conexión.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-168">You might first need to add a project to the connection set.</span></span> <span data-ttu-id="4a9ab-169">Para obtener más información, consulte [Integrar datos en Common Data Service para aplicaciones](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span><span class="sxs-lookup"><span data-stu-id="4a9ab-169">For more information, see [Integrate data into Common Data Service for Apps](https://docs.microsoft.com/powerapps/administrator/data-integrator).</span></span>
- <span data-ttu-id="4a9ab-170">**SourceDataID** para los contratos de proyecto y los proyectos se puede actualizar a un valor distinto o quitar de la asignación.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-170">**SourceDataID** for project contracts and projects can be updated to a different value or removed from the mapping.</span></span> <span data-ttu-id="4a9ab-171">El valor de la plantilla predeterminada es **Project Service Automation**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-171">The default template value is **Project Service Automation**.</span></span>
- <span data-ttu-id="4a9ab-172">La asignación **PaymentTerms** debe ser actualizada de modo que refleje condiciones de pago válidas en Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-172">The **PaymentTerms** mapping must be updated so that it reflects valid terms of payment in Finance.</span></span> <span data-ttu-id="4a9ab-173">También puede quitar la asignación de la tarea de proyecto.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-173">You can also remove the mapping from the project task.</span></span> <span data-ttu-id="4a9ab-174">La asignación de valor predeterminado tiene valores predeterminados para los datos de prueba.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-174">The default value map has default values for demo data.</span></span> <span data-ttu-id="4a9ab-175">En la tabla siguiente se muestran los valores de Project Service Automation.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-175">The following table shows the values in Project Service Automation.</span></span>

    | <span data-ttu-id="4a9ab-176">Valor</span><span class="sxs-lookup"><span data-stu-id="4a9ab-176">Value</span></span> | <span data-ttu-id="4a9ab-177">Descripción</span><span class="sxs-lookup"><span data-stu-id="4a9ab-177">Description</span></span>   |
    |-------|---------------|
    | <span data-ttu-id="4a9ab-178">1</span><span class="sxs-lookup"><span data-stu-id="4a9ab-178">1</span></span>     | <span data-ttu-id="4a9ab-179">Neto 30</span><span class="sxs-lookup"><span data-stu-id="4a9ab-179">Net 30</span></span>        |
    | <span data-ttu-id="4a9ab-180">2</span><span class="sxs-lookup"><span data-stu-id="4a9ab-180">2</span></span>     | <span data-ttu-id="4a9ab-181">2% 10, Net 30</span><span class="sxs-lookup"><span data-stu-id="4a9ab-181">2% 10, Net 30</span></span> |
    | <span data-ttu-id="4a9ab-182">3</span><span class="sxs-lookup"><span data-stu-id="4a9ab-182">3</span></span>     | <span data-ttu-id="4a9ab-183">Neto 45</span><span class="sxs-lookup"><span data-stu-id="4a9ab-183">Net 45</span></span>        |
    | <span data-ttu-id="4a9ab-184">4</span><span class="sxs-lookup"><span data-stu-id="4a9ab-184">4</span></span>     | <span data-ttu-id="4a9ab-185">Neto 60</span><span class="sxs-lookup"><span data-stu-id="4a9ab-185">Net 60</span></span>        |

## <a name="power-query"></a><span data-ttu-id="4a9ab-186">Power Query</span><span class="sxs-lookup"><span data-stu-id="4a9ab-186">Power Query</span></span>

<span data-ttu-id="4a9ab-187">Debe usar Microsoft Power Query for Excel para filtrar los datos si se cumplen las siguientes condiciones:</span><span class="sxs-lookup"><span data-stu-id="4a9ab-187">You must use Microsoft Power Query for Excel to filter data if the following conditions are met:</span></span>

- <span data-ttu-id="4a9ab-188">Tiene pedidos de ventas en Dynamics 365 Sales.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-188">You have sales orders in Dynamics 365 Sales.</span></span>
- <span data-ttu-id="4a9ab-189">Tiene varias unidades organizativas en Project Service Automation y estas unidades organizativas se asignarán a varias entidades jurídicas en Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-189">You have multiple organizational units in Project Service Automation, and these organizational units will be mapped to multiple legal entities in Finance.</span></span>

<span data-ttu-id="4a9ab-190">Si debe usar Power Query, siga estas instrucciones:</span><span class="sxs-lookup"><span data-stu-id="4a9ab-190">If you must use Power Query, follow these guidelines:</span></span>

- <span data-ttu-id="4a9ab-191">La plantilla de proyectos y contratos (PSA a Fin and Ops) tiene un filtro predeterminado que incluye solo pedidos de ventas del tipo **Elemento de trabajo (msdyn\_ordertype = 192350001)**.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-191">The Projects and contracts (PSA to Fin and Ops) template has a default filter that includes only sales orders of the **Work item (msdyn\_ordertype = 192350001)** type.</span></span> <span data-ttu-id="4a9ab-192">Este filtro contribuye a garantizar que los contratos de proyecto no se creen para pedidos de ventas en Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-192">This filter helps guarantee that project contracts aren't created for sales orders in Finance.</span></span> <span data-ttu-id="4a9ab-193">Si crea su propia plantilla, debe agregar este filtro.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-193">If you create your own template, you must add this filter.</span></span>
- <span data-ttu-id="4a9ab-194">Debe crear un filtro Power Query que incluya solo a las organizaciones de contrato que deben sincronizarse con la entidad jurídica del conjunto de conexión de integración.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-194">You must create a Power Query filter that includes only the contract organizations that should be synchronized to the legal entity of the integration connection set.</span></span> <span data-ttu-id="4a9ab-195">Por ejemplo, los contratos de proyecto que tiene con la unidad organizativa del contrato de Contoso EE. UU se deben sincronizar con la entidad jurídica de USSI, pero los contratos de proyecto que tiene con las unidades organizativas de Contoso Global se deben sincronizar con la entidad jurídica de USMF.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-195">For example, project contracts that you have with the contract organizational unit of Contoso US should be synchronized to the USSI legal entity, but project contracts that you have with the contract organizational unit of Contoso Global should be synchronized to the USMF legal entity.</span></span> <span data-ttu-id="4a9ab-196">Si no añade este filtro a su equivalencia de tareas, todos los contratos de proyecto se sincronizarán con la entidad jurídica que se define para el conjunto de conexiones, independientemente de la unidad organizativa del contrato.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-196">If you don't add this filter to your task mapping, all project contracts will be synchronized to the legal entity that is defined for the connection set, regardless of the contract organizational unit.</span></span>

## <a name="template-mapping-in-data-integration"></a><span data-ttu-id="4a9ab-197">Asignación de la plantilla en la integración de datos</span><span class="sxs-lookup"><span data-stu-id="4a9ab-197">Template mapping in Data integration</span></span>

> [!NOTE] 
> <span data-ttu-id="4a9ab-198">Los campos **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState** y **AddressZipCode** no se incluyen en la asignación predeterminada de contratos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-198">The **CustomerReference**, **AddressCity**, **AddressCountryRegionID**, **AddressDescription**, **AddressLine1**, **AddressLine2**, **AddressState**, and **AddressZipCode** fields aren't included in the default mapping for project contracts.</span></span> <span data-ttu-id="4a9ab-199">Puede agregar las asignaciones si necesita que estos datos se sincronicen para los contratos de proyecto.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-199">You can add the mappings if you require that this data be synchronized for project contracts.</span></span>
>
> <span data-ttu-id="4a9ab-200">Los campos **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber** y **ProjectType** no se incluyen en la asignación predeterminada de los proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-200">The **Description**, **ParentID**, **ProjectGroup**, **ProjectManagerPersonnelNumber**, and **ProjectType** fields aren't included in the default mapping for projects.</span></span> <span data-ttu-id="4a9ab-201">Puede agregar las asignaciones si necesita que estos datos se sincronicen para los proyectos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-201">You can add the mappings if you require that this data be synchronized for projects.</span></span>

<span data-ttu-id="4a9ab-202">Las siguientes ilustraciones muestran ejemplos de asignaciones de tareas de plantillas en la integración de datos.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-202">The following illustrations show examples of the template task mappings in Data integration.</span></span> <span data-ttu-id="4a9ab-203">La asignación muestra la información de campo que se sincronizará de Project Service Automation a Finance.</span><span class="sxs-lookup"><span data-stu-id="4a9ab-203">The mapping shows the field information that will be synchronized from Project Service Automation to Finance.</span></span>

<span data-ttu-id="4a9ab-204">[![Asignación de la plantilla](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-204">[![Template mapping](./media/ProjectContractTemplateMapping.JPG)](./media/ProjectContractTemplateMapping.JPG)</span></span>

<span data-ttu-id="4a9ab-205">[![Asignación de la plantilla](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-205">[![Template mapping](./media/ProjectTemplateMapping.JPG)](./media/ProjectTemplateMapping.JPG)</span></span>

<span data-ttu-id="4a9ab-206">[![Asignación de la plantilla](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-206">[![Template mapping](./media/ProjectContractLinesMapping.JPG)](./media/ProjectContractLinesMapping.JPG)</span></span>

<span data-ttu-id="4a9ab-207">[![Asignación de la plantilla](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-207">[![Template mapping](./media/ProjectContractLineMilestonesMapping.JPG)](./media/ProjectContractLineMilestonesMapping.JPG)</span></span>

#### <a name="project-contract-line-milestone-mapping-in-the-projects-and-contracts-psa-3x-to-dynamics---v2-template"></a><span data-ttu-id="4a9ab-208">Asignación del hito de línea del contrato en la plantilla Proyectos y contratos (PSA 3.x a Dynamics), versión 2:</span><span class="sxs-lookup"><span data-stu-id="4a9ab-208">Project contract line milestone mapping in the Projects and Contracts (PSA 3.x to Dynamics) - v2 template:</span></span>

<span data-ttu-id="4a9ab-209">[![Asignación de la plantilla](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span><span class="sxs-lookup"><span data-stu-id="4a9ab-209">[![Template mapping](./media/ProjectContractLineMilestoneMapping_v2.jpg)](./media/ProjectContractLineMilestoneMapping_v2.jpg)</span></span>
