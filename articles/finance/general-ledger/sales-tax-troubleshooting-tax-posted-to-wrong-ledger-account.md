---
title: El impuesto se registra en la cuenta contable incorrecta en el asiento
description: Este tema proporciona información para la resolución de problemas que puede ayudar cuando los impuestos se registran en la cuenta contable incorrecta en el asiento.
author: qire
ms.date: 04/12/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
audience: Application user
ms.reviewer: kfend
ms.search.scope: Core, Operations
ms.search.region: Global
ms.author: wangchen
ms.search.validFrom: 2021-04-01
ms.dyn365.ops.version: 10.0.1
ms.openlocfilehash: 3d197046bd547757f32712a50949b41897f6fedf
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 05/11/2021
ms.locfileid: "6020100"
---
# <a name="tax-is-posted-to-the-wrong-ledger-account-in-the-voucher"></a><span data-ttu-id="545a1-103">El impuesto se registra en la cuenta contable incorrecta en el asiento</span><span class="sxs-lookup"><span data-stu-id="545a1-103">Tax is posted to the wrong ledger account in the voucher</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="545a1-104">Durante el registro, el impuesto puede registrarse en la cuenta contable incorrecta en el asiento.</span><span class="sxs-lookup"><span data-stu-id="545a1-104">During posting, tax might be posted to the wrong ledger account in the voucher.</span></span> <span data-ttu-id="545a1-105">Para solucionar este problema, siga los pasos de las siguientes secciones según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="545a1-105">To troubleshoot this issue, follow the steps in the following sections as required.</span></span> <span data-ttu-id="545a1-106">Los ejemplos de este tema utilizan un pedido de ventas como documento cempresarial.</span><span class="sxs-lookup"><span data-stu-id="545a1-106">The examples in this topic use a sales order as the business document.</span></span>

## <a name="find-the-tax-code-of-the-incorrectly-posted-tax-transaction"></a><span data-ttu-id="545a1-107">Busque el código de impuestos de la transacción de impuestos registrada incorrectamente</span><span class="sxs-lookup"><span data-stu-id="545a1-107">Find the tax code of the incorrectly posted tax transaction</span></span>

1. <span data-ttu-id="545a1-108">En la página **Transacciones de asientos**, seleccione la transacción con la que desea trabajar y luego seleccione **Impuesto registrado**.</span><span class="sxs-lookup"><span data-stu-id="545a1-108">On the **Voucher transactions** page, select the transaction that you want to work with, and then select **Posted sales tax**.</span></span>

    <span data-ttu-id="545a1-109">[![Botón de impuesto registrado en la página de transacciones de asientos](./media/tax-posted-to-wrong-ledger-account-Picture1.png)](./media/tax-posted-to-wrong-ledger-account-Picture1.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-109">[![Posted sales tax button on the Voucher transactions page](./media/tax-posted-to-wrong-ledger-account-Picture1.png)](./media/tax-posted-to-wrong-ledger-account-Picture1.png)</span></span>

2. <span data-ttu-id="545a1-110">Revise el valor en el campo **Código de impuestos**.</span><span class="sxs-lookup"><span data-stu-id="545a1-110">Review the value in the **Sales tax code** field.</span></span> <span data-ttu-id="545a1-111">En este ejemplo, es **IVA 19**.</span><span class="sxs-lookup"><span data-stu-id="545a1-111">In this example, it's **VAT 19**.</span></span>

    <span data-ttu-id="545a1-112">[![Campo de código de impuesto en la página Impuesto registrado](./media/tax-posted-to-wrong-ledger-account-Picture2.png)](./media/tax-posted-to-wrong-ledger-account-Picture2.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-112">[![Sales tax code field on the Posted sales tax page](./media/tax-posted-to-wrong-ledger-account-Picture2.png)](./media/tax-posted-to-wrong-ledger-account-Picture2.png)</span></span>

## <a name="check-the-ledger-posting-group-of-the-tax-code"></a><span data-ttu-id="545a1-113">Comprobar el grupo de registro del libro mayor del código de impuestos</span><span class="sxs-lookup"><span data-stu-id="545a1-113">Check the ledger posting group of the tax code</span></span>

1. <span data-ttu-id="545a1-114">Vaya a **Impuestos** \> **Impuestos indirectos** \> **Impuestos** \> **Códigos de impuestos**.</span><span class="sxs-lookup"><span data-stu-id="545a1-114">Go to **Tax** \> **Indirect taxes** \> **Sales tax** \> **Sales tax codes**.</span></span>
2. <span data-ttu-id="545a1-115">Busque y seleccione el código de impuestos y luego revise el valor en el campo **Grupo de registro del libro mayor**.</span><span class="sxs-lookup"><span data-stu-id="545a1-115">Find and select the tax code, and then review the value in the **Ledger posting group** field.</span></span> <span data-ttu-id="545a1-116">En este ejemplo, es **IVA**.</span><span class="sxs-lookup"><span data-stu-id="545a1-116">In this example, it's **VAT**.</span></span>

    <span data-ttu-id="545a1-117">[![Campo Grupo de registro del libro mayor en la página de códigos de impuestos](./media/tax-posted-to-wrong-ledger-account-Picture3.png)](./media/tax-posted-to-wrong-ledger-account-Picture3.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-117">[![Ledger posting group field on the Sales tax codes page](./media/tax-posted-to-wrong-ledger-account-Picture3.png)](./media/tax-posted-to-wrong-ledger-account-Picture3.png)</span></span>

3. <span data-ttu-id="545a1-118">El vaor del campo **Grupo de registro del libro mayor** es un vínculo.</span><span class="sxs-lookup"><span data-stu-id="545a1-118">The value in the **Ledger posting group** field is a link.</span></span> <span data-ttu-id="545a1-119">Para ver los detalles de la configuración del grupo, seleccione el vínculo.</span><span class="sxs-lookup"><span data-stu-id="545a1-119">To view the details of the group's configuration, select the link.</span></span> <span data-ttu-id="545a1-120">Alternativamente, seleccione y mantenga presionado (o haga clic con el botón derecho) en el campo y luego seleccione **Ver detalles**.</span><span class="sxs-lookup"><span data-stu-id="545a1-120">Alternatively, select and hold (or right-click) in the field, and then select **View details**.</span></span>

    <span data-ttu-id="545a1-121">[![Comando Ver detalles](./media/tax-posted-to-wrong-ledger-account-Picture4.png)](./media/tax-posted-to-wrong-ledger-account-Picture4.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-121">[![View details command](./media/tax-posted-to-wrong-ledger-account-Picture4.png)](./media/tax-posted-to-wrong-ledger-account-Picture4.png)</span></span>

4. <span data-ttu-id="545a1-122">En el campo **Impuesto a pagar**, verifique que el número de cuenta sea correcto, según el tipo de transacción.</span><span class="sxs-lookup"><span data-stu-id="545a1-122">In the **Sales tax payable** field, verify that the account number is correct, according to the transaction type.</span></span> <span data-ttu-id="545a1-123">Si no es así, seleccione la cuenta correcta para registrar.</span><span class="sxs-lookup"><span data-stu-id="545a1-123">If it isn't, select the correct account to post to.</span></span> <span data-ttu-id="545a1-124">En este ejemplo, el impuesto sobre las ventas del pedido de ventas debe contabilizarse en la cuenta de impuestos a pagar 222200.</span><span class="sxs-lookup"><span data-stu-id="545a1-124">In this example, the sales tax of the sales order should be posted to sales tax payable account 222200.</span></span>

    <span data-ttu-id="545a1-125">[![Campo Impuestos a pagar en Grupos de registro de contabilidad](./media/tax-posted-to-wrong-ledger-account-Picture5.png)](./media/tax-posted-to-wrong-ledger-account-Picture5.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-125">[![Sales tax payable field on the Ledger posting groups page](./media/tax-posted-to-wrong-ledger-account-Picture5.png)](./media/tax-posted-to-wrong-ledger-account-Picture5.png)</span></span>

    <span data-ttu-id="545a1-126">La siguiente tabla proporciona información sobre cada campo de la página **Grupos de registro de contabilidad**.</span><span class="sxs-lookup"><span data-stu-id="545a1-126">The following table provides information about each field on the **Ledger posting groups** page.</span></span>

    | <span data-ttu-id="545a1-127">Campo</span><span class="sxs-lookup"><span data-stu-id="545a1-127">Field</span></span>                  | <span data-ttu-id="545a1-128">Descripción</span><span class="sxs-lookup"><span data-stu-id="545a1-128">Description</span></span> |
    |------------------------|-------------|
    | <span data-ttu-id="545a1-129">Impuestos repercutidos</span><span class="sxs-lookup"><span data-stu-id="545a1-129">Sales tax payable</span></span>      | <span data-ttu-id="545a1-130">La cuenta principal de los impuestos repercutidos que son pagaderos a la autoridad fiscal.</span><span class="sxs-lookup"><span data-stu-id="545a1-130">The main account for outgoing sales taxes that are payable to the tax authority.</span></span> |
    | <span data-ttu-id="545a1-131">Impuestos soportados</span><span class="sxs-lookup"><span data-stu-id="545a1-131">Sales tax receivable</span></span>   | <span data-ttu-id="545a1-132">La cuenta principal de impuestos soportados que se reciben de la autoridad fiscal.</span><span class="sxs-lookup"><span data-stu-id="545a1-132">The main account for incoming taxes that are received from the tax authority.</span></span> |
    | <span data-ttu-id="545a1-133">Gasto de IVA de importación</span><span class="sxs-lookup"><span data-stu-id="545a1-133">Use tax expense</span></span>        | <span data-ttu-id="545a1-134">La cuenta principal que se utiliza para registrar los impuestos sobre el uso deducibles que los proveedores no reclaman o informan a la autoridad fiscal como parte del impuesto sobre bienes y servicios (GST) de la Unión Europea (UE) de cobro revertido/Impuesto armonizado (HST).</span><span class="sxs-lookup"><span data-stu-id="545a1-134">The main account that is used to post deductible use taxes that vendors don't claim or report to the tax authority as part of European Union (EU) reverse charge Goods and Services Tax (GST)/Harmonized Sales Tax (HST).</span></span> <span data-ttu-id="545a1-135">**IVA de importación** debe seleccionarse para el código de impuestos del grupo de impuestos que se usa en la transacción.</span><span class="sxs-lookup"><span data-stu-id="545a1-135">**Use tax** must be selected for the sales tax code in the sales tax group that is used in the transaction.</span></span> <span data-ttu-id="545a1-136">Este campo no estará disponible si se selecciona **Aplicar reglas de tasación de impuestos** en la página **Parámetros de contabilidad general**.</span><span class="sxs-lookup"><span data-stu-id="545a1-136">This field isn't available if **Apply sales tax taxation rules** is selected on the **General ledger parameters** page.</span></span> |
    | <span data-ttu-id="545a1-137">IVA de importación repercutido</span><span class="sxs-lookup"><span data-stu-id="545a1-137">Use tax payable</span></span>        | <span data-ttu-id="545a1-138">La cuenta principal que se utiliza para registrar los IVA de importación que se pagan a las autoridades fiscales.</span><span class="sxs-lookup"><span data-stu-id="545a1-138">The main account that is used to post incoming use taxes that are payable to tax authorities.</span></span> |
    | <span data-ttu-id="545a1-139">Cuenta de liquidación</span><span class="sxs-lookup"><span data-stu-id="545a1-139">Settlement account</span></span>     | <span data-ttu-id="545a1-140">La cuenta principal que se utiliza para registrar el saldo neto de las cuentas contables especificadas en los campos **IVA de importación repercutido** e **Impuestos soportados**.</span><span class="sxs-lookup"><span data-stu-id="545a1-140">The main account that is used to post the net balance of the ledger accounts that are specified in the **Use tax payable** and **Sales tax receivable** fields.</span></span> |
    | <span data-ttu-id="545a1-141">Descuento por pronto pago del proveedor</span><span class="sxs-lookup"><span data-stu-id="545a1-141">Vendor cash discount</span></span>   | <span data-ttu-id="545a1-142">La cuenta principal que se usa para registrar el descuento por pronto pago para los códigos de impuestos asociados a este grupo de registro de contabilidad.</span><span class="sxs-lookup"><span data-stu-id="545a1-142">The main account that is used to post a cash discount for sales tax codes that are associated with this ledger posting group.</span></span> |
    | <span data-ttu-id="545a1-143">Descuento en ciertos casos a clientes</span><span class="sxs-lookup"><span data-stu-id="545a1-143">Customer case discount</span></span> | <span data-ttu-id="545a1-144">La cuenta principal que se usa para registrar el descuento por pronto pago para los códigos de impuestos asociados a este grupo de registro de contabilidad.</span><span class="sxs-lookup"><span data-stu-id="545a1-144">The main account that is used to post a cash discount for sales tax codes that are associated with this ledger posting group.</span></span> |

    <span data-ttu-id="545a1-145">Para obtener más información, consulte [Configurar los grupos de registro en el libro mayor para impuestos](tasks/set-up-ledger-posting-groups-sales-tax.md)</span><span class="sxs-lookup"><span data-stu-id="545a1-145">For more information, see, [Set up Ledger posting groups for sales tax](tasks/set-up-ledger-posting-groups-sales-tax.md)</span></span>

## <a name="debug-in-code-to-check-ledger-dimensions"></a><span data-ttu-id="545a1-146">Depurar en código para comprobar las dimensiones del libro mayor</span><span class="sxs-lookup"><span data-stu-id="545a1-146">Debug in code to check ledger dimensions</span></span>

<span data-ttu-id="545a1-147">En el código, la cuenta contable está determinada por la dimensión contable del libro mayor.</span><span class="sxs-lookup"><span data-stu-id="545a1-147">In the code, the posting account is determined by the ledger dimension.</span></span> <span data-ttu-id="545a1-148">La dimensión contable guarda el id. de registro de una cuenta en la base de datos.</span><span class="sxs-lookup"><span data-stu-id="545a1-148">The ledger dimension saves the record ID of an account in the database.</span></span>

1. <span data-ttu-id="545a1-149">Para un pedido de ventas, agregue un punto de interrupción en los métodos **Tax::saveAndPost()** y **Tax::post()**.</span><span class="sxs-lookup"><span data-stu-id="545a1-149">For a sales order, add a breakpoint at the **Tax::saveAndPost()** and **Tax::post()** methods.</span></span> <span data-ttu-id="545a1-150">Preste atención al valor de **\_ledgerDimension**.</span><span class="sxs-lookup"><span data-stu-id="545a1-150">Pay attention to the value of **\_ledgerDimension**.</span></span>

    <span data-ttu-id="545a1-151">[![Ejemplo de código de pedido de ventas que tiene un punto de interrupción](./media/tax-posted-to-wrong-ledger-account-Picture6.png)](./media/tax-posted-to-wrong-ledger-account-Picture6.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-151">[![Sales order code sample that has a breakpoint](./media/tax-posted-to-wrong-ledger-account-Picture6.png)](./media/tax-posted-to-wrong-ledger-account-Picture6.png)</span></span>

    <span data-ttu-id="545a1-152">Para una orden de compra, agregue un punto de interrupción en los métodos **TaxPost::saveAndPost()** y **TaxPost::postToTaxTrans()**.</span><span class="sxs-lookup"><span data-stu-id="545a1-152">For a purchase order, add a breakpoint at the **TaxPost::saveAndPost()** and **TaxPost::postToTaxTrans()** methods.</span></span> <span data-ttu-id="545a1-153">Preste atención al valor de **\_ledgerDimension**.</span><span class="sxs-lookup"><span data-stu-id="545a1-153">Pay attention to the value of **\_ledgerDimension**.</span></span>

    <span data-ttu-id="545a1-154">[![Ejemplo de código de pedido de compra que tiene un punto de interrupción](./media/tax-posted-to-wrong-ledger-account-Picture7.png)](./media/tax-posted-to-wrong-ledger-account-Picture7.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-154">[![Purchase order code sample that has a breakpoint](./media/tax-posted-to-wrong-ledger-account-Picture7.png)](./media/tax-posted-to-wrong-ledger-account-Picture7.png)</span></span>

2. <span data-ttu-id="545a1-155">Ejecute la siguiente consulta SQL para encontrar el valor de visualización de la cuenta en la base de datos, según el id. de registro que guarda la dimensión del libro mayor.</span><span class="sxs-lookup"><span data-stu-id="545a1-155">Run the following SQL query to find the display value of the account in the database, based on the record ID that is saved by the ledger dimension.</span></span>

    ```sql
    select * from DIMENSIONATTRIBUTEVALUECOMBINATION where recid={the value of _ledgerDimension}
    ```

    <span data-ttu-id="545a1-156">[![Valor de visualización del id. de registro](./media/tax-posted-to-wrong-ledger-account-Picture8.png)](./media/tax-posted-to-wrong-ledger-account-Picture8.png)</span><span class="sxs-lookup"><span data-stu-id="545a1-156">[![Display value of the record ID](./media/tax-posted-to-wrong-ledger-account-Picture8.png)](./media/tax-posted-to-wrong-ledger-account-Picture8.png)</span></span>

3. <span data-ttu-id="545a1-157">Examine la pila de llamadas para encontrar valor asignado de **_ledgerDimension**.</span><span class="sxs-lookup"><span data-stu-id="545a1-157">Examine the callstack to find where the **_ledgerDimension** value is assigned.</span></span> <span data-ttu-id="545a1-158">Por lo general, el valor es de **TmpTaxWorkTrans**.</span><span class="sxs-lookup"><span data-stu-id="545a1-158">Usually, the value is from **TmpTaxWorkTrans**.</span></span> <span data-ttu-id="545a1-159">En este caso, debe agregar un punto de interrupción en **TmpTaxWorkTrans::insert()** y **TmpTaxWorkTrans::update()** para encontrar dónde se asignó el valor.</span><span class="sxs-lookup"><span data-stu-id="545a1-159">In this case, you should add a breakpoint at **TmpTaxWorkTrans::insert()** and **TmpTaxWorkTrans::update()** to find where the value assigned.</span></span>

## <a name="determine-whether-customization-exists"></a><span data-ttu-id="545a1-160">Determinar si existe personalización</span><span class="sxs-lookup"><span data-stu-id="545a1-160">Determine whether customization exists</span></span>

<span data-ttu-id="545a1-161">Si ha completado los pasos de las secciones anteriores pero no ha encontrado problemas, determine si existe personalización.</span><span class="sxs-lookup"><span data-stu-id="545a1-161">If you've completed the steps in the previous sections but have found no issue, determine whether customization exists.</span></span> <span data-ttu-id="545a1-162">Si no existe personalización, cree una solicitud de servicio de Microsoft para obtener más soporte.</span><span class="sxs-lookup"><span data-stu-id="545a1-162">If no customization exists, create a Microsoft service request for further support.</span></span>

[!INCLUDE[footer-include](../../includes/footer-banner.md)]
