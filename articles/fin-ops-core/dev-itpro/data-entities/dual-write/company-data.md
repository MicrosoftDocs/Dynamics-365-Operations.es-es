---
title: Concepto de empresa en Dataverse
description: En este tema se describe la integración de datos de empresa entre Finance and Operations y Dataverse.
author: RamaKrishnamoorthy
ms.date: 08/04/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ''
audience: Application User, IT Pro
ms.reviewer: rhaertle
ms.custom: ''
ms.assetid: ''
ms.search.region: global
ms.search.industry: ''
ms.author: ramasri
ms.dyn365.ops.version: ''
ms.search.validFrom: 2019-07-15
ms.openlocfilehash: 1c3af66c0b8daa120c6ba19bd910f7531ffada0e
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/31/2021
ms.locfileid: "5751419"
---
# <a name="company-concept-in-dataverse"></a><span data-ttu-id="6fd7b-103">Concepto de empresa en Dataverse</span><span class="sxs-lookup"><span data-stu-id="6fd7b-103">Company concept in Dataverse</span></span>

[!include [banner](../../includes/banner.md)]

[!include [rename-banner](~/includes/cc-data-platform-banner.md)]


<span data-ttu-id="6fd7b-104">En Finance and Operations, el concepto *empresa* es una construcción legal y una construcción empresarial.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-104">In Finance and Operations, the concept of a *company* is both a legal construct and a business construct.</span></span> <span data-ttu-id="6fd7b-105">También es un límite de seguridad y visibilidad para los datos.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-105">It's also a security and visibility boundary for data.</span></span> <span data-ttu-id="6fd7b-106">Los usuarios trabajan siempre en el contexto de una sola empresa y la mayoría de los datos se clasifican por empresa.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-106">Users always work in the context of a single company, and most of the data is striped by company.</span></span>

<span data-ttu-id="6fd7b-107">Dataverse no tiene un concepto equivalente.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-107">Dataverse doesn't have an equivalent concept.</span></span> <span data-ttu-id="6fd7b-108">El concepto más cercano es *unidad de negocio*, que es un límite principalmente de seguridad y de visibilidad para los datos de usuario.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-108">The closest concept is *business unit*, which is primarily a security and visibility boundary for user data.</span></span> <span data-ttu-id="6fd7b-109">Este concepto no tiene las mismas implicaciones legales o empresariales que el concepto de empresa.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-109">This concept doesn't have the same legal or business implications as the company concept.</span></span>

<span data-ttu-id="6fd7b-110">Dado que la unidad de negocio y la empresa no son conceptos equivalentes, no es posible forzar una asignación uno a uno (1: 1) entre ellos para el propósito de la integración de Dataverse.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-110">Because business unit and company aren't equivalent concepts, it isn't possible to force a one-to-one (1:1) mapping between them for the purpose of Dataverse integration.</span></span> <span data-ttu-id="6fd7b-111">Sin embargo, dado que los usuarios deben, de forma predeterminada, poder ver las mismas filas en la aplicación y Dataverse, Microsoft ha introducido una nueva tabla en Dataverse que se denomina cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-111">However, because users must, by default, be able to see the same rows in the application and Dataverse, Microsoft has introduced a new table in Dataverse that is named cdm\_Company.</span></span> <span data-ttu-id="6fd7b-112">Esta tabla es equivalente a la tabla de empresa en la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-112">This table is equivalent to the Company table in the application.</span></span> <span data-ttu-id="6fd7b-113">Para ayudar a garantizar que la visibilidad de filas es equivalente entre la aplicación y Dataverse de forma inmediata, se recomienda la siguiente configuración para los datos en Dataverse:</span><span class="sxs-lookup"><span data-stu-id="6fd7b-113">To help guarantee that visibility of rows is equivalent between the application and Dataverse out of the box, we recommend the following setup for data in Dataverse:</span></span>

+ <span data-ttu-id="6fd7b-114">Para cada fila de empresa de Finance and Operations que se habilite para escritura dual, se creará una fila cdm\_Company asociado.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-114">For each Finance and Operations Company row that is enabled for dual-write, an associated cdm\_Company row is created.</span></span>
+ <span data-ttu-id="6fd7b-115">Cuando se crea una fila cdm\_Company y se habilita para escritura dual, se crea una unidad de negocio predeterminada con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-115">When a cdm\_Company row is created and enabled for dual-write, a default business unit is created that has the same name.</span></span> <span data-ttu-id="6fd7b-116">Aunque se crea automáticamente un equipo predeterminado para esa unidad de negocio, la unidad de negocio no se utiliza.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-116">Although a default team is automatically created for that business unit, the business unit isn't used.</span></span>
+ <span data-ttu-id="6fd7b-117">Se crea un equipo independiente del propietario con el mismo nombre.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-117">A separate owner team is created that has the same name.</span></span> <span data-ttu-id="6fd7b-118">También está asociado con la unidad de negocio.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-118">It's also associated with the business unit.</span></span>
+ <span data-ttu-id="6fd7b-119">De forma predeterminada, el propietario de cualquier fila que se crea y se escribe de forma dual en Dataverse se establece en el equipo "propietario de DW" vinculado a la unidad de negocio asociada.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-119">By default, the owner of any row that is created and dual-written to Dataverse is set to the "DW Owner" team that is linked to the associated business unit.</span></span>

<span data-ttu-id="6fd7b-120">En la siguiente ilustración se muestra un ejemplo de esta configuración de datos en Dataverse.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-120">The following illustration shows an example of this data setup in Dataverse.</span></span>

![Configuración de datos en Dataverse](media/dual-write-company-1.png)

<span data-ttu-id="6fd7b-122">Debido a esta configuración, cualquier fila relacionada con la empresa USMF será propiedad de un equipo que está vinculado a la unidad de negocio de USMF en Dataverse.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-122">Because of this configuration, any row that is related to the USMF company will be owned by a team that is linked to the USMF business unit in Dataverse.</span></span> <span data-ttu-id="6fd7b-123">Por lo tanto, cualquier usuario que tenga acceso a esa unidad de negocio con un rol de seguridad que se establezca en la visibilidad de nivel de unidad de negocio podrá ver dichas filas.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-123">Therefore, any user who has access to that business unit through a security role that is set to business unit–level visibility can now see those rows.</span></span> <span data-ttu-id="6fd7b-124">El siguiente ejemplo muestra cómo se pueden utilizar los equipos para proporcionar acceso correcto a dichas filas.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-124">The following example shows how teams can be used to provide the correct access to those rows.</span></span>

+ <span data-ttu-id="6fd7b-125">La función de “director de ventas” se asigna a los miembros del equipo de “ventas de USMF”.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-125">The "Sales Manager" role is assigned to members of the "USMF Sales" team.</span></span>
+ <span data-ttu-id="6fd7b-126">Los usuarios con el rol “director de ventas” pueden tener acceso a cualquier fila de la cuenta que sea miembro de la misma unidad de negocio.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-126">Users who have the "Sales Manager" role can access any account rows that are members of the same business unit that they are members of.</span></span>
+ <span data-ttu-id="6fd7b-127">El equipo de “ventas de USMF" está vinculado a la unidad de negocio de USMF antes mencionada.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-127">The "USMF Sales" team is linked to the USMF business unit that was mentioned earlier.</span></span>
+ <span data-ttu-id="6fd7b-128">Por lo tanto, los miembros del equipo de "ventas de USMF" pueden ver cualquier cuenta que sea propiedad del usuario de "USMF DW", que habría llegado de la tabla de la empresa USMF en Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-128">Therefore, members of the "USMF Sales" team can see any account that is owned by the "USMF DW" user, which would have come from the USMF Company table in Finance and Operations.</span></span>

![Cómo se pueden usar los equipos](media/dual-write-company-2.png)

<span data-ttu-id="6fd7b-130">Como muestra la ilustración anterior, esta asignación 1:1 entre la unidad de negocio, la empresa y el equipo es solo un punto de partida.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-130">As the preceding illustration shows, this 1:1 mapping between business unit, company, and team is just a starting point.</span></span> <span data-ttu-id="6fd7b-131">En este ejemplo, una nueva unidad de negocio “Europa” se crea manualmente en Dataverse como principal para DEMF y ESMF.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-131">In this example, a new "Europe" business unit is manually created in Dataverse as the parent for both DEMF and ESMF.</span></span> <span data-ttu-id="6fd7b-132">Esta nueva unidad de negocio raíz no está relacionada con la escritura dual.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-132">This new root business unit is unrelated to dual-write.</span></span> <span data-ttu-id="6fd7b-133">Sin embargo, se puede usar para dar a los miembros del “equipo de ventas EUR” acceso a los datos de la cuenta en DEMF y ESMF estableciendo la visibilidad de los datos en **BU principal/secundaria** en el rol de seguridad asociado.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-133">However, it can be used to give members of the "EUR Sales" team access to account data in both DEMF and ESMF by setting the data visibility to **Parent/Child BU** in the associated security role.</span></span>

<span data-ttu-id="6fd7b-134">Un tema final a discutir es cómo la escritura dual determina a qué equipo propietario debe asignar las filas.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-134">A final topic to discuss is how dual-write determines which owner team it should assign rows to.</span></span> <span data-ttu-id="6fd7b-135">Este comportamiento se controla mediante la columna **Equipo propietario predeterminado** en la fila cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-135">This behavior is controlled by the **Default owning team** column on the cdm\_Company row.</span></span> <span data-ttu-id="6fd7b-136">Cuando la fila cdm\_Company está habilitada para la escritura dual, un complemento crea automáticamente la unidad de negocio asociada y el equipo propietario (si no existe ya) y establece la columna **Equipo propietario predeterminado** .</span><span class="sxs-lookup"><span data-stu-id="6fd7b-136">When a cdm\_Company row is enabled for dual-write, a plug-in automatically creates the associated business unit and owner team (if it doesn't already exist), and sets the **Default owning team** column.</span></span> <span data-ttu-id="6fd7b-137">El administrador puede cambiar esta columna a un valor distinto.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-137">The admin can change this column to a different value.</span></span> <span data-ttu-id="6fd7b-138">Sin embargo, el administrador no puede desactivar la columna cuando la tabla está habilitada para la escritura dual.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-138">However, the admin can't clear the column as long as the table is enabled for dual-write.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="6fd7b-139">![Columna de Equipo propietario predeterminado](media/dual-write-default-owning-team.jpg)</span><span class="sxs-lookup"><span data-stu-id="6fd7b-139">![Default owning team column](media/dual-write-default-owning-team.jpg)</span></span>

## <a name="company-striping-and-bootstrapping"></a><span data-ttu-id="6fd7b-140">Fragmentación y arranque de la empresa</span><span class="sxs-lookup"><span data-stu-id="6fd7b-140">Company striping and bootstrapping</span></span>

<span data-ttu-id="6fd7b-141">La integración de Dataverse aporta paridad a la empresa mediante un identificador de empresa para fragmentar los datos.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-141">Dataverse integration brings company parity by using a company identifier to stripe data.</span></span> <span data-ttu-id="6fd7b-142">Como muestra la siguiente ilustración, todas las tablas específicas de la empresa se extienden de modo que tengan una relación muchos a uno (N:1) con la tabla cdm\_Company.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-142">As the following illustration shows, all company-specific tables are extended so that they have a many-to-one (N:1) relationship with the cdm\_Company table.</span></span>

> [!div class="mx-imgBorder"]
<span data-ttu-id="6fd7b-143">![Relación N:1 entre una tabla específica de la empresa y la tabla cdm_Company](media/dual-write-bootstrapping.png)</span><span class="sxs-lookup"><span data-stu-id="6fd7b-143">![N:1 relationship between a company-specific table and the cdm_Company table](media/dual-write-bootstrapping.png)</span></span>

+ <span data-ttu-id="6fd7b-144">Para las filas, después de que se agrega y se guarda una empresa, el valor pasa a ser de solo lectura.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-144">For rows, after a company is added and saved, the value becomes read-only.</span></span> <span data-ttu-id="6fd7b-145">Por lo tanto, los usuarios deben asegurarse de que se selecciona la empresa correcta.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-145">Therefore, users should make sure that they select the correct company.</span></span>
+ <span data-ttu-id="6fd7b-146">Solo las filas con datos de la empresa son aptos para la escritura dual entre la aplicación y Dataverse.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-146">Only rows that have company data are eligible for dual-write between the application and Dataverse.</span></span>
+ <span data-ttu-id="6fd7b-147">Para los datos existentes de Dataverse, pronto habrá una experiencia de arranque dirigida por el administrador.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-147">For existing Dataverse data, an admin-led bootstrapping experience will soon be available.</span></span>


## <a name="autopopulate-company-name-in-customer-engagement-apps"></a><span data-ttu-id="6fd7b-148">Autocompletar el nombre de la empresa en las aplicaciones de involucración del cliente</span><span class="sxs-lookup"><span data-stu-id="6fd7b-148">Autopopulate company name in customer engagement apps</span></span>

<span data-ttu-id="6fd7b-149">Hay varias formas de completar automáticamente el nombre de la empresa en las aplicaciones de involucración del cliente.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-149">There are several ways to auto-populate the company name in customer engagement apps.</span></span>

+ <span data-ttu-id="6fd7b-150">Si es administrador del sistema, puede configurar la empresa predeterminada navegando a **Configuración avanzada > Sistema > Seguridad > Usuarios**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-150">If you are a system administrator, you can set the default company by navigating to **Advanced Settings > System > Security > Users**.</span></span> <span data-ttu-id="6fd7b-151">Abra el formulario **Usuario** y, en la sección **Información de la organización**, configure el valor **Empresa predeterminada en formularios**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-151">Open the **User** form, and in the **Organization Information** section, set the **Company to default on Forms** value.</span></span>

    :::image type="content" source="media/autopopulate-company-name-1.png" alt-text="Establezca la empresa predeterminada en la sección Información de la organización.":::

+ <span data-ttu-id="6fd7b-153">Si tiene acceso de **Escritura** a la tabla **SystemUser** para el nivel **Unidad de negocio**, puede cambiar la empresa predeterminada en cualquier formulario seleccionando una empresa en el menú desplegable **Empresa**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-153">If you have **Write** access to the **SystemUser** table for the **Business Unit** level, then you can change the default company on any form by selecting a company from the **Company** drop-down menu.</span></span>

    :::image type="content" source="media/autopopulate-company-name-2.png" alt-text="Cambio del nombre de la empresa en una nueva cuenta.":::

+ <span data-ttu-id="6fd7b-155">Si tiene acceso de **Escribir** a los datos en más de una empresa, en ese caso puede cambiar la empresa predeterminada eligiendo una fila que pertenezca a otra empresa.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-155">If you have **Write** access to data in more than one company, then you can change the default company by choosing a row that belongs to different company.</span></span>

    :::image type="content" source="media/autopopulate-company-name-3.png" alt-text="La elección de una fila cambia la empresa predeterminada.":::

+ <span data-ttu-id="6fd7b-157">Si es un configurador o administrador del sistema y desea completar automáticamente los datos de la empresa en un formulario personalizado, puede usar [eventos de formulario](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span><span class="sxs-lookup"><span data-stu-id="6fd7b-157">If you are a system configurator or administrator, and you want to auto-populate company data on a custom form, then you can use [form events](https://docs.microsoft.com/powerapps/developer/model-driven-apps/clientapi/events-forms-grids).</span></span> <span data-ttu-id="6fd7b-158">Agregue una referencia de JavaScript a **msdyn_ /DefaultCompany.js** y utilice los siguientes eventos.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-158">Add a JavaScript reference to **msdyn_/DefaultCompany.js** and use the following events.</span></span> <span data-ttu-id="6fd7b-159">Puede utilizar cualquier formulario listo para usar, por ejemplo, el formulario **Cuenta**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-159">You can use any out-of-the-box form, for example, the **Account** form.</span></span>

    + <span data-ttu-id="6fd7b-160">Evento **OnLoad** para el formulario: establezca la columna **defaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-160">**OnLoad** event for the form: Set the **defaultCompany** column.</span></span>
    + <span data-ttu-id="6fd7b-161">Evento **OnChange** para la columna **Empresa**: establezca la columna **updateDefaultCompany**.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-161">**OnChange** event for the **Company** column: Set the **updateDefaultCompany** column.</span></span>

## <a name="apply-filtering-based-on-the-company-context"></a><span data-ttu-id="6fd7b-162">Aplicar filtros basados en el contexto de la empresa</span><span class="sxs-lookup"><span data-stu-id="6fd7b-162">Apply filtering based on the company context</span></span>

<span data-ttu-id="6fd7b-163">Para aplicar el filtrado basado en el contexto de la empresa en sus formularios personalizados o en las columnas de búsqueda personalizadas agregadas a los formularios estándar, abra el formulario y use la sección **Filtrado de registros relacionados** para aplicar el filtro de empresa.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-163">To apply filtering based on the company context on your custom forms or on custom lookup columns added to the standard forms, open the form and use the **Related Records Filtering** section to apply the company filter.</span></span> <span data-ttu-id="6fd7b-164">Debe establecer esto para cada columna de búsqueda que requiera filtrado según la empresa subyacente en una fila determinada.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-164">You must set this for each lookup column that requires filtering based on the underlying company on a given row.</span></span> <span data-ttu-id="6fd7b-165">El ajuste se muestra para **Cuenta** en la siguiente ilustración.</span><span class="sxs-lookup"><span data-stu-id="6fd7b-165">The setting is shown for **Account** in the following illustration.</span></span>

:::image type="content" source="media/apply-company-context.png" alt-text="Aplicar el contexto de la empresa":::



[!INCLUDE[footer-include](../../../../includes/footer-banner.md)]