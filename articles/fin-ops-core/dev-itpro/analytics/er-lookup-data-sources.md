---
title: Configurar las fuentes de datos de búsqueda para utilizar parámetros específicos de la aplicación de informes electrónicos
description: En este tema se explica cómo puede configurar orígenes de datos de búsqueda en formatos de informes electrónicos (ER) para usar parámetros específicos de la aplicación de ER.
author: NickSelin
ms.date: 04/02/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 131d14f1f1aa329bd71b1f8a4015192736bd8e44
ms.sourcegitcommit: 08ce2a9ca1f02064beabfb9b228717d39882164b
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 05/11/2021
ms.locfileid: "6022584"
---
# <a name="configure-lookup-data-sources-to-use-er-application-specific-parameters"></a><span data-ttu-id="2ef03-103">Configurar las fuentes de datos de búsqueda para utilizar parámetros específicos de la aplicación de informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="2ef03-103">Configure Lookup data sources to use ER application-specific parameters</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="2ef03-104">La característica de parámetros específicos de la aplicación de [informes electrónicos (ER)](general-electronic-reporting.md) permite a los usuarios avanzados configurar el filtrado de datos en un formato de ER de modo que se base en un conjunto de reglas abstractas.</span><span class="sxs-lookup"><span data-stu-id="2ef03-104">The [Electronic reporting (ER)](general-electronic-reporting.md) application-specific parameters feature lets you configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="2ef03-105">Este conjunto de reglas se puede configurar para utilizar el origen de datos del tipo **búsqueda** disponible en un formato de ER.</span><span class="sxs-lookup"><span data-stu-id="2ef03-105">This set of rules can be configured to use the data source of the **Lookup** type that is available in an ER format.</span></span> <span data-ttu-id="2ef03-106">Luego puede especificar reglas reales más allá de los diseñadores de componentes de ER mediante la interfaz de usuario (UI) que se genera automáticamente en función de la configuración del origen de datos de **búsqueda** del formato de ER correspondiente y de los datos de la entidad jurídica actual.</span><span class="sxs-lookup"><span data-stu-id="2ef03-106">You can then specify real rules beyond the ER components designers by using the user interface (UI) that is automatically generated based on the settings of the **Lookup** data source of the corresponding ER format and the current legal entity data.</span></span> <span data-ttu-id="2ef03-107">Eventualmente, el origen de datos de **búsqueda** del formato ER accederá a las reglas especificadas cuando se ejecuta este formato ER.</span><span class="sxs-lookup"><span data-stu-id="2ef03-107">Eventually, the specified rules will be accessed by the ER format's **Lookup** data source when this ER format is executed.</span></span>

> [!NOTE]
> <span data-ttu-id="2ef03-108">Utilice las fuentes de datos configuradas del formato ER editable para especificar qué datos de la aplicación se utilizan para configurar reglas reales.</span><span class="sxs-lookup"><span data-stu-id="2ef03-108">Use the configured data sources of the editable ER format to specify what application data is used to configure real rules.</span></span>

<span data-ttu-id="2ef03-109">Utilizar el [Diseñador de operaciones de ER](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) para traer una fuente de datos de tipo de **búsqueda** en su formato ER.</span><span class="sxs-lookup"><span data-stu-id="2ef03-109">Use the [ER Operations designer](general-electronic-reporting.md#building-a-format-that-uses-a-data-model-as-a-base) to bring a data source of the **Lookup** type in to your ER format.</span></span> <span data-ttu-id="2ef03-110">La fuente de datos debe configurarse para describir cómo se ven sus reglas abstractas, incluidas las siguientes:</span><span class="sxs-lookup"><span data-stu-id="2ef03-110">The data source must be configured to describe how your abstract rules look, including the following:</span></span>

   - <span data-ttu-id="2ef03-111">El conjunto de parámetros de cierto tipo de datos cuyo valor se proporciona para especificar una sola regla.</span><span class="sxs-lookup"><span data-stu-id="2ef03-111">The parameter set of certain data type whose value is provided to specify a single rule.</span></span>
   - <span data-ttu-id="2ef03-112">El tipo de valor de cierto tipo de datos que es devuelto por una sola regla cuando esta regla se considera la más apropiada entre otras.</span><span class="sxs-lookup"><span data-stu-id="2ef03-112">The value type of certain data type that is returned by a single rule when this rule is considered the most appropriate among others.</span></span>

<span data-ttu-id="2ef03-113">Puede configurar los siguientes tipos de orígenes de datos de **búsqueda** según el tipo de valor devuelto por cualquier regla configurada:</span><span class="sxs-lookup"><span data-stu-id="2ef03-113">You can configure the following types of **Lookup** data sources depending on the type of value that is returned by any configured rule:</span></span>

   - <span data-ttu-id="2ef03-114">Utilizar el tipo **Modelo de datos\Búsqueda** cuando deba devolverse un valor de enumeración de modelo.</span><span class="sxs-lookup"><span data-stu-id="2ef03-114">Use the **Data model\Lookup** type when a model enumeration value must be returned.</span></span>
   - <span data-ttu-id="2ef03-115">Utilizar el tipo **Dynamics 365 Operations\Búsqueda** cuando un valor de enumeración de la aplicación o un valor de aplicación de [tipo de datos extendido](../extensibility/extensible-edts.md) debe devolverse.</span><span class="sxs-lookup"><span data-stu-id="2ef03-115">Use the **Dynamics 365 Operations\Lookup** type when an application enumeration value or an application [extended data type](../extensibility/extensible-edts.md) value must be returned.</span></span>
   - <span data-ttu-id="2ef03-116">Utilizar el tipo **Enuemración de formato\Búsqueda** cuando deba devolverse un valor de enumeración de formato.</span><span class="sxs-lookup"><span data-stu-id="2ef03-116">Use the **Format enumeration\Lookup** type when a format enumeration value must be returned.</span></span>

<span data-ttu-id="2ef03-117">La siguiente ilustración muestra cómo se puede configurar una enumeración de formato en el formato ER de muestra.</span><span class="sxs-lookup"><span data-stu-id="2ef03-117">The following illustration shows how a format enumeration can be configured in the sample ER format.</span></span>

   ![Mostrar una enumeración de formato como base para la fuente de datos de búsqueda configurada](./media/er-lookup-data-sources-img1.gif)

<span data-ttu-id="2ef03-119">La siguiente ilustración muestra los componentes de formato que se configuraron para informar diferentes tipos de impuestos en una sección diferente de un informe generado.</span><span class="sxs-lookup"><span data-stu-id="2ef03-119">The following illustration shows the format components that were configured to report different type of taxes in a different section of a generated report.</span></span>

   ![Mostrar las secciones de formato para informar por separado diferentes tipos de impuestos](./media/er-lookup-data-sources-img2.png)

<span data-ttu-id="2ef03-121">La siguiente ilustración muestra cómo el diseñador de operaciones de ER permite la adición de una fuente de datos del tipo **Formato de enumeración\Búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="2ef03-121">The following illustration shows how the ER Operations designer allows the addition of a data source of the **Format enumeration\Lookup** type.</span></span>  <span data-ttu-id="2ef03-122">La fuente de datos agregada se configura para devolver un valor de la enumeración de formato de `List of taxation levels`.</span><span class="sxs-lookup"><span data-stu-id="2ef03-122">The added data source is configured as returning a value of the `List of taxation levels` format enumeration.</span></span>

   ![Agregar una fuente de datos ER del tipo de enumeración\Búsqueda de formato](./media/er-lookup-data-sources-img3.gif)

<span data-ttu-id="2ef03-124">La siguiente ilustración muestra cómo la fuente de datos agregada está configurada para usar el campo **Código** de la lista de registros **Model.Data.Tax** del origen de datos **Modelo** como parámetro que debe especificarse para cada regla configurada.</span><span class="sxs-lookup"><span data-stu-id="2ef03-124">The following illustration shows how the added data source is configured to use the **Code** field of the **Model.Data.Tax** record list of the **Model** data source as a parameter that must be specified for every configured rule.</span></span>

![Configuración de parámetros de la fuente de datos agregada del tipo de enumeración\Búsqueda de formato](./media/er-lookup-data-sources-img4.gif)

<span data-ttu-id="2ef03-126">La fuente de datos `Model.Data.Tax` agregada está configurada para especificar un código de impuestos para cada regla configurada accediendo a los registros de la tabla de aplicaciones **TaxTable**.</span><span class="sxs-lookup"><span data-stu-id="2ef03-126">The added `Model.Data.Tax` data source is configured to specify a tax code for every configured rule by accessing records of the **TaxTable** application table.</span></span>

   ![Revisión del origen de datos de búsqueda de una empresa de tipo de enumeración\Búsqueda de formato](./media/er-lookup-data-sources-img5.gif)

<span data-ttu-id="2ef03-128">Puede configurar las reglas de búsqueda para el formato de ER seleccionado mediante la interfaz de usuario que se alinea automáticamente con la estructura de la fuente de datos configurada.</span><span class="sxs-lookup"><span data-stu-id="2ef03-128">You can set up the lookup rules for the selected ER format by using the UI that is automatically aligned with the structure of the configured data source.</span></span> <span data-ttu-id="2ef03-129">Actualmente, esta interfaz de usuario requiere que para cada regla, especifique el valor devuelto como el formato de valor de enumeración de `List of taxation levels`, así como el código de impuestos como parámetro.</span><span class="sxs-lookup"><span data-stu-id="2ef03-129">Currently, this UI requires that for each rule, you specify the returned value as the `List of taxation levels` format enumeration value as well as the tax code as a parameter.</span></span>

   ![Configure las reglas para la fuente de datos configurada](./media/er-lookup-data-sources-img6.gif)

<span data-ttu-id="2ef03-131">La siguiente ilustración muestra cómo la fuente de datos `Model.Data.Summary.LevelByLookup` del tipo **Campo calculado** se puede configurar para llamar a la fuente de datos de **búsqueda** configurada que proporciona los parámetros necesarios.</span><span class="sxs-lookup"><span data-stu-id="2ef03-131">The following illustration shows how the `Model.Data.Summary.LevelByLookup` data source of the **Calculated field** type can be configured to call the configured **Lookup** data source providing the required parameters.</span></span> <span data-ttu-id="2ef03-132">Para procesar esta llamada en tiempo de ejecución, ER revisa la lista de reglas configuradas en la secuencia definida para ubicar la primera regla que satisface las condiciones proporcionadas.</span><span class="sxs-lookup"><span data-stu-id="2ef03-132">To process this call at runtime, ER goes through the list of configured rules in the defined sequence to locate the first rule that satisfies the provided conditions.</span></span> <span data-ttu-id="2ef03-133">En este ejemplo, es la regla que contiene el código de impuestos que coincide con el proporcionado.</span><span class="sxs-lookup"><span data-stu-id="2ef03-133">In this example, it's the rule that contains the tax code that matches the provided one.</span></span> <span data-ttu-id="2ef03-134">Como resultado, se encuentra la regla más adecuada y esta fuente de datos devuelve el valor de enumeración configurado para la regla encontrada.</span><span class="sxs-lookup"><span data-stu-id="2ef03-134">As the result, the most appropriate rule is found and the enumeration value that is configured for the found rule is returned by this data source.</span></span>

> [!NOTE]
> <span data-ttu-id="2ef03-135">Se lanza una excepción cuando no se encuentra una regla aplicable.</span><span class="sxs-lookup"><span data-stu-id="2ef03-135">An exception is thrown when no applicable rule is found.</span></span> <span data-ttu-id="2ef03-136">Para evitar estas excepciones, configure reglas adicionales al final de la lista de reglas para manejar los casos en los que se proporciona un valor no configurado o ningún valor.</span><span class="sxs-lookup"><span data-stu-id="2ef03-136">To prevent these exceptions, configure additional rules at the end of the rules list to handle cases when a non-configured value or no value is provided.</span></span> <span data-ttu-id="2ef03-137">Utilizar las opciones **\*No en blanco\*** y **\*En blanco\*** en consecuencia.</span><span class="sxs-lookup"><span data-stu-id="2ef03-137">Use the **\*Not blank**\* and **\*Blank**\* options accordingly.</span></span>  
>
> ![Agregar una fuente de datos para llamar a la fuente de datos de búsqueda configurada](./media/er-lookup-data-sources-img7.png)

<span data-ttu-id="2ef03-139">Cuando configura la opción **Compañías cruzadas** como **Sí** para la fuente de datos de búsqueda editable, agrega un nuevo parámetro requerido **Empresa** al conjunto de parámetros de esta fuente de datos.</span><span class="sxs-lookup"><span data-stu-id="2ef03-139">When you set the **Cross-company** option to **Yes** for the editable lookup data source, you add a new required **Company** parameter to the set of parameters of this data source.</span></span> <span data-ttu-id="2ef03-140">El valor del parámetro **Empresa** debe especificarse en tiempo de ejecución cuando se llama a la fuente de datos de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="2ef03-140">The value of the **Company** parameter must be specified at runtime when the lookup data source is called.</span></span> <span data-ttu-id="2ef03-141">Cuando se especifica el código de la empresa en tiempo de ejecución, las reglas configuradas para esta empresa se utilizan para encontrar la regla más adecuada y se devuelve el valor correspondiente.</span><span class="sxs-lookup"><span data-stu-id="2ef03-141">When the company code is specified at runtime, the rules configured for this company are used to find the most appropriate rule, and the corresponding value is returned.</span></span> <span data-ttu-id="2ef03-142">La siguiente ilustración muestra cómo puede hacer esto y cómo se cambia el conjunto de parámetros de la fuente de datos editables.</span><span class="sxs-lookup"><span data-stu-id="2ef03-142">The following illustration shows how you can do this and how the set of parameters of the editable data source is changed.</span></span>

   ![Revisión del origen de datos de búsqueda entre empresas de tipo de enumeración\Búsqueda de formato](./media/er-lookup-data-sources-img8.gif)

> [!NOTE]
> <span data-ttu-id="2ef03-144">Seleccione cada empresa por separado para configurar el conjunto de reglas para esta fuente de datos de búsqueda del formato ER editable.</span><span class="sxs-lookup"><span data-stu-id="2ef03-144">Select every company seperately to configure the set of rules for this lookup data source of the editable ER format.</span></span> <span data-ttu-id="2ef03-145">Se lanza una excepción en tiempo de ejecución cuando se llama a la búsqueda entre empresas con el código de la empresa para la que no se completó la configuración de búsqueda.</span><span class="sxs-lookup"><span data-stu-id="2ef03-145">An exception is thrown at runtime when the cross-company lookup is called with the code of the company for which the lookup setting was not completed.</span></span>
>
> <span data-ttu-id="2ef03-146">Asegúrese de otorgar permisos a un usuario que ejecute el formato ER con la fuente de datos de **búsqueda** entre empresas para acceder a los datos de todas las empresas que están dentro del alcance de esta fuente de datos.</span><span class="sxs-lookup"><span data-stu-id="2ef03-146">Make sure that you grant permissions for a user who runs the ER format with the cross-company **Lookup** data source to access the data of every company that is in scope of this data source.</span></span> <span data-ttu-id="2ef03-147">De lo contrario, se lanza una excepción en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="2ef03-147">Otherwise, an exception is thrown at runtime.</span></span>

<span data-ttu-id="2ef03-148">A partir de la versión 10.0.19, las capacidades ampliadas de las fuentes de datos de **búsqueda** están disponibles.</span><span class="sxs-lookup"><span data-stu-id="2ef03-148">Starting in version 10.0.19, the extended capabilities of the **Lookup** data sources are available.</span></span> <span data-ttu-id="2ef03-149">Cuando configura la opción **Extendido** en **Sí** para la fuente de datos de búsqueda editable, la fuente de datos de búsqueda configurada se transforma en la fuente de datos estructurados que ofrece las capacidades adicionales para analizar el conjunto de reglas configurado.</span><span class="sxs-lookup"><span data-stu-id="2ef03-149">When you set the **Extended** option to **Yes** for the editable lookup data source, the configured lookup data source is transformed to the structured data source that offers the additional capabilities to analyze the configured set of rules.</span></span> <span data-ttu-id="2ef03-150">En la ilustración siguiente se muestra esta transformación.</span><span class="sxs-lookup"><span data-stu-id="2ef03-150">The following illustration shows this transformation.</span></span>

   ![Revisión del origen de datos de búsqueda estructurado de tipo de enumeración\Búsqueda de formato](./media/er-lookup-data-sources-img9.gif)

- <span data-ttu-id="2ef03-152">El subelemento de **búsqueda** está diseñado como una función para encontrar la regla más apropiada del conjunto de reglas configurables según el conjunto de parámetros proporcionado.</span><span class="sxs-lookup"><span data-stu-id="2ef03-152">The **Lookup** sub-item is designed as a function to find the most appropriate rule from the set of configurable rules based on the provided set of parameters.</span></span>
- <span data-ttu-id="2ef03-153">El subelemento **IsLookupResultSet** está diseñado como una función para aceptar el valor proporcionado de la fuente de datos de enumeración base y devolver el valor *booleano* de **True** cuando el conjunto de reglas contiene al menos una regla para la cual el valor de enumeración proporcionado se configuró como valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="2ef03-153">The **IsLookupResultSet** sub-item is designed as a function to accept the provided value of the base enumeration data source and return the *Boolean* value of **True** when the set of rules contain at least one rule for which the provided enumeration value was configured as a returned value.</span></span> <span data-ttu-id="2ef03-154">Esta función devuelve el valor *Booleano* de **False** cuando no hay reglas configuradas para devolver el valor de enumeración proporcionado.</span><span class="sxs-lookup"><span data-stu-id="2ef03-154">This function returns the *Boolean* value of **False** when there are no rules configured to return the provided enumeration value.</span></span>
- <span data-ttu-id="2ef03-155">El subelemento de **configuración** está diseñado como una función que devuelve el conjunto de reglas configuradas como registros de una lista de registros.</span><span class="sxs-lookup"><span data-stu-id="2ef03-155">The **Setting** sub-item is designed as a function that returns the set of configured rules as records of a record list.</span></span> <span data-ttu-id="2ef03-156">Los valores devueltos y el conjunto de parámetros de las reglas configuradas se presentan en cada registro devuelto como campos de los tipos de datos relevantes:</span><span class="sxs-lookup"><span data-stu-id="2ef03-156">The returned values and the set of parameters of the configured rules are presented in every returned record as fields of the relevant data types:</span></span>

    - <span data-ttu-id="2ef03-157">El valor devuelto se presenta como campo **Resultado de la búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="2ef03-157">The returned value is presented as the **Lookup result** field.</span></span>
    - <span data-ttu-id="2ef03-158">Los parámetros configurados se presentan como campos con nombres de parámetros (campo **Código** en este ejemplo).</span><span class="sxs-lookup"><span data-stu-id="2ef03-158">The configured parameters are presented as fields having names of parameters (**Code** field in this example).</span></span>

<span data-ttu-id="2ef03-159">Para obtener más información sobre cómo configurar el origen de datos de **búsqueda**, vea [Configure los formatos de ER para utilizar parámetros que se especifican por entidad jurídica](er-app-specific-parameters-configure-format.md).</span><span class="sxs-lookup"><span data-stu-id="2ef03-159">For more information about to how configure the **Lookup** data source, see [Configure ER formats to use parameters that are specified per legal entity](er-app-specific-parameters-configure-format.md).</span></span> <span data-ttu-id="2ef03-160">Para aprender a configurar las reglas de búsqueda, consulte [Configurar los parámetros de un formato ER por entidad legal](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="2ef03-160">To learn how to set the Lookup rules, see [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md).</span></span>

## <a name="additional-resources"></a><span data-ttu-id="2ef03-161">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="2ef03-161">Additional resources</span></span>

[<span data-ttu-id="2ef03-162">Configurar formatos de informes electrónicos para usar parámetros especificados por entidad jurídica</span><span class="sxs-lookup"><span data-stu-id="2ef03-162">Configure ER formats to use parameters that are specified per legal entity</span></span>](er-app-specific-parameters-configure-format.md)

[<span data-ttu-id="2ef03-163">Configurar los parámetros de un formato de informes electrónicos por entidad jurídica</span><span class="sxs-lookup"><span data-stu-id="2ef03-163">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)
