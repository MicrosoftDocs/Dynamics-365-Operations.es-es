---
title: Diseñador de fórmulas en los informes electrónicos (ER)
description: Este tema proporciona información general sobre cómo usar el diseñador de fórmulas en los informes electrónicos (ER).
author: NickSelin
ms.date: 12/05/2019
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERDataModelDesigner, ERExpressionDesignerFormula, ERMappedFormatDesigner, ERModelMappingDesigner
audience: Application User, IT Pro
ms.reviewer: kfend
ms.custom: 58771
ms.assetid: 24223e13-727a-4be6-a22d-4d427f504ac9
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2016-02-28
ms.dyn365.ops.version: AX 7.0.0
ms.openlocfilehash: 2dcede0818630329a5608c2d294c9c9f4f749f13
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/31/2021
ms.locfileid: "5750141"
---
# <a name="formula-designer-in-electronic-reporting-er"></a><span data-ttu-id="90a03-103">Diseñador de fórmulas en los informes electrónicos (ER)</span><span class="sxs-lookup"><span data-stu-id="90a03-103">Formula designer in Electronic reporting (ER)</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="90a03-104">Este tema explica cómo usar el diseñador de fórmula en Informes electrónicos (ER).</span><span class="sxs-lookup"><span data-stu-id="90a03-104">This topic explains how to use the formula designer in Electronic reporting (ER).</span></span> <span data-ttu-id="90a03-105">Cuando diseña un formato para un documento electrónico específico en ER, puede usar fórmulas para transformar datos de modo que cumplan los requisitos para el cumplimiento y el formato de ese documento.</span><span class="sxs-lookup"><span data-stu-id="90a03-105">When you design a format for a specific electronic document in ER, you can use formulas to transform data so that it meets the requirements for the document's fulfillment and formatting.</span></span> <span data-ttu-id="90a03-106">Estas fórmulas se asemejan a fórmulas en Microsoft Excel.</span><span class="sxs-lookup"><span data-stu-id="90a03-106">These formulas resemble formulas in Microsoft Excel.</span></span> <span data-ttu-id="90a03-107">Se admiten diversos tipos de funciones en las fórmulas: de texto, de fecha y hora, matemáticas, lógicas, de información y de conversión de tipos de datos, así como otras funciones específicas del dominio empresarial.</span><span class="sxs-lookup"><span data-stu-id="90a03-107">Various types of functions are supported in the formulas: text, date and time, mathematical, logical, information, and data type conversion functions, and also other, business domain–specific functions.</span></span>

## <a name="formula-designer-overview"></a><span data-ttu-id="90a03-108">Visión general del diseñador de fórmulas</span><span class="sxs-lookup"><span data-stu-id="90a03-108">Formula designer overview</span></span>

<span data-ttu-id="90a03-109">Los ER admiten el diseñador de fórmulas.</span><span class="sxs-lookup"><span data-stu-id="90a03-109">ER supports the formula designer.</span></span> <span data-ttu-id="90a03-110">Por tanto, en el momento del diseño, puede configurar las expresiones que se pueden usar para las siguientes tareas en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="90a03-110">Therefore, at design time, you can configure expressions that can be used for the following tasks at runtime:</span></span>

- <span data-ttu-id="90a03-111">Transforme los datos que se reciben de una base de datos de una aplicación, y que se deben introducir en un modelo de datos de ER designado para ser un origen de datos para los formatos de ER.</span><span class="sxs-lookup"><span data-stu-id="90a03-111">Transform data that is received from an application database and that should be entered in an ER data model that is designed to be a data source for ER formats.</span></span> <span data-ttu-id="90a03-112">(Por ejemplo, estas transformaciones pueden incluir el filtrado, la agrupación y la conversión de tipos de datos.)</span><span class="sxs-lookup"><span data-stu-id="90a03-112">(For example, these transformations might include filtering, grouping, and data type conversion.)</span></span>
- <span data-ttu-id="90a03-113">Formatee los datos que deben enviarse a un documento electrónico de generación de acuerdo con el diseño y las condiciones de un formato de ER específico.</span><span class="sxs-lookup"><span data-stu-id="90a03-113">Format data that must be sent to a generating electronic document in accordance with the layout and conditions of a specific ER format.</span></span> <span data-ttu-id="90a03-114">(Por ejemplo, el formato puede realizarse de acuerdo con el idioma o la cultura solicitada, o la codificación).</span><span class="sxs-lookup"><span data-stu-id="90a03-114">(For example, the formatting might be done in accordance with the requested language or culture, or the encoding).</span></span>
- <span data-ttu-id="90a03-115">Controle el proceso de creación de documentos electrónicos.</span><span class="sxs-lookup"><span data-stu-id="90a03-115">Control the process of creating electronic documents.</span></span> <span data-ttu-id="90a03-116">(Por ejemplo, las expresiones pueden habilitar o deshabilitar la salida de elementos específicos del formato, en función de datos de procesamiento.</span><span class="sxs-lookup"><span data-stu-id="90a03-116">(For example, the expressions can enable or disable the output of specific elements of the format, depending on processing data.</span></span> <span data-ttu-id="90a03-117">También pueden interrumpir el proceso de creación del documento o enviar mensajes a los usuarios.)</span><span class="sxs-lookup"><span data-stu-id="90a03-117">They can also interrupt the document creation process or throw messages to users.)</span></span>

<span data-ttu-id="90a03-118">Puede abrir la página **Diseñador de fómulas** cuando realice cualquiera de las siguientes acciones:</span><span class="sxs-lookup"><span data-stu-id="90a03-118">You can open the **Formula designer** page when you perform any of the following actions:</span></span>

- <span data-ttu-id="90a03-119">Enlazar artículos del origen de datos a los componentes del modelo de datos.</span><span class="sxs-lookup"><span data-stu-id="90a03-119">Bind data source items to data model components.</span></span>
- <span data-ttu-id="90a03-120">Enlazar artículos del origen de datos a componentes de formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-120">Bind data source items to format components.</span></span>
- <span data-ttu-id="90a03-121">Completar el mantenimiento de campos calculados que forman parte de orígenes de datos.</span><span class="sxs-lookup"><span data-stu-id="90a03-121">Complete maintenance of calculated fields that are part of data sources.</span></span>
- <span data-ttu-id="90a03-122">Definir las condiciones de visibilidad para los parámetros de entrada del usuario.</span><span class="sxs-lookup"><span data-stu-id="90a03-122">Define the visibility conditions for user input parameters.</span></span>
- <span data-ttu-id="90a03-123">Diseñar las transformaciones de un formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-123">Design a format's transformations.</span></span>
- <span data-ttu-id="90a03-124">Definir las condiciones de habilitación para los componentes del formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-124">Define the enabling conditions for the format's components.</span></span>
- <span data-ttu-id="90a03-125">Definir los nombres de archivo para los componentes de ARCHIVO de formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-125">Define the file names for the format's FILE components.</span></span>
- <span data-ttu-id="90a03-126">Definir las condiciones para las validaciones de control de proceso.</span><span class="sxs-lookup"><span data-stu-id="90a03-126">Define the conditions for process control validations.</span></span>
- <span data-ttu-id="90a03-127">Definir el texto de mensaje para las validaciones de control de proceso.</span><span class="sxs-lookup"><span data-stu-id="90a03-127">Define the message text for process control validations.</span></span>

## <a name="data-binding"></a><a name="Binding"></a><span data-ttu-id="90a03-128">Vinculación de datos</span><span class="sxs-lookup"><span data-stu-id="90a03-128">Data binding</span></span>

<span data-ttu-id="90a03-129">El diseñador de fórmulas de ER se puede usar para definir una expresión que transforme los datos que se reciben desde orígenes de datos de forma que se puedan introducir en el consumidor de datos en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="90a03-129">The ER formula designer can be used to define an expression that transforms data that is received from data sources, so that the data can be entered in the data consumer in the following ways at runtime:</span></span>

- <span data-ttu-id="90a03-130">Desde los orígenes de datos de la aplicación y los parámetros de tiempo de ejecución a un modelo de datos de ER</span><span class="sxs-lookup"><span data-stu-id="90a03-130">From application data sources and runtime parameters to an ER data model</span></span>
- <span data-ttu-id="90a03-131">Desde un modelo de datos de ER a un formato de ER</span><span class="sxs-lookup"><span data-stu-id="90a03-131">From an ER data model to an ER format</span></span>
- <span data-ttu-id="90a03-132">Desde los orígenes de datos de la aplicación y los parámetros de tiempo de ejecución a un modelo de datos de formato ER</span><span class="sxs-lookup"><span data-stu-id="90a03-132">From application data sources and runtime parameters to an ER format</span></span>

<span data-ttu-id="90a03-133">En la ilustración siguiente se muestra el diseño de una expresión de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-133">The following illustration shows the design of an expression of this type.</span></span> <span data-ttu-id="90a03-134">En este ejemplo, la expresión redondea el valor del campo **Intrastat.AmountMST** de la tabla Intrastat hasta dos posiciones decimales y luego devuelve el valor redondeado.</span><span class="sxs-lookup"><span data-stu-id="90a03-134">In this example, the expression rounds the value of the **Intrastat.AmountMST** field in the Intrastat table to two decimal places and then returns the rounded value.</span></span>

<span data-ttu-id="90a03-135">[![Expresión de vinculación de datos](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-135">[![Data binding expression](./media/picture-expression-binding.jpg)](./media/picture-expression-binding.jpg)</span></span>

<span data-ttu-id="90a03-136">En la ilustración siguiente se muestra cómo usar una expresión de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-136">The following illustration shows how an expression of this type can be used.</span></span> <span data-ttu-id="90a03-137">En este ejemplo, el resultado de la expresión diseñada se introduce en el componente **Transaction.InvoicedAmount** del modelo de datos **Modelo de notificación tributaria**.</span><span class="sxs-lookup"><span data-stu-id="90a03-137">In this example, the result of the designed expression is entered in the **Transaction.InvoicedAmount** component of the **Tax reporting model** data model.</span></span>

<span data-ttu-id="90a03-138">[![Expresión de vinculación de datos empleada](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-138">[![Data binding expression being used](./media/picture-expression-binding2.jpg)](./media/picture-expression-binding2.jpg)</span></span>

<span data-ttu-id="90a03-139">En tiempo de ejecución, la fórmula designada, `ROUND (Intrastat.AmountMST, 2)`, redondea el valor del campo **AmountMST** para cada registro de la tabla Intrastat a dos posiciones decimales.</span><span class="sxs-lookup"><span data-stu-id="90a03-139">At runtime, the designed formula, `ROUND (Intrastat.AmountMST, 2)`, rounds the value of the **AmountMST** field for each record in the Intrastat table to two decimal places.</span></span> <span data-ttu-id="90a03-140">A continuación, especifique el valor redondeado en el componente **Transaction.InvoicedAmount** del modelo de datos **Informe de impuestos** .</span><span class="sxs-lookup"><span data-stu-id="90a03-140">It then enters the rounded value in the **Transaction.InvoicedAmount** component of the **Tax reporting** data model.</span></span>

## <a name="data-formatting"></a><a name="Transformation"></a><span data-ttu-id="90a03-141">Formato de datos</span><span class="sxs-lookup"><span data-stu-id="90a03-141">Data formatting</span></span>

<span data-ttu-id="90a03-142">El diseñador de fórmula de ER se puede usar para definir una expresión que formatea datos que se reciben de orígenes de datos, para que se puedan enviar como parte de la generación de un documento electrónico.</span><span class="sxs-lookup"><span data-stu-id="90a03-142">The ER formula designer can be used to define an expression that formats data that is received from data sources, so that the data can be sent as part of the generating electronic document.</span></span> <span data-ttu-id="90a03-143">Es posible que tenga un formato que debe aplicarse como regla típica que se debe volver a usar para un formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-143">You might have formatting that must be applied as a typical rule that should be reused for a format.</span></span> <span data-ttu-id="90a03-144">En este caso, puede introducir ese formato una vez en la configuración del formato, como una transformación nombrada que tiene una expresión del formato.</span><span class="sxs-lookup"><span data-stu-id="90a03-144">In this case, you can introduce that formatting one time in the format configuration, as a named transformation that has a formatting expression.</span></span> <span data-ttu-id="90a03-145">Esta transformación nombrada se puede vincular a continuación a varios componentes de formato si el resultado debe formatearse de acuerdo con la expresión que creó.</span><span class="sxs-lookup"><span data-stu-id="90a03-145">This named transformation can then be linked to many format components where the output must be formatted according to the formatting expression that you created.</span></span>

<span data-ttu-id="90a03-146">En la ilustración siguiente se muestra el diseño de una transformación de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-146">The following illustration shows the design of a transformation of this type.</span></span> <span data-ttu-id="90a03-147">En este ejemplo, la transformación **TrimmedString** trunca datos entrantes del tipo de datos *Secuencia* eliminando espacios principales y finales.</span><span class="sxs-lookup"><span data-stu-id="90a03-147">In this example, the **TrimmedString** transformation truncates incoming data of the *String* data type by removing leading and trailing spaces.</span></span> <span data-ttu-id="90a03-148">A continuación, devuelve el valor de cadena truncado.</span><span class="sxs-lookup"><span data-stu-id="90a03-148">It then returns the truncated string value.</span></span>

<span data-ttu-id="90a03-149">[![Transformación](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-149">[![Transformation](./media/picture-transformation-design.jpg)](./media/picture-transformation-design.jpg)</span></span>

<span data-ttu-id="90a03-150">En la ilustración siguiente se muestra cómo usar una transformación de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-150">The following illustration shows how a transformation of this type can be used.</span></span> <span data-ttu-id="90a03-151">En este ejemplo, varios componentes de formato envían texto como salida al documento electrónico de generación en el tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="90a03-151">In this example, several format components send text as output to the generating electronic document at runtime.</span></span> <span data-ttu-id="90a03-152">Todos estos componentes de formato hacen referencia a la transformación **TrimmedString** por nombre.</span><span class="sxs-lookup"><span data-stu-id="90a03-152">All these format components refer to the **TrimmedString** transformation by name.</span></span>

<span data-ttu-id="90a03-153">[![Transformación que se usa](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-153">[![Transformation being used](./media/picture-transformation-usage.jpg)](./media/picture-transformation-usage.jpg)</span></span>

<span data-ttu-id="90a03-154">Cuando los componentes del formato, como el componente **partyName** en la ilustración anterior, hacen referencia a la transformación **TrimmedString**, la transformación envía texto como salida al documento electrónico de generación.</span><span class="sxs-lookup"><span data-stu-id="90a03-154">When format components, such as the **partyName** component in the preceding illustration, refer to the **TrimmedString** transformation, the transformation sends text as output to the generating electronic document.</span></span> <span data-ttu-id="90a03-155">Este texto no incluye espacios principales y finales.</span><span class="sxs-lookup"><span data-stu-id="90a03-155">This text doesn't include leading and trailing spaces.</span></span>

<span data-ttu-id="90a03-156">Si tiene un formato que se debe aplicar de forma individual, puede introducir ese formato como una expresión individual de una vinculación de un componente de formato concreto.</span><span class="sxs-lookup"><span data-stu-id="90a03-156">If you have formatting that must be applied individually, you can introduce that formatting as an individual expression of a binding of a specific format component.</span></span> <span data-ttu-id="90a03-157">En la ilustración siguiente se muestra una expresión de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-157">The following illustration shows an expression of this type.</span></span> <span data-ttu-id="90a03-158">En este ejemplo, el componente del formato **partyType** se vincula al origen de datos mediante una expresión que convierte los datos entrantes del campo **Model.Company.RegistrationType** del origen de datos en texto en mayúsculas.</span><span class="sxs-lookup"><span data-stu-id="90a03-158">In this example, the **partyType** format component is bound to the data source via an expression that converts incoming data from the **Model.Company.RegistrationType** field in the data source to uppercase text.</span></span> <span data-ttu-id="90a03-159">A continuación, la expresión envía ese texto como salida al documento electrónico de generación.</span><span class="sxs-lookup"><span data-stu-id="90a03-159">The expression then sends that text as output to the electronic document.</span></span>

<span data-ttu-id="90a03-160">[![Aplicar formato a un componente individual](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-160">[![Applying formatting to an individual component](./media/picture-binding-with-formula.jpg)](./media/picture-binding-with-formula.jpg)</span></span>

## <a name="process-flow-control"></a><a name="Validation"></a><span data-ttu-id="90a03-161">Control de flujo de proceso</span><span class="sxs-lookup"><span data-stu-id="90a03-161">Process flow control</span></span>

<span data-ttu-id="90a03-162">El diseñador de fórmulas de ER se puede usar para definir las expresiones que controlan el flujo de proceso de documentos electrónicos de generación.</span><span class="sxs-lookup"><span data-stu-id="90a03-162">The ER formula designer can be used to define expressions that control the process flow of generating electronic documents.</span></span> <span data-ttu-id="90a03-163">Se pueden llevar a cabo las siguientes tareas:</span><span class="sxs-lookup"><span data-stu-id="90a03-163">You can perform the following tasks:</span></span>

- <span data-ttu-id="90a03-164">Definir las condiciones que determinan cuándo un proceso de creación de documento se debe detener.</span><span class="sxs-lookup"><span data-stu-id="90a03-164">Define conditions that determine when a document creation process must be stopped.</span></span>
- <span data-ttu-id="90a03-165">Especifique expresiones que creen mensajes para el usuario acerca de los procesos detenidos o lancen mensajes de registro de ejecución acerca de continuar con el proceso de la generación del informe.</span><span class="sxs-lookup"><span data-stu-id="90a03-165">Specify expressions that either create messages for the user about stopped processes or throw execution log messages about the continuing process of report generation.</span></span>
- <span data-ttu-id="90a03-166">Especifique los nombres de archivo de los documentos electrónicos de generación y las condiciones de control de su creación.</span><span class="sxs-lookup"><span data-stu-id="90a03-166">Specify the file names of generating electronic documents, and control the conditions of their creation.</span></span>

<span data-ttu-id="90a03-167">Cada regla de control de flujo de proceso está diseñada como validación individual.</span><span class="sxs-lookup"><span data-stu-id="90a03-167">Each rule of the process flow control is designed as an individual validation.</span></span> <span data-ttu-id="90a03-168">En la ilustración siguiente se muestra una validación de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-168">The following illustration shows a validation of this type.</span></span> <span data-ttu-id="90a03-169">Esta es una explicación de la configuración de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="90a03-169">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="90a03-170">La validación se evalúa cuando se crea el nodo **INSTAT** durante la generación del archivo XML.</span><span class="sxs-lookup"><span data-stu-id="90a03-170">The validation is evaluated when the **INSTAT** node is created during generation of the XML file.</span></span>
- <span data-ttu-id="90a03-171">Si la lista de transacciones está vacía, la validación detiene el proceso de ejecución y devuelve **FALSE**.</span><span class="sxs-lookup"><span data-stu-id="90a03-171">If the list of transactions is empty, the validation stops the execution process and returns **FALSE**.</span></span>
- <span data-ttu-id="90a03-172">La validación devuelve un mensaje de error que incluye el texto de la etiqueta SYS70894 en el idioma preferido del usuario.</span><span class="sxs-lookup"><span data-stu-id="90a03-172">The validation returns an error message that includes the text of label SYS70894 in the user's preferred language.</span></span>

<span data-ttu-id="90a03-173">[![Validación](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-173">[![Validation](./media/picture-validation.jpg)](./media/picture-validation.jpg)</span></span>

<span data-ttu-id="90a03-174">El diseñador de fórmulas de ER también se puede usar para generar un nombre de archivo para un documento electrónico que se está generando y para controlar el proceso de creación del archivo.</span><span class="sxs-lookup"><span data-stu-id="90a03-174">The ER formula designer can also be used to generate a file name for a generating electronic document and to control the file creation process.</span></span> <span data-ttu-id="90a03-175">En la ilustración siguiente se muestra el diseño de un control de flujo de proceso de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-175">The following illustration shows the design of a process flow control of this type.</span></span> <span data-ttu-id="90a03-176">Esta es una explicación de la configuración de este ejemplo:</span><span class="sxs-lookup"><span data-stu-id="90a03-176">Here is an explanation of the configuration in this example:</span></span>

- <span data-ttu-id="90a03-177">La lista de registros de origen de datos **model.intrastat** se divide en lotes.</span><span class="sxs-lookup"><span data-stu-id="90a03-177">The list of records from the **model.Intrastat** data source is divided into batches.</span></span> <span data-ttu-id="90a03-178">Cada lote contiene hasta 1000 registros.</span><span class="sxs-lookup"><span data-stu-id="90a03-178">Each batch contains up to 1,000 records.</span></span>
- <span data-ttu-id="90a03-179">La salida crea un archivo zip que contiene un archivo en formato XML para cada lote que se ha creado.</span><span class="sxs-lookup"><span data-stu-id="90a03-179">The output creates a zip file that contains one file in XML format for every batch that was created.</span></span>
- <span data-ttu-id="90a03-180">Una expresión devuelve un nombre de archivo para documentos electrónicos de generación concatenando el nombre de archivo y la extensión del nombre de archivo.</span><span class="sxs-lookup"><span data-stu-id="90a03-180">An expression returns a file name for generating electronic documents by concatenating the file name and the file name extension.</span></span> <span data-ttu-id="90a03-181">Para el segundo lote y todos los lotes posteriores, el nombre de archivo contiene el id. de lote como sufijo.</span><span class="sxs-lookup"><span data-stu-id="90a03-181">For the second batch and all subsequent batches, the file name contains the batch ID as a suffix.</span></span>
- <span data-ttu-id="90a03-182">Una expresión habilita (devolviendo **TRUE**) el proceso de creación de archivos para lotes que contengan al menos un registro.</span><span class="sxs-lookup"><span data-stu-id="90a03-182">An expression enables (by returning **TRUE**) the file creation process for batches that contain at least one record.</span></span>

<span data-ttu-id="90a03-183">[![Control de flujo de proceso](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span><span class="sxs-lookup"><span data-stu-id="90a03-183">[![Process flow control](./media/picture-file-control.jpg)](./media/picture-file-control.jpg)</span></span>

## <a name="document-content-control"></a><a name="Enabled"></a><span data-ttu-id="90a03-184">Control del contenido de los documentos</span><span class="sxs-lookup"><span data-stu-id="90a03-184">Document content control</span></span>

<span data-ttu-id="90a03-185">El diseñador de fórmulas de ER se puede usar para configurar expresiones que controlan qué datos se colocarán en los documentos electrónicos generados en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="90a03-185">The ER formula designer can be used to configure expressions that control what data will be put into generated electronic documents at runtime.</span></span> <span data-ttu-id="90a03-186">Las expresiones pueden habilitar o deshabilitar la salida de elementos específicos del formato, en función de datos de procesamiento y la lógica configurada.</span><span class="sxs-lookup"><span data-stu-id="90a03-186">The expressions can enable or disable the output of specific elements of the format, depending on processing data and configured logic.</span></span> <span data-ttu-id="90a03-187">Estas expresiones se puede especificar para un único elemento de formato en el campo **Habilitado** en la pestaña **Asignación** en la página **Diseñador de operaciones**.</span><span class="sxs-lookup"><span data-stu-id="90a03-187">These expressions can be entered for a single format element in the **Enabled** field on the **Mapping** tab of the **Operations designer** page.</span></span> <span data-ttu-id="90a03-188">Puede introducir las expresiones como una condición lógica que devuelve un valor de tipo *Booleano*:</span><span class="sxs-lookup"><span data-stu-id="90a03-188">You can enter the expressions as a logic condition that returns a *Boolean* value:</span></span>

- <span data-ttu-id="90a03-189">Si la condición devuelve **Verdadero**, se ejecuta el elemento de formato actual.</span><span class="sxs-lookup"><span data-stu-id="90a03-189">If the condition returns **True**, the current format element is run.</span></span>
- <span data-ttu-id="90a03-190">Si la condición devuelve **Falso**, se omite el elemento de formato actual.</span><span class="sxs-lookup"><span data-stu-id="90a03-190">If the condition returns **False**, the current format element is skipped.</span></span>

<span data-ttu-id="90a03-191">En la ilustración siguiente se muestran expresiones de este tipo.</span><span class="sxs-lookup"><span data-stu-id="90a03-191">The following illustration shows expressions of this type.</span></span> <span data-ttu-id="90a03-192">(Se utiliza como ejemplo la versión 11.12.11 de la configuración de formato **Transferencia de crédito ISO20022 (NO)** que proporciona Microsoft). El componente de formato **XMLHeader** se configura para describir la estructura del mensaje de transferencia de crédito de acuerdo con los estándares de mensajes XML ISO 20022.</span><span class="sxs-lookup"><span data-stu-id="90a03-192">(Version 11.12.11 of the **ISO20022 Credit transfer (NO)** format configuration that is provided by Microsoft is used as an example.) The **XMLHeader** format component is configured to describe the structure of the credit transfer message according to the ISO 20022 XML message standards.</span></span> <span data-ttu-id="90a03-193">El componente de formato **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** se configura para agregar el elemento XML **Ustrd** al mensaje generado y colocar la información del remitente en un formato no estructurado como texto de los siguientes elementos XML:</span><span class="sxs-lookup"><span data-stu-id="90a03-193">The **XMLHeader/Document/CstmrCdtTrfInitn/PmtInf/CdtTrfTxInf/RmtInf/Ustrd** format component is configured to add the **Ustrd** XML element to the generated message and to put the remittance information in an unstructured format as text of the following XML elements:</span></span>

- <span data-ttu-id="90a03-194">El componente **PaymentNotes** se usa para generar el texto de notas de pago.</span><span class="sxs-lookup"><span data-stu-id="90a03-194">The **PaymentNotes** component is used to generate the text of payment notes.</span></span>
- <span data-ttu-id="90a03-195">El componente **DelimitedSequence** genera números de factura separados por comas que se utilizan para liquidar la transferencia de crédito actual.</span><span class="sxs-lookup"><span data-stu-id="90a03-195">The **DelimitedSequence** component generates comma-separated invoice numbers that are used to settle the current credit transfer.</span></span>

<span data-ttu-id="90a03-196">[![Notas de pago y componentes DelimitedSequence](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-196">[![PaymentNotes and DelimitedSequence components](./media/GER-FormulaEditor-ControlContent-1.png)](./media/GER-FormulaEditor-ControlContent-1.png)</span></span>

> [!NOTE]
> <span data-ttu-id="90a03-197">Los componentes **PaymentNotes** y **DelimitedSequence** se etiquetan con un signo de interrogación.</span><span class="sxs-lookup"><span data-stu-id="90a03-197">The **PaymentNotes** and **DelimitedSequence** components are labeled by using a question mark.</span></span> <span data-ttu-id="90a03-198">Un signo de interrogación indica que el uso de un componente es condicional.</span><span class="sxs-lookup"><span data-stu-id="90a03-198">A question mark indicates that the use of a component is conditional.</span></span> <span data-ttu-id="90a03-199">En este caso, el uso de los componentes se basa en los siguientes criterios:</span><span class="sxs-lookup"><span data-stu-id="90a03-199">In this case, use of the components is based on the following criteria:</span></span>
>
> - <span data-ttu-id="90a03-200">La expresión `@.PaymentsNotes <> ""` que se define para el componente **PaymentNotes** habilita (devolviendo **TRUE**) el elemento XML **Ustrd** que se debe rellenar con el texto de las notas de pago, si el texto no está vacío para la transferencia de crédito actual.</span><span class="sxs-lookup"><span data-stu-id="90a03-200">The `@.PaymentsNotes <> ""` expression that is defined for the **PaymentNotes** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with the text of payment notes, if that text isn't blank for the current credit transfer.</span></span>
>
>    <span data-ttu-id="90a03-201">[![Expresión para el componente PaymentNotes](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-201">[![Expression for the PaymentNotes component](./media/GER-FormulaEditor-ControlContent-2.png)](./media/GER-FormulaEditor-ControlContent-2.png)</span></span>
>
> - <span data-ttu-id="90a03-202">La expresión `@.PaymentsNotes = ""` que se define para el componente **DelimitedSequence** habilita (devolviendo **TRUE**) el elemento XML **Ustrd** que se rellenará con una lista de números de factura separados por comas que se utilizan para liquidar la transferencia de crédito actual, si el texto de las notas de pago para esa transferencia de crédito está vacío.</span><span class="sxs-lookup"><span data-stu-id="90a03-202">The `@.PaymentsNotes = ""` expression that is defined for the **DelimitedSequence** component enables (by returning **TRUE**) the **Ustrd** XML element to be filled with a comma-separated list of the invoice numbers that are used to settle the current credit transfer, if the text of payment notes for that credit transfer is blank.</span></span>
>
>    <span data-ttu-id="90a03-203">[![Expresión para el componente DelimitedSequence](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-203">[![Expression for the DelimitedSequence component](./media/GER-FormulaEditor-ControlContent-3.png)](./media/GER-FormulaEditor-ControlContent-3.png)</span></span>
> 
> <span data-ttu-id="90a03-204">Según esta configuración, el mensaje que se genera para cada pago del deudor, el elemento XML **Ustrd**, contendrá el texto de las notas de pago o, si ese texto estuviera vacío, una lista de números de factura separados por comas que se usan para liquidar el pago.</span><span class="sxs-lookup"><span data-stu-id="90a03-204">Based on this setup, the message that is generated for each debtor payment, the **Ustrd** XML element, will contain either the text of payment notes or, when that text is blank, a comma-separated list of the invoice numbers that are used to settle the payment.</span></span>

## <a name="validation-of-configured-formulas"></a><a name="TestFormula"></a><span data-ttu-id="90a03-205">Validación de las fórmulas configuradas</span><span class="sxs-lookup"><span data-stu-id="90a03-205">Validation of configured formulas</span></span>

<span data-ttu-id="90a03-206">En la página **Diseñador de fórmulas**, seleccione **Probar** para validar cómo funciona la fórmula configurada.</span><span class="sxs-lookup"><span data-stu-id="90a03-206">On the **Formula designer** page, select **Test** to validate how the configured formula works.</span></span>

<span data-ttu-id="90a03-207">[![Selección Probar para validar una fórmula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-207">[![Selecting Test to validate a forumula](./media/ER-FormulaTest-Start.png)](./media/ER-FormulaTest-Start.png)</span></span>

<span data-ttu-id="90a03-208">Cuando se requieren los valores de los argumentos de la fórmula, puede abrir el cuadro de diálogo **Probar expresión** de la página **Diseñador de fórmulas**.</span><span class="sxs-lookup"><span data-stu-id="90a03-208">When the values of formula arguments are required, you can open the **Test expression** dialog box from the **Formula designer** page.</span></span> <span data-ttu-id="90a03-209">En la mayoría de los casos, estos argumentos deben definirse manualmente, ya que los enlaces configurados no se ejecutan en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="90a03-209">In most cases, these arguments must be manually defined, because the configured bindings aren't run at design time.</span></span> <span data-ttu-id="90a03-210">La pestaña **Resultado de prueba** de la página **Diseñador de fórmulas** muestra el resultado de la ejecución de la fórmula configurada.</span><span class="sxs-lookup"><span data-stu-id="90a03-210">The **Test result** tab on the **Formula designer** page shows the result from execution of the configured formula.</span></span>

<span data-ttu-id="90a03-211">El siguiente ejemplo muestra cómo puede probar la fórmula configurada para el dominio de comercio exterior a fin de asegurarse de que el código de mercancías intrastat contenga solo dígitos.</span><span class="sxs-lookup"><span data-stu-id="90a03-211">The following example shows how you can test the formula that is configured for the foreign trade domain to make sure that the Intrastat commodity code contains only digits.</span></span>

<span data-ttu-id="90a03-212">Cuando pruebe esta fórmula, puede usar el cuadro de diálogo **Probar expresión** para especificar el valor del código de mercancías intrastat para la prueba.</span><span class="sxs-lookup"><span data-stu-id="90a03-212">When you test this formula, you can use the **Test expression** dialog box to specify the value of the Intrastat commodity code for testing.</span></span>

<span data-ttu-id="90a03-213">[![Especificar el código de mercancías intrastat para pruebas](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-213">[![Specifying the Intrastat commodity code for testing](./media/ER-FormulaTest-Start-EnterArguments.png)](./media/ER-FormulaTest-Start-EnterArguments.png)</span></span>

<span data-ttu-id="90a03-214">Después de especificar el código de mercancías intrastat y seleccionar **Aceptar**, la pestaña **Resultado de prueba** de la página **Diseñador de fórmulas** muestra el resultado de la ejecución de la fórmula configurada.</span><span class="sxs-lookup"><span data-stu-id="90a03-214">After you specify the Intrastat commodity code and select **OK**, the **Test result** tab on the **Formula designer** page shows the result of execution of the configured formula.</span></span> <span data-ttu-id="90a03-215">Después puede evaluar si el resultado es aceptable.</span><span class="sxs-lookup"><span data-stu-id="90a03-215">You can then evaluate whether the result is acceptable.</span></span> <span data-ttu-id="90a03-216">Si el resultado no es aceptable, puede actualizar la fórmula y probarla nuevamente.</span><span class="sxs-lookup"><span data-stu-id="90a03-216">If the result isn't acceptable, you can update the formula and test it again.</span></span>

<span data-ttu-id="90a03-217">[![Resultado de prueba](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-217">[![Test result](./media/ER-FormulaTest-Result.png)](./media/ER-FormulaTest-Result.png)</span></span>

<span data-ttu-id="90a03-218">Algunas fórmulas no se pueden probar en tiempo de diseño.</span><span class="sxs-lookup"><span data-stu-id="90a03-218">Some formulas can't be tested at design time.</span></span> <span data-ttu-id="90a03-219">Por ejemplo, una fórmula puede devolver un resultado de un tipo de datos que no se puede mostrar en la pestaña **Resultado de prueba**. En este caso, recibirá un mensaje de error que indica que la fórmula no se puede probar.</span><span class="sxs-lookup"><span data-stu-id="90a03-219">For example, a formula might return a result of a data type that can't be shown on the **Test result** tab. In this case, you receive an error message that states that the formula can't be tested.</span></span>

<span data-ttu-id="90a03-220">[![Mensaje de error](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span><span class="sxs-lookup"><span data-stu-id="90a03-220">[![Error message](./media/ER-FormulaTest-Error.png)](./media/ER-FormulaTest-Error.png)</span></span>

## <a name="additional-resources"></a><span data-ttu-id="90a03-221">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="90a03-221">Additional resources</span></span>

- [<span data-ttu-id="90a03-222">Visión general de los informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="90a03-222">Electronic Reporting overview</span></span>](general-electronic-reporting.md)
- [<span data-ttu-id="90a03-223">Idioma de fórmulas en los informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="90a03-223">Electronic reporting formula language</span></span>](er-formula-language.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]