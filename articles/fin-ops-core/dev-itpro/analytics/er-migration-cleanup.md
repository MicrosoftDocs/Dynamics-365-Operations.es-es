---
title: Limpieza de migración de ER
description: Este tema explica cómo puede usar la función de limpieza de migración de ER para resolver problemas con las plantillas de ER.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, ERWorkspace, ERParameters, ERMigrationCleanup
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2018-01-01
ms.dyn365.ops.version: AX 8.0.0
ms.openlocfilehash: b09afc30c401e2dccfc4114261dc5e713c8c470c
ms.sourcegitcommit: 6cb174d1ec8b55946dca4db03d6a3c3f4c6fa2df
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/09/2021
ms.locfileid: "5565524"
---
# <a name="er-migration-cleanup"></a><span data-ttu-id="58d3b-103">Limpieza de migración de ER</span><span class="sxs-lookup"><span data-stu-id="58d3b-103">ER migration cleanup</span></span> 

[!include[banner](../includes/banner.md)]

<span data-ttu-id="58d3b-104">Al gestionar las instancias de Finance, es posible que desee migrar su instancia actual a otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="58d3b-104">When you manage your Finance instances, you might decide to migrate your current instance to another location.</span></span> <span data-ttu-id="58d3b-105">Por ejemplo, puede migrar la instancia de producción a un nuevo entorno de espacio aislado.</span><span class="sxs-lookup"><span data-stu-id="58d3b-105">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="58d3b-106">Si configuró el marco de informes electrónicos (ER) para almacenar plantillas en Microsoft Azure, la tabla **DocuValue** del nuevo entorno aislado se refiere a la instancia de Almacenamiento de blob del entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="58d3b-106">If you configured the Electronic reporting (ER) framework to store templates in Microsoft Azure Blob storage, the **DocuValue** table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="58d3b-107">Sin embargo, no se puede acceder a esta instancia desde el entorno aislado, ya que el proceso de migración no admite la migración de artefactos en Almacenamiento de blob.</span><span class="sxs-lookup"><span data-stu-id="58d3b-107">However, this instance can't be accessed from the sandbox environment because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="58d3b-108">Por el contrario, se espera que, en el nuevo entorno de sandbox, se refiera a la instancia de Blob Storage en el entorno de sandbox que aún no obtiene las plantillas ER.</span><span class="sxs-lookup"><span data-stu-id="58d3b-108">Rather, it's expected that in the new sandbox environment, you refer to the instance of Blob storage in the sandbox environment that does not yet obtain the ER templates.</span></span>

<span data-ttu-id="58d3b-109">Si intenta ejecutar un formato de ER que use una plantilla para generar documentos empresariales, se producirá una excepción, y se le notificará de que falta la plantilla.</span><span class="sxs-lookup"><span data-stu-id="58d3b-109">If you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="58d3b-110">También se le guía para usar la herramienta de limpieza de migración de ER para eliminar y después volver a importar la configuración del formato de ER que contiene la plantilla.</span><span class="sxs-lookup"><span data-stu-id="58d3b-110">You're also guided to use the ER migration cleanup option to delete and then re-import the ER format configuration that contains the template.</span></span>

<span data-ttu-id="58d3b-111">[![Ejecución de un formato ER](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span><span class="sxs-lookup"><span data-stu-id="58d3b-111">[![Running an ER format](./media/er-migration-cleanup-run.png)](./media/er-migration-cleanup-run.png)</span></span>

<span data-ttu-id="58d3b-112">Recibirá un error similar si navega hasta la página **Configuraciones** (**Administración de la organización** \> **Informes electrónicos** \> **Configuraciones**) y, en el árbol de configuraciones, intente eliminar una configuración de formato ER que use una plantilla.</span><span class="sxs-lookup"><span data-stu-id="58d3b-112">You will receive a similar error if you navigate to the **Configurations** page (**Organization administration** \> **Electronic reporting** \> **Configurations**) and in the configurations tree, try to delete an ER format configuration that uses a template.</span></span>

<span data-ttu-id="58d3b-113">[![Eliminación de un formato ER](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span><span class="sxs-lookup"><span data-stu-id="58d3b-113">[![Deletion an ER format](./media/er-migration-cleanup-delete.png)](./media/er-migration-cleanup-delete.png)</span></span>

<span data-ttu-id="58d3b-114">Complete los siguientes pasos para resolver problemas con las plantillas de ER a las que no puede acceder.</span><span class="sxs-lookup"><span data-stu-id="58d3b-114">Complete the following steps to resolve issues with ER templates that you are unable to access.</span></span>

1.  <span data-ttu-id="58d3b-115">Vaya a la página **Administración de la organización** \> **Periódico** \> **Limpieza de migración**.</span><span class="sxs-lookup"><span data-stu-id="58d3b-115">Go to **Organization administration** \> **Periodic** \> **Migration cleanup** page.</span></span>
2.  <span data-ttu-id="58d3b-116">Seleccione una configuración de formato ER que no se pueda ejecutar o eliminar.</span><span class="sxs-lookup"><span data-stu-id="58d3b-116">Select an ER format configuration that can’t be executed or deleted.</span></span>
3.  <span data-ttu-id="58d3b-117">Seleccione **Eliminar**.</span><span class="sxs-lookup"><span data-stu-id="58d3b-117">Select **Delete**.</span></span>
4.  <span data-ttu-id="58d3b-118">Confirme la eliminación de la configuración de formato ER seleccionada.</span><span class="sxs-lookup"><span data-stu-id="58d3b-118">Confirm the deletion of the selected ER format configuration.</span></span>
5.  <span data-ttu-id="58d3b-119">[Importe](download-electronic-reporting-configuration-lcs.md) la configuración de formato ER eliminada a la instancia actual de Finance.</span><span class="sxs-lookup"><span data-stu-id="58d3b-119">[Import](download-electronic-reporting-configuration-lcs.md) the deleted ER format configuration to the current Finance instance.</span></span>

## <a name="applicability"></a><span data-ttu-id="58d3b-120">Aplicabilidad</span><span class="sxs-lookup"><span data-stu-id="58d3b-120">Applicability</span></span>

> <span data-ttu-id="58d3b-121">[Importante] La opción **Limpieza de migración** está dirigida solo a configuraciones de formato ER que contienen plantillas ER no accesibles.</span><span class="sxs-lookup"><span data-stu-id="58d3b-121">[Important] The **Migration cleanup** option is targeted only for ER format configurations that contain non-accessible ER templates.</span></span> <span data-ttu-id="58d3b-122">Cuando elimina una configuración de formato ER utilizando la opción **Limpieza de migración**, ER elimina las plantillas relacionadas con los artefactos de configuración en la única base de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="58d3b-122">When you delete an ER format configuration by using the **Migration cleanup** option, ER deletes the templates that are related to the configuration artifacts in the only application database.</span></span> <span data-ttu-id="58d3b-123">La existencia de los archivos físicos apropiados en Almacenamiento de blob no está validada.</span><span class="sxs-lookup"><span data-stu-id="58d3b-123">The existence of the appropriate physical files in Blob storage are not validated.</span></span> <span data-ttu-id="58d3b-124">En cambio, se supone que no hay ninguno.</span><span class="sxs-lookup"><span data-stu-id="58d3b-124">Instead, it is assumed that there are none.</span></span> <span data-ttu-id="58d3b-125">Por lo tanto, no use la opción **Limpieza de migración** como alternativa a la opción de eliminación de configuración ER en la página **Configuraciones**.</span><span class="sxs-lookup"><span data-stu-id="58d3b-125">Therefore, do not use the **Migration cleanup** option as an alternative to the ER configuration deletion option on the **Configurations** page.</span></span> <span data-ttu-id="58d3b-126">Use la opción **Limpieza de migración** solo cuando no funcione correctamente la opción de eliminación de configuración ER en la página **Configuraciones**.</span><span class="sxs-lookup"><span data-stu-id="58d3b-126">Use the **Migration cleanup** option only when the ER configuration deletion option on the **Configurations** page failed.</span></span>
>
> <span data-ttu-id="58d3b-127">Si usa la opción **Limpieza de migración** para eliminar una configuración de formato ER cuando la plantilla referida esté disponible en el Almacenamiento de blob, solo se eliminan los artefactos de configuración de la base de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="58d3b-127">If you use the **Migration cleanup** option to delete an ER format configuration when the referred template is available in the Blob storage, you only delete related configuration artifacts in the application database.</span></span> <span data-ttu-id="58d3b-128">El archivo físico de la plantilla en el Almacenamiento de blob permanece.</span><span class="sxs-lookup"><span data-stu-id="58d3b-128">The physical file of the template in the Blob storage remains.</span></span> <span data-ttu-id="58d3b-129">La sobrescritura de archivos en el Almacenamiento de blob ya no está permitida.</span><span class="sxs-lookup"><span data-stu-id="58d3b-129">File overwriting in Blob storage is no longer allowed.</span></span> <span data-ttu-id="58d3b-130">Para obtener más información, consulte [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span><span class="sxs-lookup"><span data-stu-id="58d3b-130">For more information, see [KB4557217](https://fix.lcs.dynamics.com/Issue/Details?kb=4557217).</span></span> <span data-ttu-id="58d3b-131">Además, ya no podrá volver a importar las configuraciones eliminadas mediante la limpieza de migración en este entorno.</span><span class="sxs-lookup"><span data-stu-id="58d3b-131">Additionally, you will no longer be able to re-import the configurations deleted by using the Migration cleanup in this environment.</span></span> <span data-ttu-id="58d3b-132">Para resolver este problema, debe encontrar el archivo correspondiente en Almacenamiento de blob y eliminarlo manualmente.</span><span class="sxs-lookup"><span data-stu-id="58d3b-132">To resolve this issue, you need to find the corresponding file in Blob storage and manually delete it.</span></span>

<span data-ttu-id="58d3b-133">[![Importación de un formato ER](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span><span class="sxs-lookup"><span data-stu-id="58d3b-133">[![Importing an ER format](./media/er-migration-cleanup-import.png)](./media/er-migration-cleanup-import.png)</span></span>

<span data-ttu-id="58d3b-134">Puede ocurrir un problema similar si migra la instancia de la aplicación a otra ubicación que se ha utilizado como destino de migración más de una vez y para la cual el Almacenamiento de blob ya contiene archivos de plantilla ER.</span><span class="sxs-lookup"><span data-stu-id="58d3b-134">A similar issue may occur if you migrate your application instance to another location that has been used as a migration target more than once and for which the Blob storage already contains ER template files.</span></span>

<span data-ttu-id="58d3b-135">Dado que puede tener varias configuraciones de formato de ER, este proceso puede ser largo.</span><span class="sxs-lookup"><span data-stu-id="58d3b-135">Because you can have several ER format configurations, this process can be time consuming.</span></span> <span data-ttu-id="58d3b-136">Por lo tanto, es preferible el uso de la función [Almacenamiento de respaldo de plantillas ER](er-backup-storage-templates.md) para recuperar automáticamente plantillas con referencias rotas.</span><span class="sxs-lookup"><span data-stu-id="58d3b-136">Therefore, using the [Backup storage of ER templates](er-backup-storage-templates.md) feature to automatically recover templates with broken references is preferred.</span></span>


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]