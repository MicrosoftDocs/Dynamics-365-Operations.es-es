---
title: Configurar formatos de ER para usar parámetros que se especifican por entidad jurídica
description: En este tema se explica cómo puede configurar formatos de informes electrónicos (ER) para usar parámetros que se especifican por entidad jurídica.
author: NickSelin
ms.date: 03/24/2021
ms.topic: article
ms.prod: ''
ms.technology: ''
ms.search.form: ERSolutionTable, EROperationDesigner, ERLookupDesigner, ERComponentLookupStructureEditing
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.custom: ''
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-01-01
ms.dyn365.ops.version: Release 8.1.3
ms.openlocfilehash: 16eab3ffa7d4a780ec9709f5c8a5c263b1e75365
ms.sourcegitcommit: 074b6e212d19dd5d84881d1cdd096611a18c207f
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 03/31/2021
ms.locfileid: "5751187"
---
# <a name="configure-er-formats-to-use-parameters-that-are-specified-per-legal-entity"></a><span data-ttu-id="ba89d-103">Configurar formatos de ER para usar parámetros que se especifican por entidad jurídica</span><span class="sxs-lookup"><span data-stu-id="ba89d-103">Configure ER formats to use parameters that are specified per legal entity</span></span>

[!include[banner](../includes/banner.md)]

## <a name="overview"></a><span data-ttu-id="ba89d-104">Visión general</span><span class="sxs-lookup"><span data-stu-id="ba89d-104">Overview</span></span>

<span data-ttu-id="ba89d-105">En muchos de los formatos de informes electrónicos (ER) que diseñará, debe filtrar los datos mediante un conjunto de valores que son específicos para cada entidad jurídica de su instancia (por ejemplo, un conjunto de códigos de impuestos para filtrar transacciones de impuestos).</span><span class="sxs-lookup"><span data-stu-id="ba89d-105">In many of the Electronic reporting (ER) formats that you will design, you must filter data by using a set of values that are specific to each legal entity of your instance (for example, a set of tax codes to filter tax transactions).</span></span> <span data-ttu-id="ba89d-106">Actualmente, cuando el filtrado de este tipo se configura en un formato de ER, los valores que dependan de la entidad jurídica (por ejemplo, los códigos de impuestos) se usan en expresiones del formato de ER para especificar reglas de filtrado de datos.</span><span class="sxs-lookup"><span data-stu-id="ba89d-106">Currently, when filtering of this type is configured in an ER format, values that are dependent on the legal entity (for example, tax codes) are used in expressions of the ER format to specify data filtering rules.</span></span> <span data-ttu-id="ba89d-107">Por lo tanto, el formato de ER se convierte en específico de la entidad jurídica y, para generar los informes necesarios, debe crear copias derivadas del formato de ER original para cada entidad jurídica en la que tenga que ejecutar el formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-107">Therefore, the ER format is made legal entity–specific, and to generate the required reports, you must create derived copies of the original ER format for each legal entity where you have to run the ER format.</span></span> <span data-ttu-id="ba89d-108">Cada formato de ER derivado debe editarse para que incorpore valores específicos de la entidad jurídica, reorganizarse cada vez que se actualice la versión original (base), exportarse desde un entorno de prueba e importarse a un entorno de producción cuando deba implementarse para uso de producción, etc.</span><span class="sxs-lookup"><span data-stu-id="ba89d-108">Each derived ER format must be edited to bring legal entity–specific values into it, rebased whenever the original (base) version has been updated, exported from a test environment and imported into a production environment when it must be deployed for production use, and so on.</span></span> <span data-ttu-id="ba89d-109">Por lo tanto, el mantenimiento de este tipo de solución de ER configurada es bastante complejo y largo por varios motivos:</span><span class="sxs-lookup"><span data-stu-id="ba89d-109">Therefore, maintenance of this type of configured ER solution is quite complex and time-consuming for several reasons:</span></span>

-   <span data-ttu-id="ba89d-110">Cuantas más entidades jurídicas haya, más configuraciones de formato de ER deberán mantenerse.</span><span class="sxs-lookup"><span data-stu-id="ba89d-110">The more legal entities there are, the more ER format configurations must be maintained.</span></span>
-   <span data-ttu-id="ba89d-111">El mantenimiento de configuraciones de ER requiere que los usuarios empresariales tengan conocimiento de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-111">Maintenance of ER configurations requires that business users have ER knowledge.</span></span>

<span data-ttu-id="ba89d-112">La característica de parámetros específicos de la aplicación de ER permite a los usuarios avanzados configurar el filtrado de datos en un formato de ER de modo que se base en un conjunto de reglas abstractas.</span><span class="sxs-lookup"><span data-stu-id="ba89d-112">The ER application-specific parameters feature lets power users configure data filtering in an ER format so that it's based on a set of abstract rules.</span></span> <span data-ttu-id="ba89d-113">Este conjunto de reglas se puede configurar para utilizar los orígenes de datos disponibles en un formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-113">This set of rules can be configured to use the data sources that are available in an ER format.</span></span> <span data-ttu-id="ba89d-114">Los usuarios empresariales pueden especificar reglas reales más allá del marco de ER mediante la interfaz de usuario (UI) que se genera automáticamente en función de la configuración del formato de ER correspondiente y de los datos de la entidad jurídica actual a los que accederán los orígenes de datos del formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-114">Business users can then specify real rules beyond the ER framework by using the user interface (UI) that is automatically generated based on the settings of the corresponding ER format and the current legal entity data that will be accessed by the ER format's data sources.</span></span> <span data-ttu-id="ba89d-115">El conjunto de reglas que se especifica para un formato de ER puede exportarse desde la entidad jurídica actual de la instancia de Dynamics 365 Finance (Finance).</span><span class="sxs-lookup"><span data-stu-id="ba89d-115">The set of rules that is specified for an ER format can be exported from the current legal entity of the Dynamics 365 Finance (Finance) instance.</span></span> <span data-ttu-id="ba89d-116">Posteriormente, se pude importar en otra entidad jurídica de la misma instancia de Finance o en una instancia diferente como un conjunto de reglas para el mismo formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-116">It can then be imported into another legal entity of either the same Finance instance or a different instance as a set of rules for the same ER format.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="ba89d-117">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="ba89d-117">Prerequisites</span></span>

<span data-ttu-id="ba89d-118">Para completar los ejemplos de este tema, debe tener acceso a la instancia de los Regulatory Configuration Services (RCS) que se ha aprovisionado para el mismo que el inquilino que Finance para uno de los siguientes roles:</span><span class="sxs-lookup"><span data-stu-id="ba89d-118">To complete the examples in this topic, you must have access to the instance of Regulatory Configuration Services (RCS) that has been provisioned for the same tenant as Finance for one of the following roles:</span></span>

- <span data-ttu-id="ba89d-119">Desarrollador de informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="ba89d-119">Electronic reporting developer</span></span>
- <span data-ttu-id="ba89d-120">Consultor funcional de informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="ba89d-120">Electronic reporting functional consultant</span></span>
- <span data-ttu-id="ba89d-121">Administrador del sistema</span><span class="sxs-lookup"><span data-stu-id="ba89d-121">System administrator</span></span>

<span data-ttu-id="ba89d-122">Le recomendamos que complete los pasos del tema [Admitir llamadas con parámetros de orígenes de datos de ER DE tipo CAMPO CALCULADO](er-calculated-field-type.md).</span><span class="sxs-lookup"><span data-stu-id="ba89d-122">We recommend that you complete the steps in the [Support parameterized calls of ER data sources of CALCULATED FIELD type](er-calculated-field-type.md) topic.</span></span> <span data-ttu-id="ba89d-123">Si ya ha completado estos pasos, puede omitir los pasos en la sección **Importar configuraciones de ER en RCS** que sigue a continuación.</span><span class="sxs-lookup"><span data-stu-id="ba89d-123">If you've already completed those steps, you can skip the steps in the **Import ER configurations into RCS** section that follows.</span></span>

## <a name="import-er-configurations-into-rcs"></a><span data-ttu-id="ba89d-124">Importar configuraciones de ER en RCS</span><span class="sxs-lookup"><span data-stu-id="ba89d-124">Import ER configurations into RCS</span></span>

<span data-ttu-id="ba89d-125">Descargue y almacene localmente las siguientes configuraciones de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-125">Download and locally store the following ER configurations.</span></span>

| <span data-ttu-id="ba89d-126">**Descripción del contenido**</span><span class="sxs-lookup"><span data-stu-id="ba89d-126">**Content description**</span></span>                        | <span data-ttu-id="ba89d-127">**Nombre de archivo**</span><span class="sxs-lookup"><span data-stu-id="ba89d-127">**File name**</span></span>                                        |
|------------------------------------------------|------------------------------------------------------|
| <span data-ttu-id="ba89d-128">Archivo de configuración del **modelo datos de ER** de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ba89d-128">Sample **ER data model** configuration file</span></span>    | [<span data-ttu-id="ba89d-129">Modelo para aprender llamadas con parámetros.versión.1.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-129">Model to learn parameterized calls.version.1.xml</span></span>](https://download.microsoft.com/download/2/d/b/2db913a0-3622-494e-91a2-97fc494af9b9/Modeltolearnparameterizedcalls.version.1.xml)     |
| <span data-ttu-id="ba89d-130">Archivo de configuración de **metadatos de ER** de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ba89d-130">Sample **ER metadata** configuration file</span></span>      | [<span data-ttu-id="ba89d-131">Metadatos para aprender llamadas con parámetros.versión.1.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-131">Metadata to learn parameterized calls.version.1.xml</span></span>](https://download.microsoft.com/download/1/b/3/1b343968-5a47-4000-b5a8-6487698ef4c0/Metadatatolearnparameterizedcalls.version.1.xml)  |
| <span data-ttu-id="ba89d-132">Archivo de configuración de **asignación de modelo de ER** de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ba89d-132">Sample **ER model mapping** configuration file</span></span> | [<span data-ttu-id="ba89d-133">Asignación para aprender llamadas con parámetros.versión.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-133">Mapping to learn parameterized calls.version.1.1.xml</span></span>](https://download.microsoft.com/download/8/6/6/866e0ab6-2e05-4d98-9d52-d2da2038f6e4/Mappingtolearnparameterizedcalls.version.1.1.xml) |
| <span data-ttu-id="ba89d-134">Configuración de **formato de ER** de ejemplo</span><span class="sxs-lookup"><span data-stu-id="ba89d-134">Sample **ER format** configuration</span></span>             | [<span data-ttu-id="ba89d-135">Formato para aprender llamadas con parámetros.versión.1.1.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-135">Format to learn parameterized calls.version.1.1.xml</span></span>](https://download.microsoft.com/download/e/3/9/e392eadc-b9b4-4834-95c3-b8066dd00b9c/Formattolearnparameterizedcalls.version.1.1.xml)  |

<span data-ttu-id="ba89d-136">A continuación, inicie sesión en su instancia de RCS.</span><span class="sxs-lookup"><span data-stu-id="ba89d-136">Next, sign in to your RCS instance.</span></span>

<span data-ttu-id="ba89d-137">En este ejemplo, creará una configuración para la empresa de muestra Litware, Inc.</span><span class="sxs-lookup"><span data-stu-id="ba89d-137">In this example, you will create a configuration for the Litware, Inc sample company.</span></span> <span data-ttu-id="ba89d-138">Antes de poder completar este procedimiento, debe completar los pasos del tema [Creación y activación de un proveedor de configuraciones](tasks/er-configuration-provider-mark-it-active-2016-11.md).</span><span class="sxs-lookup"><span data-stu-id="ba89d-138">Before you can complete this procedure, you must complete the steps in the [Create a configuration provider and mark it as active](tasks/er-configuration-provider-mark-it-active-2016-11.md) topic in RCS.</span></span>

1.  <span data-ttu-id="ba89d-139">En el panel predeterminado, seleccione **Informes electrónicos**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-139">On the default dashboard, select **Electronic reporting**.</span></span>
2.  <span data-ttu-id="ba89d-140">Seleccione **Configuraciones de informes**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-140">Select **Reporting configurations**.</span></span>
3.  <span data-ttu-id="ba89d-141">Importe las configuraciones de ER que descargó previamente al RCS en el siguiente orden: modelo de datos, metadatos, distribución de modelo y formato.</span><span class="sxs-lookup"><span data-stu-id="ba89d-141">Import the ER configurations that you downloaded earlier into RCS, in the following order: data model, metadata, model mapping, and format.</span></span> <span data-ttu-id="ba89d-142">Para cada configuración de ER, siga estos pasos:</span><span class="sxs-lookup"><span data-stu-id="ba89d-142">For each ER configuration, follow these steps:</span></span>

    1.  <span data-ttu-id="ba89d-143">Seleccione **Intercambiar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-143">Select **Exchange**.</span></span>
    2.  <span data-ttu-id="ba89d-144">Seleccione **Cargar desde un archivo XML**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-144">Select **Load from XML file**.</span></span>
    3.  <span data-ttu-id="ba89d-145">Seleccione **Examinar** para seleccionar el archivo para la configuración necesaria de ER en formato XML.</span><span class="sxs-lookup"><span data-stu-id="ba89d-145">Select **Browse** to select the file for the required ER configuration in XML format.</span></span>
    4.  <span data-ttu-id="ba89d-146">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-146">Select **OK**.</span></span>

## <a name="review-the-er-solution-that-is-provided"></a><span data-ttu-id="ba89d-147">Revisar la solución de ER que se proporciona</span><span class="sxs-lookup"><span data-stu-id="ba89d-147">Review the ER solution that is provided</span></span>

1.  <span data-ttu-id="ba89d-148">En el árbol de configuración, expanda el contenido del elemento **Modelo para aprender llamadas con parámetros**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-148">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="ba89d-149">Seleccione el elemento **Formato para aprender llamadas con parámetros**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-149">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="ba89d-150">Seleccione **Diseñador**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-150">Select **Designer**.</span></span>
4.  <span data-ttu-id="ba89d-151">Seleccione **Expandir/Contraer**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-151">Select **Expand/Collapse**.</span></span>

    <span data-ttu-id="ba89d-152">El formato de ER **Formato para aprender llamadas con parámetros** está diseñado para generar una declaración de impuestos en formato XML que presenta varios niveles de impuestos (normal, reducido y ninguno).</span><span class="sxs-lookup"><span data-stu-id="ba89d-152">The **Format to learn parameterized calls** ER format is designed to generate a tax statement in XML format that presents several levels of taxation (regular, reduced, and none).</span></span> <span data-ttu-id="ba89d-153">Cada nivel tiene un número distinto de detalles.</span><span class="sxs-lookup"><span data-stu-id="ba89d-153">Each level has a different number of details.</span></span>

    ![Múltiples niveles de formato ER, formato para aprender llamadas parametrizadas](./media/RCS-AppSpecParms-ReviewFormat.PNG)

5.  <span data-ttu-id="ba89d-155">En la pestaña **Asignación**, expanda los elementos **Modelo**, **Datos** y **Resumen**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-155">On the **Mapping** tab, expand the **Model**, **Data**, and **Summary** items.</span></span>

    <span data-ttu-id="ba89d-156">El origen de datos **Model.Data.Summary** devuelve la lista de transacciones de impuestos.</span><span class="sxs-lookup"><span data-stu-id="ba89d-156">The **Model.Data.Summary** data source returns the list of tax transactions.</span></span> <span data-ttu-id="ba89d-157">Estas transacciones se resumen por un código de impuesto.</span><span class="sxs-lookup"><span data-stu-id="ba89d-157">These transactions are summarized by tax code.</span></span> <span data-ttu-id="ba89d-158">Para este origen de datos, el campo calculado **Model.Data.Summary.Level** se ha configurado para devolver el código para el nivel impositivo de cada registro resumido.</span><span class="sxs-lookup"><span data-stu-id="ba89d-158">For this data source, the **Model.Data.Summary.Level** calculated field has been configured to return the code for the taxation level of each summarized record.</span></span> <span data-ttu-id="ba89d-159">Para cualquier código de impuestos que se puede recuperar del origen de datos **Model.Data.Summary** en el tiempo de ejecución, el campo calculado devuelve el código del nivel impositivo (**Normal**, **Reducido**, **Ninguno** u **Otro**) como valor de texto.</span><span class="sxs-lookup"><span data-stu-id="ba89d-159">For any tax code that can be retrieved from the **Model.Data.Summary** data source at runtime, the calculated field returns the taxation level code (**Regular**, **Reduced**, **None**, or **Other**) as a text value.</span></span> <span data-ttu-id="ba89d-160">El campo calculado **Model.Data.Summary.Level** se utiliza para filtrar registros del origen de datos **Model.Data.Summary** e introducir los datos filtrados en cada elemento XML que represente el nivel impositivo mediante el uso de los campos **Model.Data2.Level1**, **Model.Data2.Level2** y **Model.Data2.Level3**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-160">The **Model.Data.Summary.Level** calculated field is used to filter records of the **Model.Data.Summary** data source and enter the filtered data in each XML element that represents a taxation level by using the **Model.Data2.Level1**, **Model.Data2.Level2**, and **Model.Data2.Level3** fields.</span></span>

    ![El origen de datos Model.Data.Summary enumera la lista de transacciones de impuestos](./media/RCS-AppSpecParms-ReviewFormat-Data2Fld.PNG)

    <span data-ttu-id="ba89d-162">El campo calculado **Model.Data.Summary.Level** se ha configurado para que contenga una expresión de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-162">The **Model.Data.Summary.Level** calculated field has been configured so that it contains an ER expression.</span></span> <span data-ttu-id="ba89d-163">Tenga en cuenta que los códigos de impuestos (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD** e **InVAT0**) están codificados en esta configuración.</span><span class="sxs-lookup"><span data-stu-id="ba89d-163">Note that tax codes (**VAT19**, **InVAT19**, **VAT7**, **InVAT7**, **THIRD**, and **InVAT0**) are hardcoded into this configuration.</span></span> <span data-ttu-id="ba89d-164">Por lo tanto, este formato de ER depende de la entidad jurídica en la que se configuraron estos códigos de impuestos.</span><span class="sxs-lookup"><span data-stu-id="ba89d-164">Therefore, this ER format is dependent on the legal entity where these tax codes were configured.</span></span>

    ![El campo calculado Model.Data.Summary.Level con códigos de impuestos codificados](./media/RCS-AppSpecParms-ReviewFormat-LevelFld.PNG)

    <span data-ttu-id="ba89d-166">Para admitir a un conjunto diferente de códigos de impuestos para cada entidad jurídica, debe seguir estos pasos:</span><span class="sxs-lookup"><span data-stu-id="ba89d-166">To support a different set of tax codes for each legal entity, you must follow these steps:</span></span>

    - <span data-ttu-id="ba89d-167">Crear una versión derivada del formato de ER para cada entidad jurídica.</span><span class="sxs-lookup"><span data-stu-id="ba89d-167">Create a derived version of the ER format for each legal entity.</span></span>
    - <span data-ttu-id="ba89d-168">Actualice los códigos de impuestos en el campo calculado **Model.Data.Summary.Level**, en función de la configuración de la entidad jurídica.</span><span class="sxs-lookup"><span data-stu-id="ba89d-168">Update the tax codes in the **Model.Data.Summary.Level** calculated field, based on the legal entity setting.</span></span>

6.  <span data-ttu-id="ba89d-169">Cierre la página **Diseñador de formato**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-169">Close the **Format designer** page.</span></span>

## <a name="create-a-derived-format"></a><span data-ttu-id="ba89d-170">Crear un formato derivado</span><span class="sxs-lookup"><span data-stu-id="ba89d-170">Create a derived format</span></span>

<span data-ttu-id="ba89d-171">A continuación, utilizará la característica de parámetros específicos de la aplicación de ER para admitir un conjunto diferente de códigos de impuestos para cada entidad jurídica en un único formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-171">Next, you will use the ER application-specific parameters feature to support a different set of tax codes for each legal entity in a single ER format.</span></span>

1.  <span data-ttu-id="ba89d-172">En el árbol de configuración, expanda el contenido del elemento **Modelo para aprender llamadas con parámetros**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-172">In the configuration tree, expand the contents of the **Model to learn parameterized calls** item.</span></span>
2.  <span data-ttu-id="ba89d-173">Seleccione el elemento **Formato para aprender llamadas con parámetros**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-173">Select the **Format to learn parameterized calls** item.</span></span>
3.  <span data-ttu-id="ba89d-174">Seleccionar **Crear configuración**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-174">Select **Create configuration**.</span></span>
4.  <span data-ttu-id="ba89d-175">Seleccione la opción **Derivar de nombre: Formato para aprender las llamadas con parámetros, Microsoft**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-175">Select the **Derive from Name: Format to learn parameterized calls, Microsoft** option.</span></span>
5.  <span data-ttu-id="ba89d-176">En el campo **Nombre**, introduzca **Formato para aprender a buscar datos de LE**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-176">In the **Name** field, enter **Format to learn how to lookup LE data**.</span></span>
6.  <span data-ttu-id="ba89d-177">Seleccionar **Crear configuración**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-177">Select **Create configuration**.</span></span>

## <a name="configure-a-derived-format"></a><span data-ttu-id="ba89d-178">Configurar un formato derivado</span><span class="sxs-lookup"><span data-stu-id="ba89d-178">Configure a derived format</span></span>

### <a name="add-a-format-enumeration"></a><span data-ttu-id="ba89d-179">Agregar una enumeración de formato</span><span class="sxs-lookup"><span data-stu-id="ba89d-179">Add a format enumeration</span></span>

<span data-ttu-id="ba89d-180">A continuación, agregará una nueva enumeración de formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-180">Next, you will add a new ER format enumeration.</span></span> <span data-ttu-id="ba89d-181">Los valores de esta enumeración de formato se presentarán a los usuarios empresariales, que especificarán conjuntos de códigos de impuestos que dependen de la entidad jurídica para los distintos niveles impositivos que se usan en el formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-181">The values of this format enumeration will be presented to business users, who will specify legal entity–dependent sets of tax codes for the various taxation levels that are used in the ER format.</span></span>

1.  <span data-ttu-id="ba89d-182">Seleccione **Diseñador**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-182">Select **Designer**.</span></span>
2.  <span data-ttu-id="ba89d-183">Seleccione **Enumeraciones de formato**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-183">Select **Format enumerations**.</span></span>
3.  <span data-ttu-id="ba89d-184">Seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-184">Select **Add**.</span></span>
4.  <span data-ttu-id="ba89d-185">En el campo **Nombre**, introduzca **Lista de niveles impositivos**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-185">In the **Name** field, enter **List of taxation levels**.</span></span>
5.  <span data-ttu-id="ba89d-186">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-186">Select **Save**.</span></span>
6.  <span data-ttu-id="ba89d-187">En la pestaña **Aplicar formato a valores de enumeración**, seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-187">On the **Format enumeration values** tab, select **Add**.</span></span>
7.  <span data-ttu-id="ba89d-188">En el campo **Nombre**, introduzca **Impuesto normal**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-188">In the **Name** field, enter **Regular taxation**.</span></span>
8.  <span data-ttu-id="ba89d-189">Seleccione de nuevo **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-189">Select **Add** again.</span></span>
9.  <span data-ttu-id="ba89d-190">En el campo **Nombre**, introduzca **Impuesto reducido**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-190">In the **Name** field, enter **Reduced taxation**.</span></span>
10. <span data-ttu-id="ba89d-191">Seleccione de nuevo **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-191">Select **Add** again.</span></span>
11. <span data-ttu-id="ba89d-192">En el campo **Nombre**, introduzca **Ningún impuesto**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-192">In the **Name** field, enter **No taxation**.</span></span>
12. <span data-ttu-id="ba89d-193">Seleccione de nuevo **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-193">Select **Add** again.</span></span>
13. <span data-ttu-id="ba89d-194">En el campo **Nombre**, introduzca **Otro**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-194">In the **Name** field, enter **Other**.</span></span>

    ![Nuevo registro en la página Enumeraciones de formato](./media/RCS-AppSpecParms-ConfigureFormat-Enum.PNG)

    <span data-ttu-id="ba89d-196">Puesto que los usuarios empresariales pueden usar distintos idiomas para especificar conjuntos de códigos de impuestos que dependen de la entidad jurídica, le recomendamos que traduzca los valores de esta enumeración a los idiomas que se configuren como los idiomas preferidos de esos usuarios en Finance.</span><span class="sxs-lookup"><span data-stu-id="ba89d-196">Because the business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the values of this enumeration into the languages that are configured as the preferred languages for those users in Finance.</span></span>

14. <span data-ttu-id="ba89d-197">Seleccione el registro **Ningún impuesto**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-197">Select the **No taxation** record.</span></span>
15. <span data-ttu-id="ba89d-198">Haga clic en el campo **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-198">Click in the **Label** field.</span></span>
16. <span data-ttu-id="ba89d-199">Seleccione **Traducir**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-199">Select **Translate**.</span></span>
17. <span data-ttu-id="ba89d-200">En el panel **Traducción de texto**, en el campo **Id. de etiqueta**, introduzca **LBL_LEVELENUM_NO**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-200">In the **Text translation** pane, in the **Label Id** field, enter **LBL_LEVELENUM_NO**.</span></span>
18. <span data-ttu-id="ba89d-201">En el campo **Texto en el idioma predeterminado**, introduzca **Ningún impuesto**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-201">In the **Text in default language** field, enter **No taxation**.</span></span>
19. <span data-ttu-id="ba89d-202">En el campo **Idioma**, seleccione **DE**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-202">In the **Language** field, select **DE**.</span></span>
20. <span data-ttu-id="ba89d-203">En el campo **Texto traducido**, escriba **keine Besteuerung**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-203">In the **Translated text** field, enter **keine Besteuerung**.</span></span>
21. <span data-ttu-id="ba89d-204">Seleccione **Traducir**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-204">Select **Translate**.</span></span>

    ![La traducción de texto se desliza hacia afuera](./media/RCS-AppSpecParms-ConfigureFormat-EnumTranslate.PNG)

22. <span data-ttu-id="ba89d-206">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-206">Select **Save**.</span></span>
23. <span data-ttu-id="ba89d-207">Cierre la página **Enumeraciones de formato**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-207">Close the **Format enumerations** page.</span></span>

### <a name="add-a-new-lookup-data-source"></a><span data-ttu-id="ba89d-208">Agregar un nuevo origen de datos de la búsqueda</span><span class="sxs-lookup"><span data-stu-id="ba89d-208">Add a new lookup data source</span></span>

<span data-ttu-id="ba89d-209">A continuación, agregará un nuevo origen de datos para especificar cómo los usuarios empresariales especificarán reglas que dependen de la entidad jurídica para reconocer el nivel impositivo correcto para cada cada registro de transacción resumido.</span><span class="sxs-lookup"><span data-stu-id="ba89d-209">Next, you will add a new data source to specify how business users will specify legal entity–dependent rules to recognize the correct taxation level for each summarized transaction record.</span></span>

1.  <span data-ttu-id="ba89d-210">En la pestaña **Asignación**, seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-210">On the **Mapping** tab, select **Add**.</span></span>
2.  <span data-ttu-id="ba89d-211">Seleccione **Enumeración de formato\Búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-211">Select **Format enumeration\Lookup**.</span></span>

    <span data-ttu-id="ba89d-212">Acaba de identificar que cada regla que los usuarios empresariales especifiquen para el reconocimiento del nivel impositivo devolverá un valor de una enumeración de formato de ER.</span><span class="sxs-lookup"><span data-stu-id="ba89d-212">You just identified that each rule that business users specify for taxation level recognition will return a value of an ER format enumeration.</span></span> <span data-ttu-id="ba89d-213">Tenga en cuenta que se puede acceder al tipo de origen de datos **Búsqueda** en los bloques **Modelo de datos** y **Dynamics 365 for Operations**, además del bloque **Enumeración de formato**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-213">Notice that the **Lookup** data source type can be accessed under the **Data model** and **Dynamics 365 for Operations** blocks in addition to the **Format enumeration** block.</span></span> <span data-ttu-id="ba89d-214">Por lo tanto, las enumeraciones de modelo de datos de ER y las enumeraciones de aplicación se pueden usar para especificar el tipo de valores que se devuelve para orígenes de datos de ese tipo.</span><span class="sxs-lookup"><span data-stu-id="ba89d-214">Therefore, ER data model enumerations and application enumerations can be used to specify the type of values that is are returned for data sources of that type.</span></span>
    
3.  <span data-ttu-id="ba89d-215">En el campo **Nombre**, especifique **Selector**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-215">In the **Name** field, enter **Selector**.</span></span>
4.  <span data-ttu-id="ba89d-216">En el campo **Enumeración de formato**, seleccione **Lista de niveles impositivos**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-216">In the **Format enumeration** field, select **List of taxation levels**.</span></span>

    <span data-ttu-id="ba89d-217">Acaba de especificar que, para cada regla que se especifique en este origen de datos, un usuario empresarial debe seleccionar uno de los valores de la enumeración de formato **Lista de niveles impositivos** como un valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="ba89d-217">You just specified that, for each rule that is specified in this data source, a business user must select one of the values of the **List of taxation levels** format enumeration as a returned value.</span></span>
    
5.  <span data-ttu-id="ba89d-218">Seleccione **Editar búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-218">Select **Edit lookup**.</span></span>
6.  <span data-ttu-id="ba89d-219">Seleccione **Columnas**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-219">Select **Columns**.</span></span>
7.  <span data-ttu-id="ba89d-220">Expanda el elemento **Model**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-220">Expand the **Model** item.</span></span>
8.  <span data-ttu-id="ba89d-221">Expanda el elemento **Datos**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-221">Expand the **Data** item.</span></span>
9.  <span data-ttu-id="ba89d-222">Expanda el elemento **Impuesto**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-222">Expand the **Tax** item.</span></span>
10. <span data-ttu-id="ba89d-223">Seleccione el elemento **Model.Data.Tax.Code**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-223">Select the **Model.Data.Tax.Code** item.</span></span>
11. <span data-ttu-id="ba89d-224">Seleccione el botón **Agregar** (la flecha derecha).</span><span class="sxs-lookup"><span data-stu-id="ba89d-224">Select the **Add** button (the right arrow).</span></span>

    ![Las columnas se deslizan hacia afuera](./media/RCS-AppSpecParms-ConfigureFormat-Lookup1.PNG)

    <span data-ttu-id="ba89d-226">Acaba de especificar que, para cada regla que se especifique en este origen de datos para el reconocimiento del nivel impositivo, un usuario empresarial debe seleccionar uno de los códigos de impuestos como una condición.</span><span class="sxs-lookup"><span data-stu-id="ba89d-226">You just specified that, for each rule that is specified in this data source for taxation level recognition, a business user must select one of the tax codes as a condition.</span></span> <span data-ttu-id="ba89d-227">La lista de códigos de impuestos que el usuario empresarial pueden seleccionar será devuelta por el origen de datos **Model.Data.Tax**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-227">The list of tax codes that the business user can select will be returned by the **Model.Data.Tax** data source.</span></span> <span data-ttu-id="ba89d-228">Puesto que este origen de datos contiene el campo **Nombre**, el nombre del código de impuestos se mostrará para cada valor de código de impuestos en la búsqueda que se presenta al usuario empresarial.</span><span class="sxs-lookup"><span data-stu-id="ba89d-228">Because this data source contains the **Name** field, the name of the tax code will be shown for each tax code value in the lookup that is presented to the business user.</span></span>
    
12. <span data-ttu-id="ba89d-229">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-229">Select **OK**.</span></span>

    ![Página del diseñador de búsquedas](./media/RCS-AppSpecParms-ConfigureFormat-Lookup2.PNG)

    <span data-ttu-id="ba89d-231">Los usuarios empresariales pueden agregar varias reglas como registros de este origen de datos.</span><span class="sxs-lookup"><span data-stu-id="ba89d-231">Business users can add multiple rules as records of this data source.</span></span> <span data-ttu-id="ba89d-232">Cada registro se enumerará mediante un código de línea.</span><span class="sxs-lookup"><span data-stu-id="ba89d-232">Each record will be numbered by a line code.</span></span> <span data-ttu-id="ba89d-233">Las reglas se evaluarán en orden de incremento del número de líneas.</span><span class="sxs-lookup"><span data-stu-id="ba89d-233">Rules will be evaluated in order of increasing line number.</span></span>

    <span data-ttu-id="ba89d-234">Puesto que seleccionó el campo **Código de impuesto** como una condición para las reglas de este origen de datos de la búsqueda, y dado que **Código de impuesto** está configurado como un campo del tipo de datos **Cadena**, cada regla se evaluará en tiempo de ejecución comparando el código de impuestos que se pasa al origen de datos con el código de impuestos que se define en este registro del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="ba89d-234">Because you selected the **Tax code** field as a condition for rules in this lookup data source, and because **Tax code** is set up as a field of the **String** data type, each rule will be evaluated at runtime by comparing the tax code that is passed to the data source with the tax code that is defined in this record of the data source.</span></span>

    <span data-ttu-id="ba89d-235">Cuando se encuentra una regla que cumple la condición configurada, este origen de datos devuelve el valor de búsqueda de la regla que se define en el campo **Resultado de la búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-235">When a rule that satisfies the configured condition is found, this data source returns the lookup value of the rule that is defined in the **Lookup result** field.</span></span> <span data-ttu-id="ba89d-236">Si no se encuentra ninguna regla, se genera una excepción para notificar al usuario que el origen de datos actual no puede devolver un valor correcto.</span><span class="sxs-lookup"><span data-stu-id="ba89d-236">If no rule is found, an exception is thrown to notify the user that the current data source can't return a correct value.</span></span>

13. <span data-ttu-id="ba89d-237">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-237">Select **Save**.</span></span>
14. <span data-ttu-id="ba89d-238">Cierre la página **Diseñador de búsqueda**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-238">Close the **Lookup designer** page.</span></span>
15. <span data-ttu-id="ba89d-239">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-239">Select **OK**.</span></span>

    <span data-ttu-id="ba89d-240">Tenga en cuenta que agregó un nuevo origen de datos que devolverá el nivel impositivo como el valor de la enumeración de formato **Lista de niveles impositivos** para cualquier código de impuestos que se pase al origen de datos como el argumento del parámetro **Código** del tipo de datos **Cadena**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-240">Notice that you added a new data source that will return the taxation level as the value of the **List of taxation levels** format enumeration for any tax code that is passed to the data source as the argument of the **Code** parameter of the **String** data type.</span></span>
    
    ![Formatear la página del diseñador con un nuevo origen de datos](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld.PNG)

    <span data-ttu-id="ba89d-242">Tenga en cuenta que la evaluación de reglas configuradas depende del tipo de datos de los campos que se han seleccionado para definir condiciones de dichas reglas.</span><span class="sxs-lookup"><span data-stu-id="ba89d-242">Note that the evaluation of configured rules depends on the data type of the fields that have been selected to define conditions of those rules.</span></span> <span data-ttu-id="ba89d-243">Cuando seleccione un campo que está configurado como un campo del tipo de datos **Numérico** o **Fecha**, los criterios diferirán de los criterios que se describieron anteriormente para el tipo de datos **Cadena**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-243">When you select a field that is configured as a field of either the **Numeric** or **Date** data type, the criteria will differ from the criteria that were described earlier for the **String** data type.</span></span> <span data-ttu-id="ba89d-244">Para los campos **Numérico** y **Fecha**, la regla debe especificarse como un intervalo de valores.</span><span class="sxs-lookup"><span data-stu-id="ba89d-244">For **Numeric** and **Date** fields, the rule must be specified as a range of values.</span></span> <span data-ttu-id="ba89d-245">La condición de la regla se considerará cumplida cuando un valor que se pasa al origen de datos esté en el intervalo configurado.</span><span class="sxs-lookup"><span data-stu-id="ba89d-245">The condition of the rule will then be considered satisfied when a value that is passed to the data source is in the configured range.</span></span>
    
    <span data-ttu-id="ba89d-246">En la siguiente ilustración se muestra un ejemplo de este tipo de configuración.</span><span class="sxs-lookup"><span data-stu-id="ba89d-246">The following illustration shows an example of this type of setup.</span></span> <span data-ttu-id="ba89d-247">Además del campo **Model.Data.Tax.Code** del tipo de datos **Cadena**, el campo **Model.Tax.Summary.Base** del tipo de datos **Real** se usa para especificar condiciones para un origen de datos de la búsqueda.</span><span class="sxs-lookup"><span data-stu-id="ba89d-247">In addition to the **Model.Data.Tax.Code** field of the **String** data type, the **Model.Tax.Summary.Base** field of the **Real** data type is used to specify conditions for a lookup data source.</span></span>
    
    ![Página del diseñador de búsquedas con columnas adicionales](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFld2.PNG)

    <span data-ttu-id="ba89d-249">Puesto que los campos **Model.Data.Tax.Code** y **Model.Tax.Summary.Base** se seleccionan para este origen de datos de la búsqueda, cada regla de este origen de datos se configurará de la siguiente manera:</span><span class="sxs-lookup"><span data-stu-id="ba89d-249">Because the **Model.Data.Tax.Code** and **Model.Tax.Summary.Base** fields are selected for this lookup data source, each rule of this data source will be configured in the following way:</span></span>
    
    -   <span data-ttu-id="ba89d-250">En la lista que se presenta, el valor de la enumeración de formato **Lista de niveles impositivos** debe seleccionarse como valor devuelto.</span><span class="sxs-lookup"><span data-stu-id="ba89d-250">In the list that is presented, the value of the **List of taxation levels** format enumeration must be selected as a returned value.</span></span>
    -   <span data-ttu-id="ba89d-251">El código de impuestos debe especificarse como condición de esta regla.</span><span class="sxs-lookup"><span data-stu-id="ba89d-251">The tax code must be entered as a condition of this rule.</span></span> <span data-ttu-id="ba89d-252">Solo se aplican los códigos de impuestos que son proporcionados por el origen de datos **Model.Data.Tax**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-252">Only tax codes that are provided by the **Model.Data.Tax** data source are applicable.</span></span>
    -   <span data-ttu-id="ba89d-253">Los valores mínimo y máximo del importe base de impuestos deben introducirse como condiciones de esta regla.</span><span class="sxs-lookup"><span data-stu-id="ba89d-253">Minimum and maximum values of the tax base amount must be entered as conditions of this rule.</span></span>

    <span data-ttu-id="ba89d-254">Así es cómo cada regla de este origen de datos se evaluará en tiempo de ejecución:</span><span class="sxs-lookup"><span data-stu-id="ba89d-254">Here is how each rule of this data source will be evaluated at runtime:</span></span>
    -   <span data-ttu-id="ba89d-255">¿El código del tipo de datos **Cadena** que se pasó a este origen de datos es igual al código de impuestos de una regla?</span><span class="sxs-lookup"><span data-stu-id="ba89d-255">Does the code of the **String** data type that was passed to this data source equal the tax code of a rule?</span></span>
    -   <span data-ttu-id="ba89d-256">¿El valor del tipo de datos **Real** que se pasó a este origen de datos se encuentra entre los valores mínimos y máximos específicos?</span><span class="sxs-lookup"><span data-stu-id="ba89d-256">Does the value of the **Real** data type that was passed to this data source fall between specific minimum and maximum values?</span></span>

    <span data-ttu-id="ba89d-257">Una regla se considerará aplicable cuando se cumplan las dos condiciones.</span><span class="sxs-lookup"><span data-stu-id="ba89d-257">A rule will be considered applicable when both conditions are satisfied.</span></span>

### <a name="translate-the-label-of-the-lookup-data-source-that-was-added"></a><span data-ttu-id="ba89d-258">Traducir la etiqueta del origen de datos de la búsqueda que se agregó</span><span class="sxs-lookup"><span data-stu-id="ba89d-258">Translate the label of the lookup data source that was added</span></span>

<span data-ttu-id="ba89d-259">Puesto que los usuarios empresariales pueden usar distintos idiomas para especificar conjuntos de códigos de impuestos que dependen de la entidad jurídica, le recomendamos que traduzca la etiqueta de cualquier origen de datos de la búsqueda que agregue, de modo que se presente en el idioma preferido de cada usuario en la página correspondiente.</span><span class="sxs-lookup"><span data-stu-id="ba89d-259">Because business users might use different languages to specify legal entity–dependent sets of tax codes, we recommend that you translate the label of any lookup data source that you add, so that it's presented in each user's preferred language on the corresponding page.</span></span>

1.  <span data-ttu-id="ba89d-260">Seleccione el origen de datos **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-260">Select the **Model.Data.Selector** data source.</span></span>
2.  <span data-ttu-id="ba89d-261">Seleccione **Editar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-261">Select **Edit**.</span></span>
3.  <span data-ttu-id="ba89d-262">Haga clic en el campo **Etiqueta**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-262">Click in the **Label** field.</span></span>
4.  <span data-ttu-id="ba89d-263">Seleccione **Traducir**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-263">Select **Translate**.</span></span>
5.  <span data-ttu-id="ba89d-264">En el panel **Traducción de texto**, en el campo **Id. de etiqueta**, introduzca **LBL_SELECTOR_DS**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-264">In the **Text translation** pane, in the **Label Id** field, enter **LBL_SELECTOR_DS**.</span></span>
6.  <span data-ttu-id="ba89d-265">En el campo **Texto en el idioma predeterminado**, especifique **Seleccionar nivel impositivo por código de impuesto**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-265">In the **Text in default language** field, enter **Select tax level by tax code**.</span></span>
7.  <span data-ttu-id="ba89d-266">En el campo **Idioma**, seleccione **DE**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-266">In the **Language** field, select **DE**.</span></span>
8.  <span data-ttu-id="ba89d-267">En el campo **Texto traducido**, escriba **Steuerebene für Steuerkennzeichen auswählen**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-267">In the **Translated text** field, enter **Steuerebene für Steuerkennzeichen auswählen**.</span></span>
9.  <span data-ttu-id="ba89d-268">Seleccione **Traducir**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-268">Select **Translate**.</span></span>
10. <span data-ttu-id="ba89d-269">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-269">Select **OK**.</span></span>

    ![Las propiedades del origen de datos se deslizan hacia afuera](./media/RCS-AppSpecParms-ConfigureFormat-SelectorFldTranslate.PNG)

### <a name="add-a-new-field-to-consume-the-configured-lookup"></a><span data-ttu-id="ba89d-271">Agregar un nuevo campo para consumir la búsqueda configurada</span><span class="sxs-lookup"><span data-stu-id="ba89d-271">Add a new field to consume the configured lookup</span></span>

1.  <span data-ttu-id="ba89d-272">Expanda el elemento **Model.Data**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-272">Expand the **Model.Data** item.</span></span>
2.  <span data-ttu-id="ba89d-273">Seleccione el elemento **Model.Data.Summary**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-273">Select the **Model.Data.Summary** item.</span></span>
3.  <span data-ttu-id="ba89d-274">Seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-274">Select **Add**.</span></span>
4.  <span data-ttu-id="ba89d-275">Seleccione **Funciones/Campo calculado**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-275">Select **Functions/Calculated field**.</span></span>
5.  <span data-ttu-id="ba89d-276">En el campo **Nombre**, introduzca **LevelByLookup**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-276">In the **Name** field, enter **LevelByLookup**.</span></span>
6.  <span data-ttu-id="ba89d-277">Seleccione **Editar fórmula**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-277">Select **Edit formula**.</span></span>
7.  <span data-ttu-id="ba89d-278">En el **campo Fórmula**, introduzca **Model.Selector(Model.Data.Summary.Code)**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-278">In the **Formula field**, enter **Model.Selector(Model.Data.Summary.Code)**.</span></span>
8.  <span data-ttu-id="ba89d-279">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-279">Select **Save**.</span></span>

    ![Agregar Model.Selector(Model.Data.Summary.Code) a la página del diseñador de fórmulas](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld.PNG)

9.  <span data-ttu-id="ba89d-281">Cierre la página **Editor de la fórmula**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-281">Close the **Formula editor** page.</span></span>
10. <span data-ttu-id="ba89d-282">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-282">Select **OK**.</span></span>

    ![Formatear la página del diseñador con una nueva fórmula agregada](./media/RCS-AppSpecParms-ConfigureFormat-AddLevelByLookupFld2.PNG)

    <span data-ttu-id="ba89d-284&quot;>Tenga en cuenta que el campo calculado **LevelByLookup** que agregó devolverá el nivel impositivo como el valor de la enumeración de formato **Lista de niveles impositivos** para cada registro de transacciones de impuestos resumido.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-284&quot;>Notice that the **LevelByLookup** calculated field that you added will return the taxation level as the value of the **List of taxation levels** format enumeration for each summarized tax transactions record.</span></span> <span data-ttu-id=&quot;ba89d-285&quot;>El código de impuestos del registro pasará al origen de datos de la búsqueda **Model.Selector** y el conjunto de reglas para este origen de datos se utilizará para seleccionar el nivel impositivo correcto.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-285&quot;>The tax code of the record will be passed to the **Model.Selector** lookup data source, and the set of rules for this data source will be used to select the correct taxation level.</span></span>

### <a name=&quot;add-a-new-format-enumeration-based-data-source&quot;></a><span data-ttu-id=&quot;ba89d-286&quot;>Agregar un nuevo origen de datos basado en enumeración de formato</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-286&quot;>Add a new format enumeration-based data source</span></span>

<span data-ttu-id=&quot;ba89d-287&quot;>A continuación, agregará un nuevo origen de datos que hace referencia a la enumeración de formato que agregó antes.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-287&quot;>Next, you will add a new data source that refers to the format enumeration that you added earlier.</span></span> <span data-ttu-id=&quot;ba89d-288&quot;>Los valores de este origen de datos se usarán más adelante en una expresión de formato de ER.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-288&quot;>Values of this data source will be used in an ER format expression later.</span></span>

1.  <span data-ttu-id=&quot;ba89d-289&quot;>Seleccione **Agregar raíz**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-289&quot;>Select **Add root**.</span></span>
2.  <span data-ttu-id=&quot;ba89d-290&quot;>Seleccione **Enumeraciones de formato\Enumeración**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-290&quot;>Select **Format enumerations\Enumeration**.</span></span>
3.  <span data-ttu-id=&quot;ba89d-291&quot;>En el campo **Nombre**, introduzca **TaxationLevel**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-291&quot;>In the **Name** field, enter **TaxationLevel**.</span></span>
4.  <span data-ttu-id=&quot;ba89d-292&quot;>En el campo **Enumeración de formato**, seleccione **Lista de niveles impositivos**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-292&quot;>In the **Format enumeration** field, select **List of taxation levels**.</span></span>
5.  <span data-ttu-id=&quot;ba89d-293&quot;>Seleccione **Guardar**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-293&quot;>Select **Save**.</span></span>

### <a name=&quot;modify-an-existing-field-to-start-to-use-the-lookup&quot;></a><span data-ttu-id=&quot;ba89d-294&quot;>Modificar un campo existente para empezar a usar la búsqueda</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-294&quot;>Modify an existing field to start to use the lookup</span></span>

<span data-ttu-id=&quot;ba89d-295&quot;>A continuación, modificará el campo calculado existente para que utilice el origen de datos configurado de la búsqueda para devolver el valor del nivel impositivo correcto, en función del código de impuestos.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-295&quot;>Next, you will modify the existing calculated field so that it uses the configured lookup data source to return the correct taxation level value, depending on the tax code.</span></span>

1.  <span data-ttu-id=&quot;ba89d-296&quot;>Seleccione el elemento **Model.Data.Summary.Level**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-296&quot;>Select the **Model.Data.Summary.Level** item.</span></span>
2.  <span data-ttu-id=&quot;ba89d-297&quot;>Seleccione **Editar**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-297&quot;>Select **Edit**.</span></span>
3.  <span data-ttu-id=&quot;ba89d-298&quot;>Seleccione **Editar fórmula**.</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-298&quot;>Select **Edit formula**.</span></span>

    <span data-ttu-id=&quot;ba89d-299&quot;>Tenga en cuenta que la expresión actual del campo **Model.Data.Summary.Level** incluye los siguientes códigos de impuestos codificados:</span><span class=&quot;sxs-lookup&quot;><span data-stu-id=&quot;ba89d-299&quot;>Notice that the current expression of the **Model.Data.Summary.Level** field includes the following hard-coded tax codes:</span></span>
    
    <span data-ttu-id=&quot;ba89d-300&quot;>CASE (@.Code, &quot;VAT19&quot;, &quot;Normal&quot;, &quot;InVAT19&quot;, &quot;Normal&quot;, &quot;VAT7&quot;, &quot;Reducido&quot;, &quot;InVAT7&quot;, &quot;Reducido&quot;, &quot;THIRD&quot;, &quot;Ninguno&quot;, &quot;InVAT0&quot;, &quot;Ninguno&quot;, &quot;Otro")</span><span class="sxs-lookup"><span data-stu-id="ba89d-300">CASE (@.Code, "VAT19", "Regular", "InVAT19", "Regular", "VAT7", "Reduced", "InVAT7", "Reduced", "THIRD", "None", "InVAT0", "None", "Other")</span></span>

4.  <span data-ttu-id="ba89d-301">En el campo **Fórmula**, introduzca **CASE(@.LevelByLookup, TaxationLevel.'Regular taxation', "Normal", TaxationLevel.'Reduced taxation', "Reducido", TaxationLevel.'No taxation', "Ninguno", "Otro")**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-301">In the **Formula** field, enter **CASE(@.LevelByLookup, TaxationLevel.'Regular taxation', "Regular", TaxationLevel.'Reduced taxation', "Reduced", TaxationLevel.'No taxation', "None", "Other")**.</span></span>

    ![Página de diseñador de operación de ER](./media/RCS-AppSpecParms-ConfigureFormat-ChangeLookupFld.PNG)
    
    <span data-ttu-id="ba89d-303">Tenga en cuenta que la expresión del campo **Model.Data.Summary.Level** ahora devolverá el nivel impositivo, en función del código de impuestos del registro actual y el conjunto de reglas que un usuario empresarial configura en el origen de datos de la búsqueda **Model.Data.Selector**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-303">Notice that the expression of the **Model.Data.Summary.Level** field will now return the taxation level, based on the tax code of the current record and the set of rules that that a business user configures in the **Model.Data.Selector** lookup data source.</span></span>
    
5.  <span data-ttu-id="ba89d-304">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-304">Select **Save**.</span></span>
6.  <span data-ttu-id="ba89d-305">Cierre la página **Diseñador de fórmula**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-305">Close **Formula designer** page.</span></span>
7.  <span data-ttu-id="ba89d-306">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-306">Select **OK**.</span></span>
8.  <span data-ttu-id="ba89d-307">Seleccione **Guardar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-307">Select **Save**.</span></span>
9.  <span data-ttu-id="ba89d-308">Cierre la página **Diseñador de formato**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-308">Close **Format designer** page.</span></span>

## <a name="complete-the-draft-version-of-a-derived-format"></a><span data-ttu-id="ba89d-309">Completar la versión de borrador de un formato derivado</span><span class="sxs-lookup"><span data-stu-id="ba89d-309">Complete the draft version of a derived format</span></span>

1.  <span data-ttu-id="ba89d-310">En la ficha desplegable **Versiones**, seleccione **Cambiar estado**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-310">On the **Versions** FastTab, select **Change status**.</span></span>
2.  <span data-ttu-id="ba89d-311">Seleccione **Completar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-311">Select **Complete**.</span></span>
3.  <span data-ttu-id="ba89d-312">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-312">Select **OK**.</span></span>

## <a name="export-completed-version-of-modified-format"></a><span data-ttu-id="ba89d-313">Exportar versión completada de formato modificado</span><span class="sxs-lookup"><span data-stu-id="ba89d-313">Export completed version of modified format</span></span>

1.  <span data-ttu-id="ba89d-314">En el árbol de configuraciones, seleccione el elemento **Formato para aprender a buscar datos de LE**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-314">In the configuration tree, select the **Format to learn how to lookup LE data** item.</span></span>
2.  <span data-ttu-id="ba89d-315">En la ficha desplegable **Versiones**, seleccione el registro que tenga estado de **Completado**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-315">On the **Versions** FastTab, select the record that has a status of **Completed**.</span></span>
3.  <span data-ttu-id="ba89d-316">Seleccione **Intercambiar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-316">Select **Exchange**.</span></span>
4.  <span data-ttu-id="ba89d-317">Seleccione **Exportar como archivo XML**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-317">Select **Export as XML file**.</span></span>
5.  <span data-ttu-id="ba89d-318">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-318">Select **OK**.</span></span>
6.  <span data-ttu-id="ba89d-319">El explorador web descarga un archivo **Formato para aprender a buscar datos de LE.xml**.</span><span class="sxs-lookup"><span data-stu-id="ba89d-319">The web browser downloads a **Format to learn how to lookup LE data.xml** file.</span></span> <span data-ttu-id="ba89d-320">Almacene este archivo localmente.</span><span class="sxs-lookup"><span data-stu-id="ba89d-320">Store this file locally.</span></span>

<span data-ttu-id="ba89d-321">Repita los pasos de esta sección para los elementos principales del formato **Formato para aprender a buscar datos de LE** y almacene los siguientes archivos localmente:</span><span class="sxs-lookup"><span data-stu-id="ba89d-321">Repeat steps in this section for parent items of the **Format to learn how to lookup LE data** format, and store the following files locally:</span></span>

-   <span data-ttu-id="ba89d-322">Formato para aprender llamadas con parámetros.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-322">Format to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="ba89d-323">Asignación para aprender llamadas con parámetros.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-323">Mapping to learn parameterized calls.xml</span></span>
-   <span data-ttu-id="ba89d-324">Modelo para aprender llamadas con parámetros.xml</span><span class="sxs-lookup"><span data-stu-id="ba89d-324">Model to learn parameterized calls.xml</span></span>

<span data-ttu-id="ba89d-325">Para aprender a usar el formato de ER **Formato para aprender a buscar datos de LE** configurado para configurar conjuntos de impuestos que dependen de la entidad jurídica para filtrar transacciones de impuestos por distintos niveles impositivos, complete los pasos del tema [Configurar los parámetros de un formato de ER por entidad jurídica](er-app-specific-parameters-set-up.md).</span><span class="sxs-lookup"><span data-stu-id="ba89d-325">To learn how to use the configured **Format to learn how to lookup LE data** ER format to set up legal entity–dependent sets of tax codes to filter tax transactions by different taxation levels, complete the steps in the [Set up the parameters of an ER format per legal entity](er-app-specific-parameters-set-up.md) topic.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="ba89d-326">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="ba89d-326">Additional resources</span></span>

[<span data-ttu-id="ba89d-327">Diseñador de fórmulas en los informes electrónicos</span><span class="sxs-lookup"><span data-stu-id="ba89d-327">Formula designer in Electronic reporting</span></span>](general-electronic-reporting-formula-designer.md)

[<span data-ttu-id="ba89d-328">Configurar los parámetros de un formato de ER por entidad jurídica</span><span class="sxs-lookup"><span data-stu-id="ba89d-328">Set up the parameters of an ER format per legal entity</span></span>](er-app-specific-parameters-set-up.md)


[!INCLUDE[footer-include](../../../includes/footer-banner.md)]
