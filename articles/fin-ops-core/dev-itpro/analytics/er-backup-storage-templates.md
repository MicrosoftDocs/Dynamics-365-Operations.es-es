---
title: Almacenamiento de copia de seguridad de las plantillas de ER
description: Este tema explica cómo utilizar el almacenamiento de copia de seguridad de los informes electrónicos (ER) para recuperar plantillas.
author: NickSelin
manager: AnnBe
ms.date: 04/29/2020
ms.topic: article
ms.prod: ''
ms.service: dynamics-ax-platform
ms.technology: ''
ms.search.form: ERWorkspace, ERSolutionTable
audience: Application User, Developer, IT Pro
ms.reviewer: kfend
ms.search.scope: Operations
ms.custom: 27621
ms.assetid: ''
ms.search.region: Global
ms.author: nselin
ms.search.validFrom: 2019-08-13
ms.dyn365.ops.version: 10.0.5
ms.openlocfilehash: 2e399290153c2c63ac1c02f0f9cdb956ff5031e5
ms.sourcegitcommit: 5de75c61c33e57c813944f1ab6100aceb020d432
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 04/29/2020
ms.locfileid: "3321675"
---
# <a name="backup-storage-of-er-templates"></a><span data-ttu-id="37457-103">Almacenamiento de copia de seguridad de las plantillas de ER</span><span class="sxs-lookup"><span data-stu-id="37457-103">Backup storage of ER templates</span></span>

[!include [banner](../includes/banner.md)]

<span data-ttu-id="37457-104">La [Visión general del marco de informes electrónicos (ER)](general-electronic-reporting.md) permite a los usuarios de la empresa configurar formatos para documentos de salida en función de los requisitos legales de diversos países o regiones.</span><span class="sxs-lookup"><span data-stu-id="37457-104">The [Electronic reporting (ER) overview](general-electronic-reporting.md) lets business users configure formats for outbound documents according to the legal requirements of various countries and regions.</span></span> <span data-ttu-id="37457-105">Los formatos de ER configurados pueden usar plantillas predefinidas para generar documentos salientes en distintos formatos, como libros Microsoft Excel , documentos Microsoft Word , o documentos PDF.</span><span class="sxs-lookup"><span data-stu-id="37457-105">Configured ER formats can use predefined templates to generate outbound documents in various formats, such as Microsoft Excel workbooks, Microsoft Word documents, or PDF documents.</span></span> <span data-ttu-id="37457-106">Las plantillas se rellenan con los datos que necesita el flujo de datos configurado para los documentos generados.</span><span class="sxs-lookup"><span data-stu-id="37457-106">The templates are filled with data that the configured dataflow for generated documents requires.</span></span>

<span data-ttu-id="37457-107">Cada formato configurado se puede publicar como parte de una solución de ER.</span><span class="sxs-lookup"><span data-stu-id="37457-107">Each configured format can be published as part of an ER solution.</span></span> <span data-ttu-id="37457-108">Cada solución de ER se puede exportar a partir de una instancia de Finance and Operations e importarse a otra instancia.</span><span class="sxs-lookup"><span data-stu-id="37457-108">Each ER solution can be exported from one instance of Finance and Operations and imported into another instance.</span></span>

<span data-ttu-id="37457-109">El marco de ER usa [Configurar la gestión de documentos](../../fin-ops/organization-administration/configure-document-management.md) para conservar las plantillas necesarias para la instancia actual de Finance and Operations.</span><span class="sxs-lookup"><span data-stu-id="37457-109">The ER framework uses the [Configure document management](../../fin-ops/organization-administration/configure-document-management.md) to keep the required templates for the current Finance and Operations instance.</span></span> <span data-ttu-id="37457-110">En función de la configuración del marco de ER, el Blob Storage de Microsoft Azure o una carpeta de Microsoft SharePoint se pueden seleccionar como la ubicación de almacenamiento principal físico para las plantillas.</span><span class="sxs-lookup"><span data-stu-id="37457-110">Depending on the settings of the ER framework, Microsoft Azure Blob storage or a Microsoft SharePoint folder can be selected as the physical primary storage location for templates.</span></span> <span data-ttu-id="37457-111">(Para obtener más información, consulte [Configurar el marco de informes electrónicos (ER)](electronic-reporting-er-configure-parameters.md)). La tabla DocuValue contiene un registro individual para cada plantilla.</span><span class="sxs-lookup"><span data-stu-id="37457-111">(For more information, see [Configure the Electronic reporting (ER) framework](electronic-reporting-er-configure-parameters.md).) The DocuValue table holds an individual record for each template.</span></span> <span data-ttu-id="37457-112">En cada registro, el campo **AccessInformation** almacena la ruta del archivo de una plantilla ubicado en la ubicación de almacenamiento configurada.</span><span class="sxs-lookup"><span data-stu-id="37457-112">In each record, the **AccessInformation** field stores the path of a template file that is located in the configured storage location.</span></span>

<span data-ttu-id="37457-113">Al gestionar las instancias de Finance and Operations, es posible que desee migrar la instancia actual a otra ubicación.</span><span class="sxs-lookup"><span data-stu-id="37457-113">When you manage your Finance and Operations instances, you might decide to migrate the current instance to another location.</span></span> <span data-ttu-id="37457-114">Por ejemplo, puede migrar la instancia de producción a un nuevo entorno de espacio aislado.</span><span class="sxs-lookup"><span data-stu-id="37457-114">For example, you might migrate your production instance to a new sandbox environment.</span></span> <span data-ttu-id="37457-115">Si configuró el marco de ER para almacenar plantillas en Blob storage, la tabla DocuValue en el nuevo entorno aislado se refiere a la instancia de Blob storage del entorno de producción.</span><span class="sxs-lookup"><span data-stu-id="37457-115">If you configured the ER framework to store templates in Blob storage, the DocuValue table in the new sandbox environment refers to the instance of Blob storage in the production environment.</span></span> <span data-ttu-id="37457-116">Sin embargo, no se puede acceder a esta instancia desde el entorno aislado, ya que el proceso de migración no admite la migración de artefactos en Blob storage.</span><span class="sxs-lookup"><span data-stu-id="37457-116">However, this instance can't be accessed from the sandbox environment, because the migration process doesn't support the migration of artifacts in Blob storage.</span></span> <span data-ttu-id="37457-117">Por lo tanto, si intenta ejecutar un formato de ER que use una plantilla para generar documentos empresariales, se producirá una excepción, y se le notificará que falta la plantilla.</span><span class="sxs-lookup"><span data-stu-id="37457-117">Therefore, if you try to run an ER format that uses a template to generate business documents, an exception occurs, and you're notified about the missing template.</span></span> <span data-ttu-id="37457-118">También se le guía para usar la herramienta de limpieza del ER y después volver a importar la configuración del formato de ER que contiene la plantilla.</span><span class="sxs-lookup"><span data-stu-id="37457-118">You're also guided to use the ER cleanup tool to delete and then re-import the ER format configuration that contains the template.</span></span> <span data-ttu-id="37457-119">Dado que puede que tenga varias configuraciones de formato de ER, este proceso puede ser largo.</span><span class="sxs-lookup"><span data-stu-id="37457-119">Because you might have several ER format configurations, this process can be time consuming.</span></span>

<span data-ttu-id="37457-120">La característica de almacenamiento de copia de seguridad de las plantillas de ER puede ayudarle a crear sus plantillas de modo que están siempre disponibles para generar documentos empresariales.</span><span class="sxs-lookup"><span data-stu-id="37457-120">The Backup storage of ER templates feature can help you make your templates so that they are always available to generate business documents.</span></span>

> [!NOTE]
> <span data-ttu-id="37457-121">Esta función se puede utilizar solo si Blob storage se ha seleccionado como la ubicación de almacenamiento físico de las plantillas de ER.</span><span class="sxs-lookup"><span data-stu-id="37457-121">This feature can be used only when Blob storage has been selected as the physical storage location for ER templates.</span></span>

## <a name="automated-recovery-and-notification"></a><span data-ttu-id="37457-122">Recuperación automatizada y notificación</span><span class="sxs-lookup"><span data-stu-id="37457-122">Automated recovery and notification</span></span>

<span data-ttu-id="37457-123">Para esta función, cada plantilla de una nueva configuración de formato de ER en el entorno actual se guarda automáticamente en la ubicación de almacenamiento de copia de seguridad (la tabla de base de datos de ERDocuDatabaseStorage) cuando los eventos siguientes se producen:</span><span class="sxs-lookup"><span data-stu-id="37457-123">For this feature, every template of a new ER format configuration in the current environment is automatically saved to the backup storage location for templates (the ERDocuDatabaseStorage database table) when the following events occur:</span></span>

- <span data-ttu-id="37457-124">Importa una nueva configuración del formato de ER que contiene una plantilla.</span><span class="sxs-lookup"><span data-stu-id="37457-124">You import a new ER format configuration that contains a template.</span></span>
- <span data-ttu-id="37457-125">Completa el borrador de versión de una configuración del formato de ER que contiene una plantilla.</span><span class="sxs-lookup"><span data-stu-id="37457-125">You complete the draft version of an ER format configuration that contains a template.</span></span>

<span data-ttu-id="37457-126">Las copias de seguridad de plantillas se migran a una nueva instancia de Finance and Operations como parte de la base de datos de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="37457-126">Backup copies of templates are migrated to a new instance of Finance and Operations as part of the application database.</span></span>

<span data-ttu-id="37457-127">Si una plantilla de un formato de ER se requiere para la generación de documentos salientes, para procesar pagos de proveedor incluidas la generación de avisos de pago y informes de control, por ejemplo, pero la plantilla requerida no se encuentra en la ubicación de almacenamiento principal, los eventos siguientes se producen:</span><span class="sxs-lookup"><span data-stu-id="37457-127">If a template of an ER format is required for generation of outbound documents, to process vendor payments including generation of payment advice and control reports, for example, but the required template isn't found in the primary storage location, the following events occur:</span></span>

- <span data-ttu-id="37457-128">Si la plantilla estará disponible en la ubicación de almacenamiento de copia de seguridad, se toma automáticamente de la ubicación de almacenamiento de copia de seguridad, se restablece a la ubicación de almacenamiento principal, y se usa para la ejecución actual.</span><span class="sxs-lookup"><span data-stu-id="37457-128">If the template is available in the backup storage location, it is automatically taken from the backup storage location, restored to the primary storage location, and used for the current execution.</span></span>
- <span data-ttu-id="37457-129">Se avisa a todos los usuarios asignados al rol **Desarrollador de informes electrónicos** o **Administrador del sistema** acerca del problema de la falta de la plantilla a través del centro de acción.</span><span class="sxs-lookup"><span data-stu-id="37457-129">Every user who is assigned to the **Electronic reporting developer** or **System administrator** role is notified about the missing template issue through the Action center.</span></span> <span data-ttu-id="37457-130">El mensaje que aparece depende del valor del parámetro **Ejecutar automáticamente el procedimiento de restablecer las plantillas rotas en lote**:</span><span class="sxs-lookup"><span data-stu-id="37457-130">The message that appears depends on the value of the **Automatically run the procedure of restoring the broken templates in batch** parameter:</span></span>

    - <span data-ttu-id="37457-131">Si este parámetro se establece en **Desactivado**, el mensaje recomienda que comience el proceso por lotes para corregir automáticamente emisiones similares para otras plantillas de configuración del formato de ER.</span><span class="sxs-lookup"><span data-stu-id="37457-131">If this parameter is set to **Off**, the message recommends that you start the batch process to automatically fix similar issues for other ER format configuration templates.</span></span> <span data-ttu-id="37457-132">El mensaje incluye un vínculo que podrá usar para iniciar el proceso por lotes.</span><span class="sxs-lookup"><span data-stu-id="37457-132">The message includes a link that you can use to start the batch process.</span></span>
    - <span data-ttu-id="37457-133">Si este parámetro se establece en **Activado**, el mensaje le notifica que se ha detectado un problema de falta de plantillas, y que un nuevo proceso por lotes, **Restaurar plantillas rotas desde la copia de seguridad interna de la base de datos**, se ha programado automáticamente.</span><span class="sxs-lookup"><span data-stu-id="37457-133">If this parameter is set to **On**, the message notifies you that a missing templates issue has been discovered, and that a new batch process, **Restore broken templates from internal database backup**, has been automatically scheduled.</span></span> <span data-ttu-id="37457-134">Este proceso por lotes corregirá automáticamente problemas similares para otras plantillas.</span><span class="sxs-lookup"><span data-stu-id="37457-134">This batch process will automatically fix similar issues for other templates.</span></span>

<span data-ttu-id="37457-135">Para configurar el parámetro **Ejecutar automáticamente el procedimiento de restablecer las plantillas rotas por lotes**, complete los pasos siguientes:</span><span class="sxs-lookup"><span data-stu-id="37457-135">To set up the he **Automatically run the procedure of restoring the broken templates in batch** parameter, complete the following steps:</span></span>

1. <span data-ttu-id="37457-136">En Finance and Operations, abra la página **Administración de la organización \> Informes electrónicos \> Configuraciones**.</span><span class="sxs-lookup"><span data-stu-id="37457-136">In Finance and Operations, open the **Organization administration \> Electronic reporting \> Configurations page**.</span></span>
2. <span data-ttu-id="37457-137">En la página **Configuraciones**, en el panel de acciones, en la pestaña **Configuraciones**, en el grupo **Configuración avanzada**, seleccione **Parámetros de usuario**.</span><span class="sxs-lookup"><span data-stu-id="37457-137">On the **Configurations** page, on the Action Pane, on the **Configurations** tab, in the **Advanced settings** group, select **User parameters**.</span></span>
3. <span data-ttu-id="37457-138">En el cuadro de diálogo **Parámetros de usuario** , establezca el valor necesario para el parámetro **Ejecutar automáticamente el procedimiento de restablecer las plantillas rotas por lotes**.</span><span class="sxs-lookup"><span data-stu-id="37457-138">In the **User parameters** dialog box, set the required value for the **Automatically run the procedure of restoring the broken templates in batch** parameter.</span></span>

> [!NOTE]
> <span data-ttu-id="37457-139">Este parámetro se define como usuario de aplicación y específico de la empresa registrada.</span><span class="sxs-lookup"><span data-stu-id="37457-139">This parameter is defined as application user and logged company specific.</span></span>

![Página de configuraciones de ER](./media/GER-BackupTemplates-1.png)

<span data-ttu-id="37457-141">La ilustración siguiente muestra un ejemplo del mensaje que se genera cuando el parámetro **Ejecutar automáticamente el procedimiento de restablecer las plantillas rotas por lotes** se establece en **Activado**.</span><span class="sxs-lookup"><span data-stu-id="37457-141">The following illustration shows an example of the message that appears when the **Automatically run the procedure of restoring the broken templates in batch** parameter is set to **On**.</span></span>

![Página del diario de pagos a proveedores](./media/GER-BackupTemplates-2.png)

<span data-ttu-id="37457-143">La ilustración siguiente muestra el proceso por lotes **Restaurar plantillas rotas desde la copia de seguridad interna de la base de datos** en la página **trabajo por lotes**.</span><span class="sxs-lookup"><span data-stu-id="37457-143">The following illustration shows the **Restore broken templates from internal database backup** batch process on the **Batch job** page.</span></span>

![Página de trabajos por lotes](./media/GER-BackupTemplates-3.png)

<span data-ttu-id="37457-145">El registro de la ejecución del proceso por lotes **Restaurar plantillas rotas desde la copia de seguridad interna de la base de datos** completado incluye información acerca de las plantillas que se han restablecido desde la ubicación de almacenamiento de copia de seguridad a la ubicación de almacenamiento principal.</span><span class="sxs-lookup"><span data-stu-id="37457-145">The execution log of the completed **Restore broken templates from internal database backup** batch process includes information about the templates that have been restored from the backup storage location to the primary storage location.</span></span>

![Página del historial de trabajos por lotes](./media/GER-BackupTemplates-4.png)

<span data-ttu-id="37457-147">De forma predeterminada, el proceso de crear automáticamente las copias de seguridad de las plantillas que residen en configuraciones de formato de ER está activado.</span><span class="sxs-lookup"><span data-stu-id="37457-147">By default, the process of automatically creating backup copies of templates that reside in ER format configurations is turned on.</span></span> <span data-ttu-id="37457-148">Para detener el crear copias de seguridad de plantillas, establezca la opción **Detener la creación de copias de seguridad de plantillas** en **Sí** en la pestaña **Archivos adjuntos** de la página **Parámetros de informes electrónicos**.</span><span class="sxs-lookup"><span data-stu-id="37457-148">To stop making backup copies of templates, set the **Stop making backup copies of template** option to **Yes** on the **Attachments** tab of the **Electronic reporting parameters** page.</span></span> <span data-ttu-id="37457-149">Puede abrir esta página desde el espacio de trabajo **Informes electrónicos**.</span><span class="sxs-lookup"><span data-stu-id="37457-149">You can open this page from the **Electronic reporting** workspace.</span></span>

<span data-ttu-id="37457-150">Si establece la opción **Detener la creación de copias de seguridad de plantillas** en **Sí** y no desea conservar las copias de seguridad que se realizaron anteriormente de plantillas, seleccione **Borrar almacenamiento de copia de seguridad** en la página **Parámetros de informes electrónico**.</span><span class="sxs-lookup"><span data-stu-id="37457-150">If you set the **Stop making backup copies of templates** option to **Yes** and don't want to keep the backup copies that were previously made of templates, select **Clean up backup storage** on the **Electronic reporting parameters** page.</span></span>

<span data-ttu-id="37457-151">Si ha actualizado el entorno a Finance and Operations, versión 10.0.5 (octubre de 2019), y desea migrar a un nuevo entorno que incluye las configuraciones del formato de ER que pueden ejecutarse, seleccione **Rellenar el almacenamiento de copia de seguridad** en la página **Parámetros de informes electrónicos** antes de que se produzca la migración.</span><span class="sxs-lookup"><span data-stu-id="37457-151">If you upgraded your environment to Finance and Operations version 10.0.5 (October 2019) and want to migrate to a new environment that includes ER format configurations that can be run, select **Fill in backup storage** on the **Electronic reporting parameters** page before the migration occurs.</span></span> <span data-ttu-id="37457-152">Este botón inicia el proceso de crear las copias de seguridad de todas las plantillas disponibles, para que se puedan almacenar en la ubicación de almacenamiento de copia de seguridad de ER para plantillas.</span><span class="sxs-lookup"><span data-stu-id="37457-152">This button starts the process of making backup copies of all available templates, so that they can be stored in the ER backup storage location for templates.</span></span>

![Página de parámetros de informes electrónicos](./media/GER-BackupTemplates-5.png)

## <a name="manual-recovery"></a><span data-ttu-id="37457-154">Recuperación manual</span><span class="sxs-lookup"><span data-stu-id="37457-154">Manual recovery</span></span>

<span data-ttu-id="37457-155">Vaya a **Administración de la organización** \> **Informes electrónicos** \> **Restaurar plantillas estropeadas** para iniciar manualmente el proceso de restauración de plantillas ER desde la ubicación de almacenamiento de respaldo a la ubicación de almacenamiento principal.</span><span class="sxs-lookup"><span data-stu-id="37457-155">Go to **Organization administration** \> **Electronic reporting** \> **Restore broken templates** to manually initiate the process of restoring ER templates from the backup storage location to the primary storage location.</span></span> <span data-ttu-id="37457-156">Antes de comenzar este proceso, en la página **Restaurar plantillas estropeadas** puede especificar si se realizará de forma interactiva, o el proceso por lotes se programará para esto.</span><span class="sxs-lookup"><span data-stu-id="37457-156">Before you start this process, on the **Restore broken templates** page you can specify whether it will be performed interactively, or the batch process will be scheduled for this.</span></span>

## <a name="supported-deployments"></a><span data-ttu-id="37457-157">Implementaciones compatibles</span><span class="sxs-lookup"><span data-stu-id="37457-157">Supported deployments</span></span>

<span data-ttu-id="37457-158">En Finance and Operations, versión 10.0.5, el almacenamiento de copia de seguridad de la función de plantillas de ER solo está disponible en las implementaciones en la nube.</span><span class="sxs-lookup"><span data-stu-id="37457-158">In Finance and Operations version 10.0.5, the Backup storage of ER templates feature is available only in cloud deployments.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="37457-159">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="37457-159">Additional resources</span></span>

[<span data-ttu-id="37457-160">Visión general de los informes electrónicos (ER)</span><span class="sxs-lookup"><span data-stu-id="37457-160">Electronic reporting (ER) overview</span></span>](general-electronic-reporting.md)

[<span data-ttu-id="37457-161">Configurar el marco de informes electrónicos (ER)</span><span class="sxs-lookup"><span data-stu-id="37457-161">Configure the Electronic reporting (ER) framework</span></span>](electronic-reporting-er-configure-parameters.md)
