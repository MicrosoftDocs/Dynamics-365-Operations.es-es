---
title: Configurar la integración fiscal para canales comerciales
description: En este tema se proporcionan instrucciones para configurar la funcionalidad de integración fiscal para canales minoristas.
author: josaw
manager: annbe
ms.date: 2/01/2019
ms.topic: article
ms.prod: ''
ms.service: dynamics-365-retail
ms.technology: ''
ms.search.form: RetailFunctionalityProfile, RetailFormLayout, RetailParameters
audience: Application User
ms.reviewer: josaw
ms.search.scope: Core, Operations, Retail
ms.search.region: Global
ms.search.industry: Retail
ms.author: v-kikozl
ms.search.validFrom: 2018-11-1
ms.dyn365.ops.version: 8.1.1
ms.openlocfilehash: 3c2945c4310dc4c1ae74f215e9b28056e7d1ede9
ms.sourcegitcommit: 68df883200b5c477ea1799cc28d3ef467cd29202
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 02/07/2019
ms.locfileid: "377327"
---
# <a name="set-up-the-fiscal-integration-for-retail-channels"></a><span data-ttu-id="d44a1-103">Configurar la integración fiscal para canales comerciales</span><span class="sxs-lookup"><span data-stu-id="d44a1-103">Set up the fiscal integration for Retail channels</span></span>

[!include [banner](../includes/banner.md)]

## <a name="introduction"></a><span data-ttu-id="d44a1-104">Introducción</span><span class="sxs-lookup"><span data-stu-id="d44a1-104">Introduction</span></span>

<span data-ttu-id="d44a1-105">En este tema se proporcionan instrucciones para configurar la funcionalidad de integración fiscal para canales minoristas.</span><span class="sxs-lookup"><span data-stu-id="d44a1-105">This topic provides guidelines for setting up the fiscal integration functionality for Retail channels.</span></span> <span data-ttu-id="d44a1-106">Para obtener más información acerca de la integración fiscal, consulte [Visión general de la integración fiscal para los canales minoristas](fiscal-integration-for-retail-channel.md).</span><span class="sxs-lookup"><span data-stu-id="d44a1-106">For more information about the fiscal integration, see [Overview of fiscal integration for Retail channels](fiscal-integration-for-retail-channel.md).</span></span>

<span data-ttu-id="d44a1-107">El proceso de configurar la integración fiscal incluye las tareas globales siguientes:</span><span class="sxs-lookup"><span data-stu-id="d44a1-107">The process of setting up the fiscal integration includes the following tasks:</span></span>

1. <span data-ttu-id="d44a1-108">Configurar los conectores fiscales que representan los dispositivos o servicios fiscales que se usan para fines fiscales de registro, como impresoras fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-108">Configure fiscal connectors that represent fiscal devices or services that are used for fiscal registration purposes, such as fiscal printers.</span></span>
2. <span data-ttu-id="d44a1-109">Configurar los proveedores de documentos que generan los documentos fiscales que se registrarán en dispositivos o servicios fiscales mediante conectores fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-109">Configure document providers that generate fiscal documents that will be registered in fiscal devices or services by fiscal connectors.</span></span>
3. <span data-ttu-id="d44a1-110">Configurar el proceso de registro fiscal que define una secuencia de pasos de registro fiscal y los conectores fiscales y proveedores de documentos fiscales que se usan para cada paso.</span><span class="sxs-lookup"><span data-stu-id="d44a1-110">Configure the fiscal registration process that defines a sequence of fiscal registration steps and the fiscal connectors and fiscal document providers that are used for each step.</span></span>
4. <span data-ttu-id="d44a1-111">Asignar el proceso de registro fiscal a perfiles de funcionalidad de punto de venta (PDV).</span><span class="sxs-lookup"><span data-stu-id="d44a1-111">Assign the fiscal registration process to point of sale (POS) functionality profiles.</span></span>
5. <span data-ttu-id="d44a1-112">Asignar perfiles técnicos de conectores a los perfiles de hardware.</span><span class="sxs-lookup"><span data-stu-id="d44a1-112">Assign connector technical profiles to hardware profiles.</span></span>

## <a name="set-up-a-fiscal-registration-process"></a><span data-ttu-id="d44a1-113">Configuración de un proceso de registro fiscal</span><span class="sxs-lookup"><span data-stu-id="d44a1-113">Set up a fiscal registration process</span></span>

<span data-ttu-id="d44a1-114">Antes de usar la funcionalidad de la integración fiscal, debe configurar los valores siguientes.</span><span class="sxs-lookup"><span data-stu-id="d44a1-114">Before you use the fiscal integration functionality, you should configure the following settings.</span></span>

1. <span data-ttu-id="d44a1-115">Actualice los parámetros de ventas.</span><span class="sxs-lookup"><span data-stu-id="d44a1-115">Update retail parameters.</span></span>

    1. <span data-ttu-id="d44a1-116">En la página **Parámetros compartidos comerciales**, en la pestaña **General**, establezca la opción **Habilitar integración fiscal** en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-116">On the **Retail shared parameters** page, on the **General** tab, set the **Enable fiscal integration** option to **Yes**.</span></span> <span data-ttu-id="d44a1-117">En la ficha **Secuencias numéricas**, defina el número de secuencias para las siguientes referencias:</span><span class="sxs-lookup"><span data-stu-id="d44a1-117">On the **Number sequences** tab, define the number sequences for the following references:</span></span>

        - <span data-ttu-id="d44a1-118">Número de perfil técnico fiscal</span><span class="sxs-lookup"><span data-stu-id="d44a1-118">Fiscal technical profile number</span></span>
        - <span data-ttu-id="d44a1-119">Número de grupo del conector fiscal</span><span class="sxs-lookup"><span data-stu-id="d44a1-119">Fiscal connector group number</span></span>
        - <span data-ttu-id="d44a1-120">Número de proceso de registro</span><span class="sxs-lookup"><span data-stu-id="d44a1-120">Registration process number</span></span>

    2. <span data-ttu-id="d44a1-121">En la página **Parámetros de ventas** defina la secuencia numérica para el número de perfil funcional fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-121">On the **Retail parameters** page, define the number sequence for the fiscal functional profile number.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-122">Las secuencias numéricas son opcionales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-122">Number sequences are optional.</span></span> <span data-ttu-id="d44a1-123">Los números de las entidades de integración fiscal se pueden generar desde secuencias numéricas o manualmente.</span><span class="sxs-lookup"><span data-stu-id="d44a1-123">Numbers for all fiscal integration entities can be generated either from number sequences or manually.</span></span>

2. <span data-ttu-id="d44a1-124">Cargue las configuraciones de conectores fiscales y proveedores de documentos fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-124">Upload configurations of fiscal connectors and fiscal document providers.</span></span>

    <span data-ttu-id="d44a1-125">Un proveedor de documentos fiscales es responsable de generar documentos fiscales que representan las transacciones y los eventos al por menor que se registran en el sistema PDV en un formato que también se usa para la interacción con un dispositivo o un servicio fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-125">A fiscal document provider is responsible for generating fiscal documents that represent retail transactions and events that are registered on the POS in a format that is also used for the interaction with a fiscal device or service.</span></span> <span data-ttu-id="d44a1-126">Por ejemplo, un proveedor de documentos fiscales puede generar una representación de un recibo fiscal en un formato XML.</span><span class="sxs-lookup"><span data-stu-id="d44a1-126">For example, a fiscal document provider might generate a representation of a fiscal receipt in an XML format.</span></span>
    
    <span data-ttu-id="d44a1-127">Un conector fiscal es responsable de la comunicación con un dispositivo o un servicio fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-127">A fiscal connector is responsible for the communication with a fiscal device or service.</span></span> <span data-ttu-id="d44a1-128">Por ejemplo, un conector fiscal puede enviar un recibo fiscal que un proveedor fiscal de documentos ha creado en un formato XML a una impresora fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-128">For example, a fiscal connector might send a fiscal receipt that a fiscal document provider created in an XML format to a fiscal printer.</span></span> <span data-ttu-id="d44a1-129">Para obtener más detalles sobre los componentes de integración fiscal, consulte [Proceso de registro fiscal y ejemplos fiscales de la integración de los dispositivos fiscales](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span><span class="sxs-lookup"><span data-stu-id="d44a1-129">For more details about fiscal integration components, see [Fiscal registration process and fiscal integration samples for fiscal devices](fiscal-integration-for-retail-channel.md#fiscal-registration-process-and-fiscal-integration-samples-for-fiscal-devices).</span></span>

    1. <span data-ttu-id="d44a1-130">En la página **conectores fiscales** (**Venta minorista \> Configuración de canal \> integración fiscal \> conectores fiscales**) cargue una configuración XML para cada dispositivo o servicio que tenga previsto usar para fines de integración fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-130">On the **Fiscal connectors** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connectors**), upload an XML configuration for each device or service that you plan to use for fiscal integration purposes.</span></span>

        > [!TIP]
        > <span data-ttu-id="d44a1-131">Seleccionando **Ver**, puede ver todos los perfiles funcionales y técnicos relacionados con el conector fiscal actual.</span><span class="sxs-lookup"><span data-stu-id="d44a1-131">By selecting **View**, you can view all functional and technical profiles that are related to the current fiscal connector.</span></span>

    2. <span data-ttu-id="d44a1-132">En la página **Proveedores de documentos fiscales** (**Venta minorista \> Configuración de canal \> integración fiscal \> Proveedores de documentos fiscales**) cargue una configuración XML para cada dispositivo o servicio que tenga previsto usar.</span><span class="sxs-lookup"><span data-stu-id="d44a1-132">On the **Fiscal document providers** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal document providers**), upload an XML configuration for each device or service that you plan to use.</span></span>

        > [!TIP]
        > <span data-ttu-id="d44a1-133">Seleccionando **Ver**, puede ver todos los perfiles funcionales relacionados con el proveedor de documentos fiscales actual.</span><span class="sxs-lookup"><span data-stu-id="d44a1-133">By selecting **View**, you can view all functional profiles that are related to the current fiscal document provider.</span></span>

    <span data-ttu-id="d44a1-134">Para obtener ejemplos de configuraciones de conectores fiscales y proveedores de documentos fiscales, consulte [Ejemplos fiscales de integración en el SDK al por menor](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span><span class="sxs-lookup"><span data-stu-id="d44a1-134">For examples of configurations of fiscal connectors and fiscal document providers, see [Fiscal integration samples in the Retail SDK](fiscal-integration-for-retail-channel.md#fiscal-integration-samples-in-the-retail-sdk).</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-135">La asignación de datos se considera parte de un proveedor de documentos fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-135">Data mapping is considered part of a fiscal document provider.</span></span> <span data-ttu-id="d44a1-136">Para configurar diferentes asignaciones de datos para el mismo conector (por ejemplo, normas de estado específicas), debe crear varios proveedores de documentos fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-136">To set up different data mappings for the same connector (for example, state-specific regulations), you should create different fiscal document providers.</span></span>

3. <span data-ttu-id="d44a1-137">Cree perfiles funcionales de conector y perfiles técnicos de conectores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-137">Create connector functional profiles and connector technical profiles.</span></span>

    1. <span data-ttu-id="d44a1-138">En la página **Perfiles funcionales de conectores** (**Ventas al por menor \> Configuración del canal \> Integración fiscal \> Perfiles funcionales de conectores**), cree un perfil funcional de conector para cada combinación de un conector fiscal y de un proveedor de documentos fiscales relacionado con este conector fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-138">On the **Connector functional profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector functional profiles**), create a connector functional profile for each combination of a fiscal connector and a fiscal document provider that is related to this fiscal connector.</span></span>

        1. <span data-ttu-id="d44a1-139">Seleccione un nombre de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-139">Select a connector name.</span></span>
        2. <span data-ttu-id="d44a1-140">Seleccione un proveedor de documentos.</span><span class="sxs-lookup"><span data-stu-id="d44a1-140">Select a document provider.</span></span>

        <span data-ttu-id="d44a1-141">Puede cambiar los parámetros de la asignación de los datos de un perfil funcional de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-141">You can change the data mapping parameters in a connector functional profile.</span></span> <span data-ttu-id="d44a1-142">Para restablecer los parámetros predeterminados que se definen en la configuración del proveedor de documentos fiscales, seleccione **Actualizar**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-142">To restore the default parameters that are defined in the fiscal document provider configuration, select **Update**.</span></span>

        <span data-ttu-id="d44a1-143">**Ejemplos**</span><span class="sxs-lookup"><span data-stu-id="d44a1-143">**Examples**</span></span>
    
        |   | <span data-ttu-id="d44a1-144">Formato</span><span class="sxs-lookup"><span data-stu-id="d44a1-144">Format</span></span> | <span data-ttu-id="d44a1-145">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="d44a1-145">Example</span></span> |
        |---|--------|---------|
        | <span data-ttu-id="d44a1-146">**Configuración de índices de IVA**</span><span class="sxs-lookup"><span data-stu-id="d44a1-146">**VAT rates settings**</span></span> | <span data-ttu-id="d44a1-147">valor: VATrate</span><span class="sxs-lookup"><span data-stu-id="d44a1-147">value : VATrate</span></span> | <span data-ttu-id="d44a1-148">1 : 2000, 2 : 1800</span><span class="sxs-lookup"><span data-stu-id="d44a1-148">1 : 2000, 2 : 1800</span></span> |
        | <span data-ttu-id="d44a1-149">**Asignación de códigos de IVA**</span><span class="sxs-lookup"><span data-stu-id="d44a1-149">**VAT codes mapping**</span></span> | <span data-ttu-id="d44a1-150">VATcode : valor</span><span class="sxs-lookup"><span data-stu-id="d44a1-150">VATcode : value</span></span> | <span data-ttu-id="d44a1-151">vat20 : 1, vat18 : 2</span><span class="sxs-lookup"><span data-stu-id="d44a1-151">vat20 : 1, vat18 : 2</span></span> |
        | <span data-ttu-id="d44a1-152">**Asignación de tipos de forma de pago**</span><span class="sxs-lookup"><span data-stu-id="d44a1-152">**Tender types mapping**</span></span> | <span data-ttu-id="d44a1-153">TenderType : valor</span><span class="sxs-lookup"><span data-stu-id="d44a1-153">TenderType : value</span></span> | <span data-ttu-id="d44a1-154">Cash : 1, Card : 2</span><span class="sxs-lookup"><span data-stu-id="d44a1-154">Cash : 1, Card : 2</span></span> |

        > [!NOTE]
        > <span data-ttu-id="d44a1-155">Los perfiles funcionales de conectores son específicos de la empresa.</span><span class="sxs-lookup"><span data-stu-id="d44a1-155">Connector functional profiles are company-specific.</span></span> <span data-ttu-id="d44a1-156">Si tiene previsto usar la misma combinación de un conector fiscal y de un proveedor de documentos fiscales en distintas empresas, debe crear un perfil funcional de conector para cada empresa.</span><span class="sxs-lookup"><span data-stu-id="d44a1-156">If you plan to use the same combination of a fiscal connector and a fiscal document provider in different companies, you should create a connector functional profile for each company.</span></span>

    2. <span data-ttu-id="d44a1-157">En la página **Perfiles técnicos del conector** (**Venta minorista \> configurar canal\> integración fiscal \> perfiles técnicos de conector**), cree un perfil técnico de conector para cada conector fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-157">On the **Connector technical profiles** page (**Retail \> Channel setup \> Fiscal integration \> Connector technical profiles**), create a connector technical profile for each fiscal connector.</span></span>

        1. <span data-ttu-id="d44a1-158">Seleccione un nombre de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-158">Select a connector name.</span></span>
        2. <span data-ttu-id="d44a1-159">Seleccione un tipo de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-159">Select a connector type.</span></span> <span data-ttu-id="d44a1-160">Para los dispositivos asociados a una emisora de hardware, seleccione **Local**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-160">For devices that are connected to a Hardware station, select **Local**.</span></span>

            > [!NOTE]
            > <span data-ttu-id="d44a1-161">Solo los conectores locales se admiten actualmente.</span><span class="sxs-lookup"><span data-stu-id="d44a1-161">Only local connectors are currently supported.</span></span>

        <span data-ttu-id="d44a1-162">Los parámetros de las pestañas **Dispositivo** y **Configuración** de un perfil técnico de conector se pueden modificar.</span><span class="sxs-lookup"><span data-stu-id="d44a1-162">Parameters on the **Device** and **Settings** tabs in a connector technical profile can be changed.</span></span> <span data-ttu-id="d44a1-163">Para restablecer los parámetros predeterminados que se definen en la configuración del conector fiscal, seleccione **Actualizar**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-163">To restore the default parameters that are defined in the fiscal connector configuration, select **Update**.</span></span> <span data-ttu-id="d44a1-164">Mientras una nueva versión de una configuración de XML se carga, recibirá un mensaje que indica que el conector fiscal o el proveedor de documentos fiscales actual ya se está utilizando.</span><span class="sxs-lookup"><span data-stu-id="d44a1-164">While a new version of an XML configuration is loaded, you receive a message that states that the current fiscal connector or fiscal document provider is already being used.</span></span> <span data-ttu-id="d44a1-165">Este procedimiento no anula los cambios manuales que se realizaron previamente en perfiles funcionales de conector y en perfiles técnicos de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-165">This procedure doesn't override manual changes that were previously made in connector functional profiles and connector technical profiles.</span></span> <span data-ttu-id="d44a1-166">Para aplicar el conjunto de parámetros predeterminado desde una configuración, en la página **Perfiles funcionales del conector** y la página **Perfiles técnicos del conector** seleccione **Actualizar**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-166">To apply the default set of parameters from a new configuration, on the **Connector functional profiles** page or the **Connector technical profiles** page, select **Update**.</span></span>

4. <span data-ttu-id="d44a1-167">Cree grupos de conectores fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-167">Create fiscal connector groups.</span></span>

    <span data-ttu-id="d44a1-168">Un grupo de conectores fiscales combina perfiles funcionales de conectores fiscales que realizan idénticas funciones y se usan en la misma etapa del proceso de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-168">A fiscal connector group combines functional profiles of fiscal connectors that perform identical functions and are used at the same step of a fiscal registration process.</span></span> <span data-ttu-id="d44a1-169">Por ejemplo, si varios modelos de impresora fiscales se pueden usar en una tienda al por menor, los conectores fiscales para las impresoras fiscales se pueden combinar en un grupo fiscal de conectores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-169">For example, if several fiscal printer models can be used in a retail store, fiscal connectors for those fiscal printers can be combined in a fiscal connector group.</span></span>
    
    1. <span data-ttu-id="d44a1-170">En la página **Grupo fiscal de conectores** (**Ventas al por menor \> Configuración del canal \> Integración fiscal \> Grupos de conectores fiscales**), cree un nuevo grupo fiscal de conectores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-170">On the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**), create a new fiscal connector group.</span></span>
    2. <span data-ttu-id="d44a1-171">Agregue perfiles funcionales el grupo de conectores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-171">Add functional profiles to the connector group.</span></span> <span data-ttu-id="d44a1-172">En la pestaña **Perfiles funcionales**, seleccione **Agregar** y seleccione un número del perfil.</span><span class="sxs-lookup"><span data-stu-id="d44a1-172">On the **Functional profiles** tab, select **Add**, and select a profile number.</span></span> <span data-ttu-id="d44a1-173">Cada conector fiscal de un grupo de conectores solo puede tener un perfil funcional.</span><span class="sxs-lookup"><span data-stu-id="d44a1-173">Each fiscal connector in a connector group can only have one functional profile.</span></span>
    3. <span data-ttu-id="d44a1-174">Para suspender el uso del perfil funcional, establezca la opción **Deshabilitar** en **Sí**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-174">To suspend use of the functional profile, set the **Disable** option to **Yes**.</span></span> <span data-ttu-id="d44a1-175">Este cambio afecta al grupo de conectores actuales únicamente.</span><span class="sxs-lookup"><span data-stu-id="d44a1-175">This change affects only the current connector group.</span></span> <span data-ttu-id="d44a1-176">Puede continuar usando el mismo perfil funcional en otros grupos de conectores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-176">You can continue to use the same functional profile in other connector groups.</span></span>

5. <span data-ttu-id="d44a1-177">Cree un proceso de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-177">Create a fiscal registration process.</span></span>

    <span data-ttu-id="d44a1-178">Un proceso de registro fiscal se define por la secuencia de los pasos de registro y el grupo de conectores utilizados en cada paso.</span><span class="sxs-lookup"><span data-stu-id="d44a1-178">A fiscal registration process is defined by the sequence of registration steps and the connector group that is used for each step.</span></span>
    
    1. <span data-ttu-id="d44a1-179">En la página **Proceso de registro fiscal** (**venta minorista \> configurar canal \> integración fiscal \> procesos de registro fiscales**) cree un nuevo registro para cada proceso único de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-179">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), create a new record for each unique process of fiscal registration.</span></span>
    2. <span data-ttu-id="d44a1-180">Agregar pasos de registro al proceso:</span><span class="sxs-lookup"><span data-stu-id="d44a1-180">Add registration steps to the process:</span></span>

        1. <span data-ttu-id="d44a1-181">Seleccione **Agregar**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-181">Select **Add**.</span></span>
        2. <span data-ttu-id="d44a1-182">Seleccione un tipo de conector fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-182">Select a fiscal connector type.</span></span>
        3. <span data-ttu-id="d44a1-183">En el campo **Número de grupo** , seleccione un grupo de conectores fiscales adecuado.</span><span class="sxs-lookup"><span data-stu-id="d44a1-183">In the **Group number** field, select an appropriate fiscal connector group.</span></span>

6. <span data-ttu-id="d44a1-184">Asigne entidades del proceso de registro fiscal a perfiles PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-184">Assign entities of the fiscal registration process to POS profiles.</span></span>

    1. <span data-ttu-id="d44a1-185">En la página **Perfiles de funcionalidad del PDV** (**Ventas al por menor \> Configuración del canal \> Configuración de PDV \> Perfiles de PDV \> Perfiles de funcionalidad**), asigne el proceso de registro fiscal a un perfil de funcionalidad de PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-185">On the **POS functionality profiles** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Functionality profiles**), assign the fiscal registration process to a POS functionality profile.</span></span> <span data-ttu-id="d44a1-186">Seleccione **Editar**y, a continuación, en la pestaña **Proceso de registro fiscal** , en el campo **Número de proceso** , seleccione un proceso.</span><span class="sxs-lookup"><span data-stu-id="d44a1-186">Select **Edit**, and then, on the **Fiscal registration process** tab, in the **Process number** field, select a process.</span></span>
    2. <span data-ttu-id="d44a1-187">En la página **Perfil de hardware del PDV** (**Ventas al por menor \> Configuración del canal \> Configuración de PDV \> Perfiles de PDV \> Perfiles de hardware**), asigne perfiles técnicos de conector a un perfil de hardware.</span><span class="sxs-lookup"><span data-stu-id="d44a1-187">On the **POS hardware profile** page (**Retail \> Channel setup \> POS setup \> POS profiles \> Hardware profiles**), assign connector technical profiles to a hardware profile.</span></span> <span data-ttu-id="d44a1-188">Seleccione **Editar**, agregue una línea en la pestaña **Periféricos fiscales** y, a continuación, en el campo **Número de perfil** , seleccione un perfil técnico de conector.</span><span class="sxs-lookup"><span data-stu-id="d44a1-188">Select **Edit**, add a line on the **Fiscal peripherals** tab, and then, in the **Profile number** field, select a connector technical profile.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-189">Puede agregar varios perfiles técnicos al mismo perfil de hardware.</span><span class="sxs-lookup"><span data-stu-id="d44a1-189">You can add several technical profiles to the same hardware profile.</span></span> <span data-ttu-id="d44a1-190">Sin embargo, un perfil de hardware o un perfil de funcionalidad de PDV debe tener una sola intersección con cualquier grupo de conectores fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-190">However, a hardware profile or POS functionality profile should have only one intersection with any fiscal connector group.</span></span>

    <span data-ttu-id="d44a1-191">El flujo de registro fiscal se define mediante el proceso de registro fiscal y también por algunos parámetros de componentes de integración fiscales: la extensión del tiempo de ejecución de comercio para el proveedor de documentos fiscales y la extensión de estación de hardware para el conector fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-191">The fiscal registration flow is defined by the fiscal registration process and also by some parameters of fiscal integration components: the Commerce runtime extension for the fiscal document provider and the Hardware station extension for the fiscal connector.</span></span>

    - <span data-ttu-id="d44a1-192">La suscripción de eventos y transacciones al registro fiscal está predefinida en el proveedor de documentos fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-192">The subscription of events and transactions to fiscal registration is predefined in the fiscal document provider.</span></span>
    - <span data-ttu-id="d44a1-193">El proveedor de documentos fiscales también es responsable de identificar el conector fiscal que se usa para el registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-193">The fiscal document provider is also responsible for identifying the fiscal connector that is used for fiscal registration.</span></span> <span data-ttu-id="d44a1-194">Coincide con los perfiles funcionales de conectores que se incluyen en el grupo de conectores fiscales que se especifica para el paso actual del proceso de registro fiscal con el perfil técnico de conectores que se asigna el perfil de hardware de la emisora de hardware a la que está emparejado el PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-194">It matches the connector functional profiles that are included in the fiscal connector group that is specified for the current step of the fiscal registration process with the connector technical profile that is assigned to the hardware profile of the Hardware station that the POS is paired to.</span></span>
    - <span data-ttu-id="d44a1-195">El proveedor de documentos fiscales usa la configuración de asignación de datos de la configuración del proveedor de documentos fiscales para transformar datos de transacciones u eventos como impuestos y pagos mientras se genera un documento fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-195">The fiscal document provider uses the data mapping settings from the fiscal document provider configuration to transform transaction/event data such as taxes and payments while a fiscal document is generated.</span></span>
    - <span data-ttu-id="d44a1-196">Cuando el proveedor de documentos fiscales genera un documento fiscal, el conector fiscal puede enviarlo al dispositivo fiscal tal como está, o bien analizarlo y transformarlo en una secuencia de comandos de la interfaz de programación de la aplicación (API) para dispositivos, en función de cómo se gestiona la comunicación.</span><span class="sxs-lookup"><span data-stu-id="d44a1-196">When the fiscal document provider generates a fiscal document, the fiscal connector can either send it to the fiscal device as is, or parse it and transform it into a sequence of commands of the device application programming interface (API), depending on how the communication is handled.</span></span>

7. <span data-ttu-id="d44a1-197">En la página **Proceso de registro fiscal** (**venta minorista \> configurar canal \> integración fiscal \> procesos de registro fiscales**) seleccione **Validar** para validar el proceso de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-197">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), select **Validate** to validate the fiscal registration process.</span></span>

    <span data-ttu-id="d44a1-198">Es recomendable ejecutar este tipo de validación en los casos siguientes:</span><span class="sxs-lookup"><span data-stu-id="d44a1-198">We recommend that you run this type of validation in the following cases:</span></span>
    
    - <span data-ttu-id="d44a1-199">Después de completar toda la configuración de un proceso de registro nuevo, incluido cuando asigna procesos de registro a perfiles de funcionalidad de PDV y de hardware.</span><span class="sxs-lookup"><span data-stu-id="d44a1-199">After you've completed all the settings for a new registration process, including when you assign registration processes to POS functionality profiles and hardware profiles.</span></span>
    - <span data-ttu-id="d44a1-200">Una vez que haya creado los cambios en un proceso de registro fiscal existente, y que dichos cambios puedan provocar que se seleccione otro conector fiscal en el tiempo de ejecución (por ejemplo, si cambia el grupo de conectores para un paso del proceso de registro fiscal, habilite un perfil funcional en un grupo de conectores o agregue un perfil funcional de conector nuevo a un grupo de conectores).</span><span class="sxs-lookup"><span data-stu-id="d44a1-200">After you make changes to an existing fiscal registration process, and those changes might cause a different fiscal connector to be selected at runtime (for example, if you change the connector group for a fiscal registration process step, enable a connector functional profile in a connector group, or add a new connector functional profile to a connector group).</span></span>
    - <span data-ttu-id="d44a1-201">Después de realizar cambios en la asignación de los perfiles técnicos de conectores a perfiles de hardware.</span><span class="sxs-lookup"><span data-stu-id="d44a1-201">After you make changes in the assignment of connector technical profiles to hardware profiles.</span></span>

8. <span data-ttu-id="d44a1-202">En la página **Programador de distribución** , ejecute los trabajos **1070** y **1090** para transferir datos a la base de datos del canal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-202">On the **Distribution scheduler** page, run the **1070** and **1090** jobs to transfer data to the channel database.</span></span>

## <a name="set-up-fiscal-texts-for-discounts"></a><span data-ttu-id="d44a1-203">Configuración de textos fiscales para descuentos</span><span class="sxs-lookup"><span data-stu-id="d44a1-203">Set up fiscal texts for discounts</span></span>

<span data-ttu-id="d44a1-204">En algunos casos, un texto especial se debe imprimir en un recibo fiscal si se aplica un descuento.</span><span class="sxs-lookup"><span data-stu-id="d44a1-204">In some cases, a special text must be printed on a fiscal receipt if a discount is applied.</span></span> <span data-ttu-id="d44a1-205">Puede configurar textos fiscales para descuentos en la página **Grupo fiscal de conectores** (**Ventas al por menor \> Configuración del canal \> Integración fiscal \> Grupos de conectores fiscales**).</span><span class="sxs-lookup"><span data-stu-id="d44a1-205">You can set up fiscal texts for discounts on the **Fiscal connector group** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal connector groups**).</span></span>

- <span data-ttu-id="d44a1-206">Para descuentos manuales que se aplican en el PDV, debe configurar un texto fiscal para el código información o el grupo de códigos de información especificado como código de información de **Descuento del producto**en el perfil de funcionalidad del PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-206">For manual discounts that are applied at the POS, you should set a fiscal text for the info code or info code group that is specified as the **Product discount** info code in the POS functionality profile.</span></span>

    1. <span data-ttu-id="d44a1-207">En la página **Grupo del conector fiscal** , seleccione **Texto de recibo fiscal**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-207">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="d44a1-208">En la pestaña **Códigos de información** , seleccione **Agregar**, y seleccione un código de información o un grupo de códigos de información.</span><span class="sxs-lookup"><span data-stu-id="d44a1-208">On the **Info codes** tab, select **Add**, and select an info code or info code group.</span></span>
    3. <span data-ttu-id="d44a1-209">En el **Número de código de información**, seleccione un valor.</span><span class="sxs-lookup"><span data-stu-id="d44a1-209">In the **Info code number**, select a value.</span></span>
    4. <span data-ttu-id="d44a1-210">En el campo **Número de subcódigos**, seleccione un valor si un subcódigo se requiere para el código de información seleccionado.</span><span class="sxs-lookup"><span data-stu-id="d44a1-210">In the **Subcode number** field, select a value if a subcode is required for the selected info code.</span></span>
    5. <span data-ttu-id="d44a1-211">En el campo **Texto de recibo fiscal**, especifique un texto fiscal que se debe imprimir en un recibo fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-211">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>
    6. <span data-ttu-id="d44a1-212">Establezca la opción **Imprimir entrada de usuario en recibo fiscal** en **Sí** para reemplazar el texto en un recibo fiscal con la información que un usuario introduce manualmente en el PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-212">Set the **Print user input on fiscal receipt** option to **Yes** to override the text on a fiscal receipt with information that a user manually enters at the POS.</span></span> <span data-ttu-id="d44a1-213">Esta opción solo se aplica a los códigos de información que tienen un tipo de entrada de **Texto**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-213">This option applies only to info codes that have an input type of **Text**.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-214">Puede especificar un texto fiscal para varios códigos de información para admitir los escenarios donde se utilizan grupos de códigos de información, códigos de información vinculados y códigos activados de la información.</span><span class="sxs-lookup"><span data-stu-id="d44a1-214">You can specify a fiscal text for several info codes to support scenarios where info code groups, linked info codes, and triggered info codes are used.</span></span> <span data-ttu-id="d44a1-215">En estos casos, el recibo fiscal contendrá los textos fiscales de todos los códigos de información vinculados a la línea de transacción en la se aplicó el descuento.</span><span class="sxs-lookup"><span data-stu-id="d44a1-215">In these scenarios, the fiscal receipt will contain the fiscal texts from all info codes that are linked to the transaction line where the discount was applied.</span></span>

- <span data-ttu-id="d44a1-216">Para descuentos específicos del canal, debe definir un texto fiscal para el identificador del descuento.</span><span class="sxs-lookup"><span data-stu-id="d44a1-216">For channel-specific discounts, you should define a fiscal text for the discount ID.</span></span>

    1. <span data-ttu-id="d44a1-217">En la página **Grupo del conector fiscal** , seleccione **Texto de recibo fiscal**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-217">On the **Fiscal connector group** page, select **Text for fiscal receipt**.</span></span>
    2. <span data-ttu-id="d44a1-218">En la pestaña **Descuentos**, seleccione **Agregar**, y seleccione un identificador de descuento.</span><span class="sxs-lookup"><span data-stu-id="d44a1-218">On the **Discounts** tab, select **Add**, and select a discount ID.</span></span>
    3. <span data-ttu-id="d44a1-219">En el campo **Texto de recibo fiscal**, especifique un texto fiscal que se debe imprimir en un recibo fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-219">In the **Text for fiscal receipt** field, specify a fiscal text that should be printed on a fiscal receipt.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-220">Si varios descuentos se aplican a la misma línea de transacción, la recepción fiscal contendrá los textos fiscales de todos los descuentos vinculados a dichas líneas de transacción.</span><span class="sxs-lookup"><span data-stu-id="d44a1-220">If several discounts are applied to the same transaction line, the fiscal receipt will contain fiscal texts from all discounts that are linked to those transaction line.</span></span> 

## <a name="set-error-handling-settings"></a><span data-ttu-id="d44a1-221">Establecimiento de la configuración de tratamiento de errores</span><span class="sxs-lookup"><span data-stu-id="d44a1-221">Set error handling settings</span></span>

<span data-ttu-id="d44a1-222">Las opciones de procesamiento de errores que están disponibles en la integración fiscal se establecen en el proceso de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-222">The error handling options that are available in the fiscal integration are set in the fiscal registration process.</span></span> <span data-ttu-id="d44a1-223">Para obtener más información acerca de tratamiento de errores en la integración fiscal, consulte [Control de errores](fiscal-integration-for-retail-channel.md#error-handling).</span><span class="sxs-lookup"><span data-stu-id="d44a1-223">For more information about error handling in the fiscal integration, see [Error handling](fiscal-integration-for-retail-channel.md#error-handling).</span></span>

1. <span data-ttu-id="d44a1-224">En la página **Proceso de registro fiscal** (**venta minorista \> configurar canal \> integración fiscal \> procesos de registro fiscales**) puede establecer los parámetros siguientes para cada paso del proceso de registro fiscal:</span><span class="sxs-lookup"><span data-stu-id="d44a1-224">On the **Fiscal registration process** page (**Retail \> Channel setup \> Fiscal integration \> Fiscal registration processes**), you can set the following parameters for each step of the fiscal registration process:</span></span>

    - <span data-ttu-id="d44a1-225">**Permitir omisión** Este parámetro habilita la opción **Omitir** en el cuadro de diálogo de tratamiento de errores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-225">**Allow skip** – This parameter enables the **Skip** option in the error handling dialog box.</span></span>
    - <span data-ttu-id="d44a1-226">**Permitir lo marcado como registrado** Este parámetro habilita la opción **Marcar como registrado** en el cuadro de diálogo de control de errores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-226">**Allow mark as registered** – This parameter enables the **Mark as registered** option in the error handling dialog box.</span></span>

2. <span data-ttu-id="d44a1-227">Las opciones **Omitir** y **Marcar como registrado** en el cuadro de diálogo de tratamiento de errores requieren el permiso **Permitir omisión o marcar como registrado**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-227">The **Skip** and **Mark as registered** options in the error handling dialog box require the **Allow skip or mark as registered** permission.</span></span> <span data-ttu-id="d44a1-228">Por tanto, en la página **Grupos de permisos** (**Ventas al por menor \> Empleados \> Grupos de permisos**), habilite el permiso **Permitir omisión o marcar como registrado**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-228">Therefore, on the **Permission groups** page (**Retail \> Employees \> Permission groups**), enable the **Allow skip or mark as registered** permission.</span></span>
3. <span data-ttu-id="d44a1-229">Las opciones **Omitir** y **Marcar como registrado** permiten a los operadores especificar información adicional cuando el registro fiscal genera errores.</span><span class="sxs-lookup"><span data-stu-id="d44a1-229">The **Skip** and **Mark as registered** options let operators enter additional information when fiscal registration fails.</span></span> <span data-ttu-id="d44a1-230">Para hacer que esta funcionalidad esté disponible, debe especificar los códigos de información **Omitir** y **Marcar como registrado** en un grupo de conectores fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-230">To make this functionality available, you should specify the **Skip** and **Mark as registered** info codes on a fiscal connector group.</span></span> <span data-ttu-id="d44a1-231">La información que los operadores introducen se guarda como una transacción de código de información que está vinculada a la transacción fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-231">The information that operators enter is then saved as an info code transaction that is linked to the fiscal transaction.</span></span> <span data-ttu-id="d44a1-232">Para obtener más información acerca de códigos de información, consulte [Códigos de información y grupos de códigos de información](../info-codes-retail.md).</span><span class="sxs-lookup"><span data-stu-id="d44a1-232">For more details about info codes, see [Info codes and info code groups](../info-codes-retail.md).</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-233">La función de activación **Producto** no se admite para los códigos de información que se usan para **Omitir** y **Marcar como registrado** en grupos de conectores fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-233">The **Product** trigger function isn't supported for the info codes that are used for **Skip** and **Mark as registered** in fiscal connector groups.</span></span>

    - <span data-ttu-id="d44a1-234">En la página **Grupo de conectores fiscales**, en la pestaña **Códigos de información** , seleccione códigos de información o grupos de códigos de información en los campos **Omitir** y **Marcar como registrado**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-234">On the **Fiscal connector group** page, on the **Info codes** tab, select info codes or info code groups in the **Skip** and **Mark as registered** fields.</span></span>

    > [!NOTE]
    > <span data-ttu-id="d44a1-235">Un documento fiscal y un documento no fiscal se pueden generar en cualquier paso de un proceso de registro fiscal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-235">One fiscal document and one non-fiscal document can be generated on any step of a fiscal registration process.</span></span> <span data-ttu-id="d44a1-236">Una extensión del proveedor de documentos fiscales identifica cada tipo de transacción o evento en relación con documentos fiscales o no fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-236">A fiscal document provider extension identifies every type of transaction or event as related to fiscal or non-fiscal documents.</span></span> <span data-ttu-id="d44a1-237">La característica de tratamiento de errores solo se aplica a los documentos fiscales.</span><span class="sxs-lookup"><span data-stu-id="d44a1-237">The error handling feature applies only to fiscal documents.</span></span>
    >
    > - <span data-ttu-id="d44a1-238">**Documento fiscal**: un documento obligatorio que se debe registrar correctamente (por ejemplo, un recibo fiscal).</span><span class="sxs-lookup"><span data-stu-id="d44a1-238">**Fiscal document** – A mandatory document that should be registered successfully (for example, a fiscal receipt).</span></span>
    > - <span data-ttu-id="d44a1-239">**Documento no fiscal** – Un documento suplementario para la transacción o el evento (por ejemplo, un resguardo de tarjeta regalo).</span><span class="sxs-lookup"><span data-stu-id="d44a1-239">**Non-fiscal document** – A supplementary document for the transaction or event (for example, a gift card slip).</span></span>

## <a name="set-up-fiscal-xz-reports-from-the-pos"></a><span data-ttu-id="d44a1-240">Configuración de informes X/Z fiscales de PDV</span><span class="sxs-lookup"><span data-stu-id="d44a1-240">Set up fiscal X/Z reports from the POS</span></span>

<span data-ttu-id="d44a1-241">Para habilitar los informes fiscales de X/Z que se ejecutarán desde PDV, debe agregar nuevos botones a un diseño de PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-241">To enable fiscal X/Z reports to be run from the POS, you should add new buttons to a POS layout.</span></span>

- <span data-ttu-id="d44a1-242">En la página **Cuadrículas de botones** , siga las instrucciones que se indican en [Agregar un botón de operación personalizada al diseño de PDV en Central Retail](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) para instalar el diseñador y actualizar un diseño de PDV.</span><span class="sxs-lookup"><span data-stu-id="d44a1-242">On the **Button grids** page, follow the instructions in [Add a custom operation button to the POS layout in Retail headquarters](../dev-itpro/add-pos-operations.md#add-a-custom-operation-button-to-the-pos-layout-in-retail-headquarters) to install the designer and update a POS layout.</span></span>

    1. <span data-ttu-id="d44a1-243">Seleccionar el diseño que se va a actualizar.</span><span class="sxs-lookup"><span data-stu-id="d44a1-243">Select the layout to update.</span></span> 
    2. <span data-ttu-id="d44a1-244">Agregue un nuevo botón y defina la propiedad del botón **Impresión fiscal X**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-244">Add a new button, and set the **Print fiscal X** button property.</span></span>
    3. <span data-ttu-id="d44a1-245">Agregue un nuevo botón y defina la propiedad del botón **Impresión fiscal Z**.</span><span class="sxs-lookup"><span data-stu-id="d44a1-245">Add a new button, and set the **Print fiscal Z** button property.</span></span>
    4. <span data-ttu-id="d44a1-246">En la página **Programación de distribución**, ejecute el trabajo **1090** para transferir cambios a la base de datos del canal.</span><span class="sxs-lookup"><span data-stu-id="d44a1-246">On the **Distribution schedule** page, run the **1090** job to transfer changes to the channel database.</span></span>
